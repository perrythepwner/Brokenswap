{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { StaticJsonRpcProvider } from '@ethersproject/providers';\nimport { useMemo } from 'react';\nimport ERC20_ABI from '../constants/abis/erc20';\nimport { getContract } from '../utils';\nimport { useConnectionInfo } from './useConnectionInfo';\nexport function useWeb3Provider() {\n  _s();\n  /* eslint-disable-next-line */\n  const [connectionInfo, isIstanceRunning] = useConnectionInfo();\n  const RPC_ENDPOINT = connectionInfo['Player UUID'];\n  const provider = new StaticJsonRpcProvider(\"/rpc/\".concat(RPC_ENDPOINT), 31337);\n  return provider;\n}\n_s(useWeb3Provider, \"kYKOLgqxyP9oQc8SfMVb6taDS+Q=\", false, function () {\n  return [useConnectionInfo];\n});\nexport function useContract(address, ABI) {\n  _s2();\n  let withSignerIfPossible = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const library = useWeb3Provider();\n  const account = undefined;\n  return useMemo(() => {\n    if (!address || !ABI || !library) return null;\n    try {\n      return getContract(address, ABI, library, withSignerIfPossible && account ? account : undefined);\n    } catch (error) {\n      console.error('Failed to get contract', error);\n      return null;\n    }\n  }, [address, ABI, library, withSignerIfPossible, account]);\n}\n_s2(useContract, \"M/lzyw9IDe46hCWLePXFk41JdME=\", false, function () {\n  return [useWeb3Provider];\n});\nexport function useTokenContract(tokenAddress, withSignerIfPossible) {\n  _s3();\n  return useContract(tokenAddress, ERC20_ABI, withSignerIfPossible);\n}\n_s3(useTokenContract, \"OieRxpBRupXKKSB/Daj7yBGbdgo=\", false, function () {\n  return [useContract];\n});","map":{"version":3,"names":["StaticJsonRpcProvider","useMemo","ERC20_ABI","getContract","useConnectionInfo","useWeb3Provider","_s","connectionInfo","isIstanceRunning","RPC_ENDPOINT","provider","concat","useContract","address","ABI","_s2","withSignerIfPossible","arguments","length","undefined","library","account","error","console","useTokenContract","tokenAddress","_s3"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/hooks/useContract.ts"],"sourcesContent":["import { Interface } from '@ethersproject/abi'\nimport { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport { useMemo } from 'react'\n\nimport ERC20_ABI from '../constants/abis/erc20'\nimport { Erc20 } from '../generated'\nimport { getContract } from '../utils'\nimport { useConnectionInfo } from './useConnectionInfo'\n\nexport function useWeb3Provider() {\n  /* eslint-disable-next-line */\n  const [connectionInfo, isIstanceRunning] = useConnectionInfo()\n  const RPC_ENDPOINT = connectionInfo['Player UUID' as keyof typeof connectionInfo]\n  const provider = new StaticJsonRpcProvider(`/rpc/${RPC_ENDPOINT}`, 31337)\n  return provider\n}\n\nexport function useContract(address: string | undefined, ABI: Interface, withSignerIfPossible = true) {\n  const library = useWeb3Provider()\n  const account = undefined\n\n  return useMemo(() => {\n    if (!address || !ABI || !library) return null\n    try {\n      return getContract(address, ABI, library, withSignerIfPossible && account ? account : undefined)\n    } catch (error) {\n      console.error('Failed to get contract', error)\n      return null\n    }\n  }, [address, ABI, library, withSignerIfPossible, account])\n}\n\nexport function useTokenContract(tokenAddress: string | undefined, withSignerIfPossible?: boolean): Erc20 | null {\n  return useContract(tokenAddress, ERC20_ABI, withSignerIfPossible) as Erc20 | null\n}\n"],"mappings":";;;AACA,SAASA,qBAAqB,QAAQ,0BAA0B;AAChE,SAASC,OAAO,QAAQ,OAAO;AAE/B,OAAOC,SAAS,MAAM,yBAAyB;AAE/C,SAASC,WAAW,QAAQ,UAAU;AACtC,SAASC,iBAAiB,QAAQ,qBAAqB;AAEvD,OAAO,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EAChC;EACA,MAAM,CAACC,cAAc,EAAEC,gBAAgB,CAAC,GAAGJ,iBAAiB,CAAC,CAAC;EAC9D,MAAMK,YAAY,GAAGF,cAAc,CAAC,aAAa,CAAgC;EACjF,MAAMG,QAAQ,GAAG,IAAIV,qBAAqB,SAAAW,MAAA,CAASF,YAAY,GAAI,KAAK,CAAC;EACzE,OAAOC,QAAQ;AACjB;AAACJ,EAAA,CANeD,eAAe;EAAA,QAEcD,iBAAiB;AAAA;AAM9D,OAAO,SAASQ,WAAWA,CAACC,OAA2B,EAAEC,GAAc,EAA+B;EAAAC,GAAA;EAAA,IAA7BC,oBAAoB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAClG,MAAMG,OAAO,GAAGf,eAAe,CAAC,CAAC;EACjC,MAAMgB,OAAO,GAAGF,SAAS;EAEzB,OAAOlB,OAAO,CAAC,MAAM;IACnB,IAAI,CAACY,OAAO,IAAI,CAACC,GAAG,IAAI,CAACM,OAAO,EAAE,OAAO,IAAI;IAC7C,IAAI;MACF,OAAOjB,WAAW,CAACU,OAAO,EAAEC,GAAG,EAAEM,OAAO,EAAEJ,oBAAoB,IAAIK,OAAO,GAAGA,OAAO,GAAGF,SAAS,CAAC;IAClG,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,OAAO,IAAI;IACb;EACF,CAAC,EAAE,CAACT,OAAO,EAAEC,GAAG,EAAEM,OAAO,EAAEJ,oBAAoB,EAAEK,OAAO,CAAC,CAAC;AAC5D;AAACN,GAAA,CAbeH,WAAW;EAAA,QACTP,eAAe;AAAA;AAcjC,OAAO,SAASmB,gBAAgBA,CAACC,YAAgC,EAAET,oBAA8B,EAAgB;EAAAU,GAAA;EAC/G,OAAOd,WAAW,CAACa,YAAY,EAAEvB,SAAS,EAAEc,oBAAoB,CAAC;AACnE;AAACU,GAAA,CAFeF,gBAAgB;EAAA,QACvBZ,WAAW;AAAA"},"metadata":{},"sourceType":"module"}