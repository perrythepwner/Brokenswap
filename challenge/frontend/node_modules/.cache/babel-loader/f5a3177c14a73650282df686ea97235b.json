{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import React,{useContext,useRef,useState}from'react';import{Settings,X}from'react-feather';import{Text}from'rebass';import{useUserAllowMoolaWithdrawal,useUserDisableSmartRouting,useUserMinApprove}from'state/user/hooks';import styled,{ThemeContext}from'styled-components';import{useOnClickOutside}from'../../hooks/useOnClickOutside';import{ApplicationModal}from'../../state/application/actions';import{useModalOpen,useToggleSettingsMenu}from'../../state/application/hooks';import{useExpertModeManager,useUserSingleHopOnly,useUserSlippageTolerance,useUserTransactionTTL}from'../../state/user/hooks';import{TYPE}from'../../theme';import{ButtonError}from'../Button';import{AutoColumn}from'../Column';import Modal from'../Modal';import QuestionHelper from'../QuestionHelper';import{RowBetween,RowFixed}from'../Row';import Toggle from'../Toggle';import TransactionSettings from'../TransactionSettings';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StyledMenuIcon=styled(Settings)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height: 20px;\\n  width: 20px;\\n\\n  > * {\\n    stroke: \",\";\\n  }\\n\\n  :hover {\\n    opacity: 0.7;\\n  }\\n\"])),_ref=>{let{theme}=_ref;return theme.text2;});const StyledCloseIcon=styled(X)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  height: 20px;\\n  width: 20px;\\n  :hover {\\n    cursor: pointer;\\n  }\\n\\n  > * {\\n    stroke: \",\";\\n  }\\n\"])),_ref2=>{let{theme}=_ref2;return theme.text1;});const StyledMenuButton=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  border: none;\\n  background-color: transparent;\\n  margin: 0;\\n  padding: 0;\\n  height: 35px;\\n\\n  padding: 0.15rem 0.5rem;\\n  border-radius: 0.5rem;\\n\\n  :hover,\\n  :focus {\\n    cursor: pointer;\\n    outline: none;\\n  }\\n\\n  svg {\\n    margin-top: 2px;\\n  }\\n\"])));const EmojiWrapper=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: -6px;\\n  right: 0px;\\n  font-size: 14px;\\n\"])));const StyledMenu=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin-left: 0.5rem;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  position: relative;\\n  border: none;\\n  text-align: left;\\n\"])));const MenuFlyout=styled.span(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  min-width: 20.125rem;\\n  background-color: \",\";\\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\\n    0px 24px 32px rgba(0, 0, 0, 0.01);\\n  border-radius: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  font-size: 1rem;\\n  position: absolute;\\n  top: 3rem;\\n  right: 0rem;\\n  z-index: 100;\\n\\n  \",\";\\n\"])),_ref3=>{let{theme}=_ref3;return theme.bg2;},_ref4=>{let{theme}=_ref4;return theme.mediaWidth.upToMedium(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    min-width: 18.125rem;\\n  \"])));});const Break=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 1px;\\n  background-color: \",\";\\n\"])),_ref5=>{let{theme}=_ref5;return theme.bg3;});const ModalContentWrapper=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 2rem 0;\\n  background-color: \",\";\\n  border-radius: 20px;\\n\"])),_ref6=>{let{theme}=_ref6;return theme.bg2;});export default function SettingsTab(){const node=useRef();const open=useModalOpen(ApplicationModal.SETTINGS);const toggle=useToggleSettingsMenu();const theme=useContext(ThemeContext);const[userSlippageTolerance,setUserslippageTolerance]=useUserSlippageTolerance();const[minApprove,setMinApprove]=useUserMinApprove();const[allowMoolaWithdrawal,setAllowMoolaWithdrawal]=useUserAllowMoolaWithdrawal();const[disableSmartRouting,setDisableSmartRouting]=useUserDisableSmartRouting();const[ttl,setTtl]=useUserTransactionTTL();const[expertMode,toggleExpertMode]=useExpertModeManager();const[singleHopOnly,setSingleHopOnly]=useUserSingleHopOnly();// show confirmation view before turning on\nconst[showConfirmation,setShowConfirmation]=useState(false);useOnClickOutside(node,open?toggle:undefined);return/*#__PURE__*/ (// https://github.com/DefinitelyTyped/DefinitelyTyped/issues/30451\n_jsxs(StyledMenu,{ref:node,children:[/*#__PURE__*/_jsx(Modal,{isOpen:showConfirmation,onDismiss:()=>setShowConfirmation(false),maxHeight:100,children:/*#__PURE__*/_jsx(ModalContentWrapper,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",children:[/*#__PURE__*/_jsxs(RowBetween,{style:{padding:'0 2rem'},children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,children:\"Are you sure?\"}),/*#__PURE__*/_jsx(StyledCloseIcon,{onClick:()=>setShowConfirmation(false)})]}),/*#__PURE__*/_jsx(Break,{}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"lg\",style:{padding:'0 2rem'},children:[/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,children:\"Expert mode turns off the confirm transaction prompt and allows high slippage trades that often result in bad rates and lost funds.\"}),/*#__PURE__*/_jsx(Text,{fontWeight:600,fontSize:20,children:\"ONLY USE THIS MODE IF YOU KNOW WHAT YOU ARE DOING.\"}),/*#__PURE__*/_jsx(ButtonError,{error:true,padding:'12px',onClick:()=>{if(window.prompt(\"Please type the word \\\"confirm\\\" to enable expert mode.\")==='confirm'){toggleExpertMode();setShowConfirmation(false);}},children:/*#__PURE__*/_jsx(Text,{fontSize:20,fontWeight:500,id:\"confirm-expert-mode\",children:\"Turn On Expert Mode\"})})]})]})})}),/*#__PURE__*/_jsxs(StyledMenuButton,{\"aria-label\":open?'Close Advanced Settings':'Open Advanced Settings',onClick:toggle,id:\"open-settings-dialog-button\",children:[/*#__PURE__*/_jsx(StyledMenuIcon,{}),expertMode?/*#__PURE__*/_jsx(EmojiWrapper,{children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"wizard-icon\",children:\"\\uD83E\\uDDD9\"})}):null]}),open&&/*#__PURE__*/_jsx(MenuFlyout,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",style:{padding:'1rem'},children:[/*#__PURE__*/_jsx(Text,{fontWeight:600,fontSize:14,children:\"Transaction Settings\"}),/*#__PURE__*/_jsx(TransactionSettings,{rawSlippage:userSlippageTolerance,setRawSlippage:setUserslippageTolerance,deadline:ttl,setDeadline:setTtl}),/*#__PURE__*/_jsx(Text,{fontWeight:600,fontSize:14,children:\"Interface Settings\"}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:\"Toggle Expert Mode\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Bypasses confirmation modals and allows high slippage trades. Use at your own risk.\"})]}),/*#__PURE__*/_jsx(Toggle,{id:\"toggle-expert-mode-button\",isActive:expertMode,toggle:expertMode?()=>{toggleExpertMode();setShowConfirmation(false);}:()=>{toggle();setShowConfirmation(true);}})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:\"Disable Multihops\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Restricts swaps to direct pairs only.\"})]}),/*#__PURE__*/_jsx(Toggle,{id:\"toggle-disable-multihop-button\",isActive:singleHopOnly,toggle:()=>singleHopOnly?setSingleHopOnly(false):setSingleHopOnly(true)})]}),/*#__PURE__*/_jsx(Text,{fontWeight:600,fontSize:14,children:\"Routing Settings\"}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:\"Use minimum approval\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Ensures that each individual trade requires approving the router for the transfer.\"})]}),/*#__PURE__*/_jsx(Toggle,{isActive:minApprove,toggle:()=>minApprove?setMinApprove(false):setMinApprove(true)})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:\"Disable smart routing\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Disable using advanced routing techniques to optimize your trade execution price.\"})]}),/*#__PURE__*/_jsx(Toggle,{isActive:disableSmartRouting,toggle:()=>setDisableSmartRouting(!disableSmartRouting)})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:\"Allow Moola withdrawal\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Enables withdrawing collateral from Moola. This can cause you to get liquidated-- be careful!\"})]}),/*#__PURE__*/_jsx(Toggle,{isActive:allowMoolaWithdrawal,toggle:()=>setAllowMoolaWithdrawal(!allowMoolaWithdrawal)})]})]})})]}));}","map":null,"metadata":{},"sourceType":"module"}