{"ast":null,"code":"import _objectSpread from \"/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _taggedTemplateLiteral from \"/app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _jsxFileName = \"/app/src/pages/Swap/index.tsx\",\n  _templateObject,\n  _templateObject2,\n  _s = $RefreshSig$();\nimport { Contract } from '@ethersproject/contracts';\nimport { formatUnits } from '@ethersproject/units';\nimport { ERC20_ABI } from 'constants/abis/erc20';\nimport { ethers } from 'ethers';\nimport React, { useCallback, useContext, useState } from 'react';\nimport { ArrowDown } from 'react-feather';\nimport { Text } from 'rebass';\nimport styled, { ThemeContext } from 'styled-components';\nimport AddressInputPanel from '../../components/AddressInputPanel';\nimport { ButtonPrimary } from '../../components/Button';\nimport { AutoColumn } from '../../components/Column';\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel';\nimport Modal from '../../components/Modal';\nimport { SwapPoolTabs } from '../../components/NavigationTabs';\nimport { AutoRow, RowBetween } from '../../components/Row';\nimport { ArrowWrapper, Wrapper } from '../../components/swap/styleds';\nimport SwapHeader from '../../components/swap/SwapHeader';\nimport BROKENSWAP_ABI from '../../constants/abis/Brokenswap.json';\nimport { useConnectionInfo } from '../../hooks/useConnectionInfo';\nimport { useWeb3Provider } from '../../hooks/useContract';\nimport { Field } from '../../state/swap/actions';\nimport { useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from '../../state/swap/hooks';\nimport { CloseIcon, LinkStyledButton } from '../../theme';\nimport AppBody from '../AppBody';\n\n// to-do: move to /abis/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ContentWrapper = styled(AutoColumn)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  flex: 1 1;\\n  position: relative;\\n  padding: 1rem;\\n\"])));\n_c = ContentWrapper;\nconst Label = styled.span(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  font-weight: bold;\\n  margin-bottom: 0.5rem;\\n\"])));\n_c2 = Label;\nconst InfoLabel = _ref => {\n  let {\n    label,\n    value\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Label, {\n      children: [label, \": \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this), value]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 3\n  }, this);\n};\n_c3 = InfoLabel;\nexport default function Swap() {\n  _s();\n  var _parsedAmounts$depend, _parsedAmounts$depend2, _currencies$Field$INP, _currencies$Field$INP2, _currencies$Field$OUT, _currencies$Field$OUT2, _currencies$Field$INP3, _currencies$Field$INP4, _currencies$Field$INP5;\n  const theme = useContext(ThemeContext);\n  const {\n    independentField,\n    typedValue,\n    recipient\n  } = useSwapState();\n  const {\n    parsedAmount,\n    currencies\n  } = useDerivedSwapInfo();\n  const parsedAmounts = {\n    [Field.INPUT]: parsedAmount,\n    [Field.OUTPUT]: parsedAmount\n  };\n  const {\n    onSwitchTokens,\n    onCurrencySelection,\n    onUserInput,\n    onChangeRecipient\n  } = useSwapActionHandlers();\n  const dependentField = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT;\n  const handleTypeInput = useCallback(value => {\n    onUserInput(Field.INPUT, value);\n  }, [onUserInput]);\n  const handleTypeOutput = useCallback(value => {\n    onUserInput(Field.OUTPUT, value);\n  }, [onUserInput]);\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: (_parsedAmounts$depend = (_parsedAmounts$depend2 = parsedAmounts[dependentField]) === null || _parsedAmounts$depend2 === void 0 ? void 0 : _parsedAmounts$depend2.toSignificant(6)) !== null && _parsedAmounts$depend !== void 0 ? _parsedAmounts$depend : ''\n  };\n  const handleInputSelect = useCallback(inputCurrency => {\n    onCurrencySelection(Field.INPUT, inputCurrency);\n  }, [onCurrencySelection]);\n  const handleOutputSelect = useCallback(outputCurrency => onCurrencySelection(Field.OUTPUT, outputCurrency), [onCurrencySelection]);\n  const [showPopup, setShowPopup] = useState(false);\n  const [showTxPopup, setShowTxPopup] = useState(false);\n  const [transactionInfo, setTransactionInfo] = useState({\n    title: '',\n    txHash: '',\n    logs: [],\n    errorCode: '',\n    errorMessage: '',\n    errorBody: '',\n    revertReason: ''\n  });\n  const [connectionInfo, isInstanceRunning] = useConnectionInfo();\n  const provider = useWeb3Provider();\n  function sendSwap(_x, _x2, _x3) {\n    return _sendSwap.apply(this, arguments);\n  }\n  function _sendSwap() {\n    _sendSwap = _asyncToGenerator(function* (inputToken, outputToken, inputAmount) {\n      if (inputToken === undefined || outputToken === undefined) {\n        setTransactionInfo({\n          title: 'SWAP FAILED',\n          txHash: '',\n          logs: [],\n          errorCode: '',\n          errorMessage: 'Select input and output tokens first',\n          errorBody: '',\n          revertReason: ''\n        });\n      } else {\n        if (isInstanceRunning && provider) {\n          try {\n            console.log('===========INITIALIZING SWAP===========', 'inputToken', inputToken, 'outputToken', outputToken, 'inputAmount', inputAmount);\n            const BROKENSWAP_ADDRESS = connectionInfo['Target Contract'];\n            const signer = new ethers.Wallet(connectionInfo['Player Private Key'], provider);\n            // approve transfer first\n            const inputTokenContract = new Contract(inputToken.address, ERC20_ABI, signer);\n            const approval = yield inputTokenContract.approve(BROKENSWAP_ADDRESS, ethers.utils.parseUnits(inputAmount, 18));\n            const approvalRcpt = yield approval.wait();\n            const Brokenswap = new Contract(BROKENSWAP_ADDRESS, BROKENSWAP_ABI.abi, signer);\n            const transaction = yield Brokenswap.swap(inputToken.address, outputToken.address, ethers.utils.parseUnits(inputAmount, 18));\n            const TxRcpt = yield transaction.wait();\n            const currentBlock = yield provider.getBlockNumber();\n            const events = yield Brokenswap.queryFilter('Swap', currentBlock, currentBlock);\n            console.log('===========SWAP SUCCESSFUL===========', 'Transaction Receipt', TxRcpt);\n            setTransactionInfo({\n              title: 'SWAP SUCCESSFUL',\n              txHash: TxRcpt.transactionHash,\n              logs: events[0].topics,\n              errorCode: '',\n              errorMessage: '',\n              errorBody: '',\n              revertReason: ''\n            });\n            setShowTxPopup(true);\n          } catch (error) {\n            console.log('===========SWAP FAILED===========', 'ERROR', error);\n            setTransactionInfo(prevState => {\n              var _ref2, _ref3, _error$error$error$bo, _error$error, _error$error$error, _error$error2;\n              return _objectSpread(_objectSpread({}, prevState), {}, {\n                title: 'SWAP FAILED',\n                txHash: '',\n                logs: [],\n                revertReason: error.reason || undefined,\n                errorCode: error.code || undefined,\n                errorMessage: error.code !== 'UNPREDICTABLE_GAS_LIMIT' && error.code !== 'SERVER_ERROR' ? error.message : undefined,\n                errorBody: (_ref2 = (_ref3 = (_error$error$error$bo = (_error$error = error.error) === null || _error$error === void 0 ? void 0 : (_error$error$error = _error$error.error) === null || _error$error$error === void 0 ? void 0 : _error$error$error.body) !== null && _error$error$error$bo !== void 0 ? _error$error$error$bo : (_error$error2 = error.error) === null || _error$error2 === void 0 ? void 0 : _error$error2.body) !== null && _ref3 !== void 0 ? _ref3 : error.body) !== null && _ref2 !== void 0 ? _ref2 : undefined\n              });\n            });\n            setShowTxPopup(true);\n          }\n        } else {\n          setShowPopup(true);\n        }\n      }\n    });\n    return _sendSwap.apply(this, arguments);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SwapPoolTabs, {\n      active: 'swap'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppBody, {\n      children: [/*#__PURE__*/_jsxDEV(SwapHeader, {\n        title: 'Swap'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n        id: \"swap-page\",\n        children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: 'md',\n          children: [/*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n            label: 'From',\n            value: formattedAmounts[Field.INPUT],\n            showMaxButton: false,\n            showHalfButton: false,\n            currency: currencies[Field.INPUT],\n            onUserInput: handleTypeInput,\n            onCurrencySelect: handleInputSelect,\n            otherCurrency: currencies[Field.OUTPUT],\n            id: \"swap-currency-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n            justify: \"space-between\",\n            children: /*#__PURE__*/_jsxDEV(AutoRow, {\n              justify: 'center',\n              style: {\n                padding: '0 1rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(ArrowWrapper, {\n                clickable: true,\n                children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                  size: \"16\",\n                  onClick: () => {\n                    handleTypeInput(formattedAmounts[Field.OUTPUT]);\n                    onSwitchTokens();\n                  },\n                  color: currencies[Field.INPUT] && currencies[Field.OUTPUT] ? theme.primary1 : theme.text2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n            value: formattedAmounts[Field.OUTPUT],\n            onUserInput: handleTypeOutput,\n            label: independentField === Field.INPUT ? 'To' : undefined,\n            showMaxButton: false,\n            currency: currencies[Field.OUTPUT],\n            hideNumericalInput: true,\n            onCurrencySelect: handleOutputSelect,\n            otherCurrency: currencies[Field.INPUT],\n            id: \"swap-currency-output\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), recipient !== null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(AutoRow, {\n              justify: \"space-between\",\n              style: {\n                padding: '0 1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n                clickable: false,\n                children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                  size: \"16\",\n                  color: theme.text2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(LinkStyledButton, {\n                id: \"remove-recipient-button\",\n                onClick: () => onChangeRecipient(null),\n                children: \"- Remove send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(AddressInputPanel, {\n              id: \"recipient\",\n              value: recipient,\n              onChange: onChangeRecipient\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : null, /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            borderRadius: \"12px\",\n            onClick: () => sendSwap(currencies[Field.INPUT], currencies[Field.OUTPUT], formattedAmounts[Field.INPUT]),\n            children: 'Swap'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            isOpen: showPopup,\n            onDismiss: () => setShowPopup(false),\n            children: /*#__PURE__*/_jsxDEV(ContentWrapper, {\n              children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n                gap: \"12px\",\n                children: /*#__PURE__*/_jsxDEV(RowBetween, {\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    fontWeight: 500,\n                    fontSize: 18,\n                    children: 'No instance found!\\nStart a new instance in the Challenge Handler and then Reload the page.'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n                    onClick: () => setShowPopup(false)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            isOpen: showTxPopup,\n            onDismiss: () => setShowTxPopup(false),\n            children: /*#__PURE__*/_jsxDEV(ContentWrapper, {\n              gap: '12x',\n              children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n                gap: \"12px\",\n                children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    fontWeight: 800,\n                    fontSize: 18,\n                    style: transactionInfo.errorMessage === '' ? {\n                      color: '#8878C3'\n                    } : {\n                      color: '#E83B46'\n                    },\n                    children: transactionInfo.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n                    onClick: () => setShowTxPopup(false)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n                  children: /*#__PURE__*/_jsxDEV(Text, {\n                    fontWeight: 400,\n                    fontSize: 18,\n                    children: [transactionInfo.txHash && /*#__PURE__*/_jsxDEV(InfoLabel, {\n                      label: \"Transaction Hash\",\n                      value: transactionInfo.txHash\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 50\n                    }, this), transactionInfo.logs && transactionInfo.logs.length == 4 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 276,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(InfoLabel, {\n                        label: \"Swap Details\",\n                        value: ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 277,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(InfoLabel, {\n                        label: \"Input\",\n                        value: parseFloat(formatUnits(transactionInfo.logs[1], 18)) + '   ' + ((_currencies$Field$INP = (_currencies$Field$INP2 = currencies[Field.INPUT]) === null || _currencies$Field$INP2 === void 0 ? void 0 : _currencies$Field$INP2.symbol) !== null && _currencies$Field$INP !== void 0 ? _currencies$Field$INP : '')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(InfoLabel, {\n                        label: \"Output\",\n                        value: parseFloat(formatUnits(transactionInfo.logs[2], 18)) + '   ' + ((_currencies$Field$OUT = (_currencies$Field$OUT2 = currencies[Field.OUTPUT]) === null || _currencies$Field$OUT2 === void 0 ? void 0 : _currencies$Field$OUT2.symbol) !== null && _currencies$Field$OUT !== void 0 ? _currencies$Field$OUT : '')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(InfoLabel, {\n                        label: \"With Amount of Fees moved to Fees Pool\",\n                        value: ((_currencies$Field$INP3 = currencies[Field.INPUT]) === null || _currencies$Field$INP3 === void 0 ? void 0 : _currencies$Field$INP3.symbol) && parseFloat(formatUnits(transactionInfo.logs[3], 18)) + ' ' + ((_currencies$Field$INP4 = (_currencies$Field$INP5 = currencies[Field.INPUT]) === null || _currencies$Field$INP5 === void 0 ? void 0 : _currencies$Field$INP5.symbol) !== null && _currencies$Field$INP4 !== void 0 ? _currencies$Field$INP4 : '')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 294,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 303,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(InfoLabel, {\n                        label: \"NOTE\",\n                        value: '\\n Reload page to view updated balances'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 304,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true), transactionInfo.errorCode && /*#__PURE__*/_jsxDEV(InfoLabel, {\n                      label: \"Error code\",\n                      value: transactionInfo.errorCode\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 53\n                    }, this), transactionInfo.errorMessage && /*#__PURE__*/_jsxDEV(InfoLabel, {\n                      label: \"Error message\",\n                      value: transactionInfo.errorMessage\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 25\n                    }, this), transactionInfo.errorBody && /*#__PURE__*/_jsxDEV(InfoLabel, {\n                      label: \"Error body\",\n                      value: JSON.parse(transactionInfo.errorBody).error.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 25\n                    }, this), transactionInfo.revertReason && /*#__PURE__*/_jsxDEV(InfoLabel, {\n                      label: \"Revert reason\",\n                      value: transactionInfo.revertReason\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Swap, \"yeX+82/dI75gtBXbSpCz1hP0Bkw=\", false, function () {\n  return [useSwapState, useDerivedSwapInfo, useSwapActionHandlers, useConnectionInfo, useWeb3Provider];\n});\n_c4 = Swap;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ContentWrapper\");\n$RefreshReg$(_c2, \"Label\");\n$RefreshReg$(_c3, \"InfoLabel\");\n$RefreshReg$(_c4, \"Swap\");","map":{"version":3,"names":["Contract","formatUnits","ERC20_ABI","ethers","React","useCallback","useContext","useState","ArrowDown","Text","styled","ThemeContext","AddressInputPanel","ButtonPrimary","AutoColumn","CurrencyInputPanel","Modal","SwapPoolTabs","AutoRow","RowBetween","ArrowWrapper","Wrapper","SwapHeader","BROKENSWAP_ABI","useConnectionInfo","useWeb3Provider","Field","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","CloseIcon","LinkStyledButton","AppBody","jsxDEV","_jsxDEV","Fragment","_Fragment","ContentWrapper","_templateObject","_taggedTemplateLiteral","_c","Label","span","_templateObject2","_c2","InfoLabel","_ref","label","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c3","Swap","_s","_parsedAmounts$depend","_parsedAmounts$depend2","_currencies$Field$INP","_currencies$Field$INP2","_currencies$Field$OUT","_currencies$Field$OUT2","_currencies$Field$INP3","_currencies$Field$INP4","_currencies$Field$INP5","theme","independentField","typedValue","recipient","parsedAmount","currencies","parsedAmounts","INPUT","OUTPUT","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","dependentField","handleTypeInput","handleTypeOutput","formattedAmounts","toSignificant","handleInputSelect","inputCurrency","handleOutputSelect","outputCurrency","showPopup","setShowPopup","showTxPopup","setShowTxPopup","transactionInfo","setTransactionInfo","title","txHash","logs","errorCode","errorMessage","errorBody","revertReason","connectionInfo","isInstanceRunning","provider","sendSwap","_x","_x2","_x3","_sendSwap","apply","arguments","_asyncToGenerator","inputToken","outputToken","inputAmount","undefined","console","log","BROKENSWAP_ADDRESS","signer","Wallet","inputTokenContract","address","approval","approve","utils","parseUnits","approvalRcpt","wait","Brokenswap","abi","transaction","swap","TxRcpt","currentBlock","getBlockNumber","events","queryFilter","transactionHash","topics","error","prevState","_ref2","_ref3","_error$error$error$bo","_error$error","_error$error$error","_error$error2","_objectSpread","reason","code","message","body","active","id","gap","showMaxButton","showHalfButton","currency","onCurrencySelect","otherCurrency","justify","style","padding","clickable","size","onClick","color","primary1","text2","hideNumericalInput","disabled","onChange","borderRadius","isOpen","onDismiss","fontWeight","fontSize","length","parseFloat","symbol","JSON","parse","_c4","$RefreshReg$"],"sources":["/app/src/pages/Swap/index.tsx"],"sourcesContent":["import { Contract } from '@ethersproject/contracts'\nimport { formatUnits } from '@ethersproject/units'\nimport { Token } from '@ubeswap/sdk'\nimport { ERC20_ABI } from 'constants/abis/erc20'\nimport { ethers } from 'ethers'\nimport React, { useCallback, useContext, useState } from 'react'\nimport { ArrowDown } from 'react-feather'\nimport { Text } from 'rebass'\nimport styled, { ThemeContext } from 'styled-components'\n\nimport AddressInputPanel from '../../components/AddressInputPanel'\nimport { ButtonPrimary } from '../../components/Button'\nimport { AutoColumn } from '../../components/Column'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport Modal from '../../components/Modal'\nimport { SwapPoolTabs } from '../../components/NavigationTabs'\nimport { AutoRow, RowBetween } from '../../components/Row'\nimport { ArrowWrapper, Wrapper } from '../../components/swap/styleds'\nimport SwapHeader from '../../components/swap/SwapHeader'\nimport BROKENSWAP_ABI from '../../constants/abis/Brokenswap.json'\nimport { useConnectionInfo } from '../../hooks/useConnectionInfo'\nimport { useWeb3Provider } from '../../hooks/useContract'\nimport { Field } from '../../state/swap/actions'\nimport { useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from '../../state/swap/hooks'\nimport { CloseIcon, LinkStyledButton } from '../../theme'\nimport AppBody from '../AppBody'\n\n// to-do: move to /abis/\nconst ContentWrapper = styled(AutoColumn)`\n  width: 100%;\n  flex: 1 1;\n  position: relative;\n  padding: 1rem;\n`\nconst Label = styled.span`\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n`\ninterface InfoLabelProps {\n  label: string | undefined\n  value: string | undefined\n}\n\nconst InfoLabel = ({ label, value }: InfoLabelProps) => (\n  <div>\n    <Label>{label}: </Label>\n    {value}\n  </div>\n)\n\nexport default function Swap() {\n  const theme = useContext(ThemeContext)\n\n  const { independentField, typedValue, recipient } = useSwapState()\n  const { parsedAmount, currencies } = useDerivedSwapInfo()\n  const parsedAmounts = {\n    [Field.INPUT]: parsedAmount,\n    [Field.OUTPUT]: parsedAmount,\n  }\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      onCurrencySelection(Field.INPUT, inputCurrency)\n    },\n    [onCurrencySelection]\n  )\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => onCurrencySelection(Field.OUTPUT, outputCurrency),\n    [onCurrencySelection]\n  )\n\n  const [showPopup, setShowPopup] = useState(false)\n  const [showTxPopup, setShowTxPopup] = useState(false)\n  const [transactionInfo, setTransactionInfo] = useState({\n    title: '',\n    txHash: '',\n    logs: [],\n    errorCode: '',\n    errorMessage: '',\n    errorBody: '',\n    revertReason: '',\n  })\n  const [connectionInfo, isInstanceRunning] = useConnectionInfo()\n  const provider = useWeb3Provider()\n\n  async function sendSwap(inputToken: Token | undefined, outputToken: Token | undefined, inputAmount: string) {\n    if (inputToken === undefined || outputToken === undefined) {\n      setTransactionInfo({\n        title: 'SWAP FAILED',\n        txHash: '',\n        logs: [],\n        errorCode: '',\n        errorMessage: 'Select input and output tokens first',\n        errorBody: '',\n        revertReason: '',\n      })\n    } else {\n      if (isInstanceRunning && provider) {\n        try {\n          console.log(\n            '===========INITIALIZING SWAP===========',\n            'inputToken',\n            inputToken,\n            'outputToken',\n            outputToken,\n            'inputAmount',\n            inputAmount\n          )\n          const BROKENSWAP_ADDRESS = connectionInfo['Target Contract' as keyof typeof connectionInfo]\n          const signer = new ethers.Wallet(\n            connectionInfo['Player Private Key' as keyof typeof connectionInfo],\n            provider\n          )\n          // approve transfer first\n          const inputTokenContract = new Contract(inputToken.address, ERC20_ABI, signer)\n          const approval = await inputTokenContract.approve(\n            BROKENSWAP_ADDRESS,\n            ethers.utils.parseUnits(inputAmount, 18)\n          )\n          const approvalRcpt = await approval.wait()\n          const Brokenswap = new Contract(BROKENSWAP_ADDRESS, BROKENSWAP_ABI.abi, signer)\n          const transaction = await Brokenswap.swap(\n            inputToken.address,\n            outputToken.address,\n            ethers.utils.parseUnits(inputAmount, 18)\n          )\n          const TxRcpt = await transaction.wait()\n          const currentBlock = await provider.getBlockNumber()\n          const events: any[] = await Brokenswap.queryFilter('Swap', currentBlock, currentBlock)\n          console.log('===========SWAP SUCCESSFUL===========', 'Transaction Receipt', TxRcpt)\n          setTransactionInfo({\n            title: 'SWAP SUCCESSFUL',\n            txHash: TxRcpt.transactionHash,\n            logs: events[0].topics,\n            errorCode: '',\n            errorMessage: '',\n            errorBody: '',\n            revertReason: '',\n          })\n          setShowTxPopup(true)\n        } catch (error: any) {\n          console.log('===========SWAP FAILED===========', 'ERROR', error)\n          setTransactionInfo((prevState) => ({\n            ...prevState,\n            title: 'SWAP FAILED',\n            txHash: '',\n            logs: [],\n            revertReason: error.reason || undefined,\n            errorCode: error.code || undefined,\n            errorMessage:\n              error.code !== 'UNPREDICTABLE_GAS_LIMIT' && error.code !== 'SERVER_ERROR' ? error.message : undefined,\n            errorBody: error.error?.error?.body ?? error.error?.body ?? error.body ?? undefined,\n          }))\n          setShowTxPopup(true)\n        }\n      } else {\n        setShowPopup(true)\n      }\n    }\n  }\n\n  return (\n    <>\n      <SwapPoolTabs active={'swap'} />\n      <AppBody>\n        <SwapHeader title={'Swap'} />\n        <Wrapper id=\"swap-page\">\n          <AutoColumn gap={'md'}>\n            <CurrencyInputPanel\n              label={'From'}\n              value={formattedAmounts[Field.INPUT]}\n              showMaxButton={false}\n              showHalfButton={false}\n              currency={currencies[Field.INPUT]}\n              onUserInput={handleTypeInput}\n              onCurrencySelect={handleInputSelect}\n              otherCurrency={currencies[Field.OUTPUT]}\n              id=\"swap-currency-input\"\n            />\n            <AutoColumn justify=\"space-between\">\n              <AutoRow justify={'center'} style={{ padding: '0 1rem' }}>\n                <ArrowWrapper clickable>\n                  <ArrowDown\n                    size=\"16\"\n                    onClick={() => {\n                      handleTypeInput(formattedAmounts[Field.OUTPUT])\n                      onSwitchTokens()\n                    }}\n                    color={currencies[Field.INPUT] && currencies[Field.OUTPUT] ? theme.primary1 : theme.text2}\n                  />\n                </ArrowWrapper>\n              </AutoRow>\n            </AutoColumn>\n            <CurrencyInputPanel\n              value={formattedAmounts[Field.OUTPUT]}\n              onUserInput={handleTypeOutput}\n              label={independentField === Field.INPUT ? 'To' : undefined}\n              showMaxButton={false}\n              currency={currencies[Field.OUTPUT]}\n              hideNumericalInput={true}\n              onCurrencySelect={handleOutputSelect}\n              otherCurrency={currencies[Field.INPUT]}\n              id=\"swap-currency-output\"\n              disabled\n            />\n\n            {recipient !== null ? (\n              <>\n                <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable={false}>\n                    <ArrowDown size=\"16\" color={theme.text2} />\n                  </ArrowWrapper>\n                  <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                    - Remove send\n                  </LinkStyledButton>\n                </AutoRow>\n                <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n              </>\n            ) : null}\n            <ButtonPrimary\n              borderRadius=\"12px\"\n              onClick={() => sendSwap(currencies[Field.INPUT], currencies[Field.OUTPUT], formattedAmounts[Field.INPUT])}\n            >{`${'Swap'}`}</ButtonPrimary>\n            <Modal isOpen={showPopup} onDismiss={() => setShowPopup(false)}>\n              <ContentWrapper>\n                <AutoColumn gap=\"12px\">\n                  <RowBetween>\n                    <Text fontWeight={500} fontSize={18}>\n                      {'No instance found!\\nStart a new instance in the Challenge Handler and then Reload the page.'}\n                    </Text>\n                    <CloseIcon onClick={() => setShowPopup(false)} />\n                  </RowBetween>\n                </AutoColumn>\n              </ContentWrapper>\n            </Modal>\n\n            <Modal isOpen={showTxPopup} onDismiss={() => setShowTxPopup(false)}>\n              <ContentWrapper gap={'12x'}>\n                <AutoColumn gap=\"12px\">\n                  <RowBetween>\n                    <Text\n                      fontWeight={800}\n                      fontSize={18}\n                      style={transactionInfo.errorMessage === '' ? { color: '#8878C3' } : { color: '#E83B46' }}\n                    >\n                      {transactionInfo.title}\n                    </Text>\n                    <CloseIcon onClick={() => setShowTxPopup(false)} />\n                  </RowBetween>\n                  <RowBetween>\n                    <Text fontWeight={400} fontSize={18}>\n                      {transactionInfo.txHash && <InfoLabel label=\"Transaction Hash\" value={transactionInfo.txHash} />}\n                      {transactionInfo.logs && transactionInfo.logs.length == 4 && (\n                        <>\n                          <br />\n                          <InfoLabel label=\"Swap Details\" value={''} />\n                          <InfoLabel\n                            label=\"Input\"\n                            value={\n                              parseFloat(formatUnits(transactionInfo.logs[1], 18)) +\n                              '   ' +\n                              (currencies[Field.INPUT]?.symbol ?? '')\n                            }\n                          />\n                          <InfoLabel\n                            label=\"Output\"\n                            value={\n                              parseFloat(formatUnits(transactionInfo.logs[2], 18)) +\n                              '   ' +\n                              (currencies[Field.OUTPUT]?.symbol ?? '')\n                            }\n                          />\n                          <InfoLabel\n                            label=\"With Amount of Fees moved to Fees Pool\"\n                            value={\n                              currencies[Field.INPUT]?.symbol &&\n                              parseFloat(formatUnits(transactionInfo.logs[3], 18)) +\n                                ' ' +\n                                (currencies[Field.INPUT]?.symbol ?? '')\n                            }\n                          />\n                          <br />\n                          <InfoLabel label=\"NOTE\" value={'\\n Reload page to view updated balances'} />\n                        </>\n                      )}\n                      {transactionInfo.errorCode && <InfoLabel label=\"Error code\" value={transactionInfo.errorCode} />}\n                      {transactionInfo.errorMessage && (\n                        <InfoLabel label=\"Error message\" value={transactionInfo.errorMessage} />\n                      )}\n                      {transactionInfo.errorBody && (\n                        <InfoLabel label=\"Error body\" value={JSON.parse(transactionInfo.errorBody).error.message} />\n                      )}\n                      {transactionInfo.revertReason && (\n                        <InfoLabel label=\"Revert reason\" value={transactionInfo.revertReason} />\n                      )}\n                    </Text>\n                  </RowBetween>\n                </AutoColumn>\n              </ContentWrapper>\n            </Modal>\n          </AutoColumn>\n        </Wrapper>\n      </AppBody>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}