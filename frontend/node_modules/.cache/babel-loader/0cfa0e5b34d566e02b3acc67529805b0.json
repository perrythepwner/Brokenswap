{"ast":null,"code":"import{useCelo}from'@celo/react-celo';import React,{useContext,useMemo}from'react';import{AlertTriangle}from'react-feather';import{ThemeContext}from'styled-components';import{AutoColumn,TopSection}from'../../components/Column';import{CardSection,TopBorderCard}from'../../components/earn/styled';import{RowBetween,RowStart}from'../../components/Row';import{usePairs}from'../../data/Reserves';import{toV2LiquidityToken,useTrackedTokenPairs}from'../../state/user/hooks';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{StyledInternalLink,TYPE}from'../../theme';import{useUniqueBestFarms}from'../Earn/useFarmRegistry';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LiquidityWarning(){const theme=useContext(ThemeContext);const{address:account}=useCelo();const trackedTokenPairs=useTrackedTokenPairs();const tokenPairsWithLiquidityTokens=useMemo(()=>trackedTokenPairs.map(tokens=>({liquidityToken:toV2LiquidityToken(tokens),tokens})),[trackedTokenPairs]);const liquidityTokens=useMemo(()=>tokenPairsWithLiquidityTokens.map(tpwlt=>tpwlt.liquidityToken),[tokenPairsWithLiquidityTokens]);const[v2PairsBalances]=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens);const liquidityTokensWithBalances=useMemo(()=>tokenPairsWithLiquidityTokens.filter(_ref=>{var _v2PairsBalances$liqu;let{liquidityToken}=_ref;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');}).map(_ref2=>{let{tokens}=_ref2;return tokens;}),[tokenPairsWithLiquidityTokens,v2PairsBalances]);const v2Pairs=usePairs(liquidityTokensWithBalances);const farmSummaries=useUniqueBestFarms();const warnings=useMemo(()=>{const localWarnings=[];v2Pairs.forEach(_ref3=>{let[,pair]=_ref3;const lpTokenAddress=pair===null||pair===void 0?void 0:pair.liquidityToken.address;if(lpTokenAddress&&farmSummaries[lpTokenAddress]){const farm=farmSummaries[lpTokenAddress];const poolName=\"\".concat(pair===null||pair===void 0?void 0:pair.token0.symbol,\"-\").concat(pair===null||pair===void 0?void 0:pair.token1.symbol);const link=\"/farm/\".concat(farm===null||farm===void 0?void 0:farm.token0Address,\"/\").concat(farm===null||farm===void 0?void 0:farm.token1Address,\"/\").concat(farm===null||farm===void 0?void 0:farm.stakingAddress);localWarnings.push({poolName,link});}});return localWarnings;},[v2Pairs,farmSummaries]);return/*#__PURE__*/_jsx(TopSection,{gap:\"md\",children:warnings.map(warning=>/*#__PURE__*/_jsx(TopBorderCard,{children:/*#__PURE__*/_jsx(CardSection,{children:/*#__PURE__*/_jsxs(RowStart,{children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingRight:16},children:/*#__PURE__*/_jsx(AlertTriangle,{color:theme.yellow2,size:36})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(TYPE.black,{fontWeight:600,children:'Unstaked LP Tokens for '+warning.poolName})}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsxs(TYPE.black,{fontSize:14,children:[\"Stake into the farming pool \",warning.poolName,\".\"]})}),/*#__PURE__*/_jsx(StyledInternalLink,{to:warning.link,children:'Farm UBE'})]})]})})},warning.link))});}","map":{"version":3,"names":["useCelo","React","useContext","useMemo","AlertTriangle","ThemeContext","AutoColumn","TopSection","CardSection","TopBorderCard","RowBetween","RowStart","usePairs","toV2LiquidityToken","useTrackedTokenPairs","useTokenBalancesWithLoadingIndicator","StyledInternalLink","TYPE","useUniqueBestFarms","jsx","_jsx","jsxs","_jsxs","LiquidityWarning","theme","address","account","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","v2PairsBalances","undefined","liquidityTokensWithBalances","filter","_ref","_v2PairsBalances$liqu","greaterThan","_ref2","v2Pairs","farmSummaries","warnings","localWarnings","forEach","_ref3","pair","lpTokenAddress","farm","poolName","concat","token0","symbol","token1","link","token0Address","token1Address","stakingAddress","push","gap","children","warning","style","paddingRight","color","yellow2","size","black","fontWeight","fontSize","to"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/pages/Pool/LiquidityWarning.tsx"],"sourcesContent":["import { useCelo } from '@celo/react-celo'\nimport React, { useContext, useMemo } from 'react'\nimport { AlertTriangle } from 'react-feather'\nimport { ThemeContext } from 'styled-components'\n\nimport { AutoColumn, TopSection } from '../../components/Column'\nimport { CardSection, TopBorderCard } from '../../components/earn/styled'\nimport { RowBetween, RowStart } from '../../components/Row'\nimport { usePairs } from '../../data/Reserves'\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\nimport { StyledInternalLink, TYPE } from '../../theme'\nimport { useUniqueBestFarms, WarningInfo } from '../Earn/useFarmRegistry'\n\nexport default function LiquidityWarning() {\n  const theme = useContext(ThemeContext)\n  const { address: account } = useCelo()\n\n  const trackedTokenPairs = useTrackedTokenPairs()\n  const tokenPairsWithLiquidityTokens = useMemo(\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\n    [trackedTokenPairs]\n  )\n  const liquidityTokens = useMemo(\n    () => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken),\n    [tokenPairsWithLiquidityTokens]\n  )\n  const [v2PairsBalances] = useTokenBalancesWithLoadingIndicator(account ?? undefined, liquidityTokens)\n\n  const liquidityTokensWithBalances = useMemo(\n    () =>\n      tokenPairsWithLiquidityTokens\n        .filter(({ liquidityToken }) => v2PairsBalances[liquidityToken.address]?.greaterThan('0'))\n        .map(({ tokens }) => tokens),\n    [tokenPairsWithLiquidityTokens, v2PairsBalances]\n  )\n\n  const v2Pairs = usePairs(liquidityTokensWithBalances)\n\n  const farmSummaries = useUniqueBestFarms()\n\n  const warnings: WarningInfo[] = useMemo(() => {\n    const localWarnings: WarningInfo[] = []\n    v2Pairs.forEach(([, pair]) => {\n      const lpTokenAddress = pair?.liquidityToken.address\n      if (lpTokenAddress && farmSummaries[lpTokenAddress]) {\n        const farm = farmSummaries[lpTokenAddress]\n        const poolName = `${pair?.token0.symbol}-${pair?.token1.symbol}`\n        const link = `/farm/${farm?.token0Address}/${farm?.token1Address}/${farm?.stakingAddress}`\n        localWarnings.push({ poolName, link })\n      }\n    })\n    return localWarnings\n  }, [v2Pairs, farmSummaries])\n\n  return (\n    <TopSection gap=\"md\">\n      {warnings.map((warning) => (\n        <TopBorderCard key={warning.link}>\n          <CardSection>\n            <RowStart>\n              <div style={{ paddingRight: 16 }}>\n                <AlertTriangle color={theme.yellow2} size={36} />\n              </div>\n              <AutoColumn gap=\"md\">\n                <RowBetween>\n                  <TYPE.black fontWeight={600}>{'Unstaked LP Tokens for ' + warning.poolName}</TYPE.black>\n                </RowBetween>\n                <RowBetween>\n                  <TYPE.black fontSize={14}>Stake into the farming pool {warning.poolName}.</TYPE.black>\n                </RowBetween>\n                <StyledInternalLink to={warning.link}>{'Farm UBE'}</StyledInternalLink>\n              </AutoColumn>\n            </RowStart>\n          </CardSection>\n        </TopBorderCard>\n      ))}\n    </TopSection>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}