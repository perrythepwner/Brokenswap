{"ast":null,"code":"var _asyncToGenerator = require(\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nmodule.exports = getBlocksForRange;\nfunction getBlocksForRange(_x) {\n  return _getBlocksForRange.apply(this, arguments);\n}\nfunction _getBlocksForRange() {\n  _getBlocksForRange = _asyncToGenerator(function* (_ref) {\n    let {\n      provider,\n      fromBlock,\n      toBlock\n    } = _ref;\n    if (!fromBlock) fromBlock = toBlock;\n    const fromBlockNumber = hexToInt(fromBlock);\n    const toBlockNumber = hexToInt(toBlock);\n    const blockCountToQuery = toBlockNumber - fromBlockNumber + 1;\n    // load all blocks from old to new (inclusive)\n    const missingBlockNumbers = Array(blockCountToQuery).fill().map((_, index) => fromBlockNumber + index).map(intToHex);\n    const blockBodies = yield Promise.all(missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false])));\n    return blockBodies;\n  });\n  return _getBlocksForRange.apply(this, arguments);\n}\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString;\n  return Number.parseInt(hexString, 16);\n}\nfunction incrementHexInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString;\n  const value = hexToInt(hexString);\n  return intToHex(value + 1);\n}\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int;\n  const hexString = int.toString(16);\n  return '0x' + hexString;\n}\nfunction sendAsync(provider, request) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync(request, (error, response) => {\n      if (error) {\n        reject(error);\n      } else if (response.error) {\n        reject(response.error);\n      } else if (response.result) {\n        resolve(response.result);\n      } else {\n        reject(new Error(\"Result was empty\"));\n      }\n    });\n  });\n}\nfunction query(_x2, _x3, _x4) {\n  return _query.apply(this, arguments);\n}\nfunction _query() {\n  _query = _asyncToGenerator(function* (provider, method, params) {\n    for (let i = 0; i < 3; i++) {\n      try {\n        return yield sendAsync(provider, {\n          id: 1,\n          jsonrpc: \"2.0\",\n          method,\n          params\n        });\n      } catch (error) {\n        console.error(\"provider.sendAsync failed: \".concat(error.stack || error.message || error));\n      }\n    }\n    throw new Error(\"Block not found for params: \".concat(JSON.stringify(params)));\n  });\n  return _query.apply(this, arguments);\n}","map":{"version":3,"names":["module","exports","getBlocksForRange","_x","_getBlocksForRange","apply","arguments","_asyncToGenerator","_ref","provider","fromBlock","toBlock","fromBlockNumber","hexToInt","toBlockNumber","blockCountToQuery","missingBlockNumbers","Array","fill","map","_","index","intToHex","blockBodies","Promise","all","blockNum","query","hexString","undefined","Number","parseInt","incrementHexInt","value","int","toString","sendAsync","request","resolve","reject","error","response","result","Error","_x2","_x3","_x4","_query","method","params","i","id","jsonrpc","console","concat","stack","message","JSON","stringify"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/eth-json-rpc-filters/getBlocksForRange.js"],"sourcesContent":["module.exports = getBlocksForRange\n\nasync function getBlocksForRange({ provider, fromBlock, toBlock }) {\n  if (!fromBlock) fromBlock = toBlock\n\n  const fromBlockNumber = hexToInt(fromBlock)\n  const toBlockNumber = hexToInt(toBlock)\n  const blockCountToQuery = toBlockNumber - fromBlockNumber + 1\n  // load all blocks from old to new (inclusive)\n  const missingBlockNumbers = Array(blockCountToQuery).fill()\n                              .map((_,index) => fromBlockNumber + index)\n                              .map(intToHex)\n  const blockBodies = await Promise.all(\n    missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false]))\n  )\n  return blockBodies\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  const hexString = int.toString(16)\n  return '0x' + hexString\n}\n\nfunction sendAsync(provider, request) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync(request, (error, response) => {\n      if (error) {\n        reject(error);\n      } else if (response.error) {\n        reject(response.error);\n      } else if (response.result) {\n        resolve(response.result);\n      } else {\n        reject(new Error(\"Result was empty\"));\n      }\n    });\n  });\n}\n\nasync function query(provider, method, params) {\n  for (let i = 0; i < 3; i++) {\n    try {\n      return await sendAsync(provider, {\n        id: 1,\n        jsonrpc: \"2.0\",\n        method,\n        params,\n      });\n    } catch (error) {\n      console.error(\n        `provider.sendAsync failed: ${error.stack || error.message || error}`\n      );\n    }\n  }\n  throw new Error(`Block not found for params: ${JSON.stringify(params)}`);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}