{"ast":null,"code":"/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file WebsocketProvider.js\n * @authors: Samuel Furter <samuel@ethereum.org>, Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2019\n */\n'use strict';\n\nvar EventEmitter = require('eventemitter3');\nvar helpers = require('./helpers.js');\nvar errors = require('web3-core-helpers').errors;\nvar Ws = require('websocket').w3cwebsocket;\n/**\n * @param {string} url\n * @param {Object} options\n *\n * @constructor\n */\nvar WebsocketProvider = function WebsocketProvider(url, options) {\n  EventEmitter.call(this);\n  options = options || {};\n  this.url = url;\n  this._customTimeout = options.timeout || 1000 * 15;\n  this.headers = options.headers || {};\n  this.protocol = options.protocol || undefined;\n  this.reconnectOptions = Object.assign({\n    auto: false,\n    delay: 5000,\n    maxAttempts: false,\n    onTimeout: false\n  }, options.reconnect);\n  this.clientConfig = options.clientConfig || undefined; // Allow a custom client configuration\n  this.requestOptions = options.requestOptions || undefined; // Allow a custom request options (https://github.com/theturtle32/WebSocket-Node/blob/master/docs/WebSocketClient.md#connectrequesturl-requestedprotocols-origin-headers-requestoptions)\n  this.DATA = 'data';\n  this.CLOSE = 'close';\n  this.ERROR = 'error';\n  this.CONNECT = 'connect';\n  this.RECONNECT = 'reconnect';\n  this.connection = null;\n  this.requestQueue = new Map();\n  this.responseQueue = new Map();\n  this.reconnectAttempts = 0;\n  this.reconnecting = false;\n  this.connectFailedDescription = null;\n  // The w3cwebsocket implementation does not support Basic Auth\n  // username/password in the URL. So generate the basic auth header, and\n  // pass through with any additional headers supplied in constructor\n  var parsedURL = helpers.parseURL(url);\n  if (parsedURL.username && parsedURL.password) {\n    this.headers.authorization = 'Basic ' + helpers.btoa(parsedURL.username + ':' + parsedURL.password);\n  }\n  // When all node core implementations that do not have the\n  // WHATWG compatible URL parser go out of service this line can be removed.\n  if (parsedURL.auth) {\n    this.headers.authorization = 'Basic ' + helpers.btoa(parsedURL.auth);\n  }\n  // make property `connected` which will return the current connection status\n  Object.defineProperty(this, 'connected', {\n    get: function get() {\n      return this.connection && this.connection.readyState === this.connection.OPEN;\n    },\n    enumerable: true\n  });\n  this.connect();\n};\n// Inherit from EventEmitter\nWebsocketProvider.prototype = Object.create(EventEmitter.prototype);\nWebsocketProvider.prototype.constructor = WebsocketProvider;\n/**\n * Connects to the configured node\n *\n * @method connect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.connect = function () {\n  this.connection = new Ws(this.url, this.protocol, undefined, this.headers, this.requestOptions, this.clientConfig);\n  this._addSocketListeners();\n};\n/**\n * Listener for the `data` event of the underlying WebSocket object\n *\n * @method _onMessage\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onMessage = function (e) {\n  var _this = this;\n  this._parseResponse(typeof e.data === 'string' ? e.data : '').forEach(function (result) {\n    if (result.method && result.method.indexOf('_subscription') !== -1) {\n      _this.emit(_this.DATA, result);\n      return;\n    }\n    var id = result.id;\n    // get the id which matches the returned id\n    if (Array.isArray(result)) {\n      id = result[0].id;\n    }\n    if (_this.responseQueue.has(id)) {\n      if (_this.responseQueue.get(id).callback !== undefined) {\n        _this.responseQueue.get(id).callback(false, result);\n      }\n      _this.responseQueue.delete(id);\n    }\n  });\n};\n/**\n * Listener for the `open` event of the underlying WebSocket object\n *\n * @method _onConnect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onConnect = function () {\n  this.emit(this.CONNECT);\n  this.reconnectAttempts = 0;\n  this.reconnecting = false;\n  if (this.requestQueue.size > 0) {\n    var _this = this;\n    this.requestQueue.forEach(function (request, key) {\n      _this.send(request.payload, request.callback);\n      _this.requestQueue.delete(key);\n    });\n  }\n};\nWebsocketProvider.prototype._onConnectFailed = function (event) {\n  this.connectFailedDescription = event.toString().split('\\n')[0];\n  var _this = this;\n  if (this.connectFailedDescription) {\n    event.description = this.connectFailedDescription;\n    this.connectFailedDescription = null; // clean the message, so it won't be used in the next connection\n  }\n\n  event.code = 1006;\n  event.reason = 'connection failed';\n  if (this.reconnectOptions.auto && (![1000, 1001].includes(event.code) || event.wasClean === false)) {\n    this.reconnect();\n    return;\n  }\n  this.emit(this.ERROR, event);\n  if (this.requestQueue.size > 0) {\n    this.requestQueue.forEach(function (request, key) {\n      request.callback(errors.ConnectionNotOpenError(event));\n      _this.requestQueue.delete(key);\n    });\n  }\n  if (this.responseQueue.size > 0) {\n    this.responseQueue.forEach(function (request, key) {\n      request.callback(errors.InvalidConnection('on WS', event));\n      _this.responseQueue.delete(key);\n    });\n  }\n  //clean connection on our own\n  if (this.connection._connection) {\n    this.connection._connection.removeAllListeners();\n  }\n  this.connection._client.removeAllListeners();\n  this.connection._readyState = 3; // set readyState to CLOSED\n  this.emit(this.CLOSE, event);\n};\n/**\n * Listener for the `close` event of the underlying WebSocket object\n *\n * @method _onClose\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onClose = function (event) {\n  var _this = this;\n  if (this.reconnectOptions.auto && (![1000, 1001].includes(event.code) || event.wasClean === false)) {\n    this.reconnect();\n    return;\n  }\n  this.emit(this.CLOSE, event);\n  if (this.requestQueue.size > 0) {\n    this.requestQueue.forEach(function (request, key) {\n      request.callback(errors.ConnectionNotOpenError(event));\n      _this.requestQueue.delete(key);\n    });\n  }\n  if (this.responseQueue.size > 0) {\n    this.responseQueue.forEach(function (request, key) {\n      request.callback(errors.InvalidConnection('on WS', event));\n      _this.responseQueue.delete(key);\n    });\n  }\n  this._removeSocketListeners();\n  this.removeAllListeners();\n};\n/**\n * Will add the required socket listeners\n *\n * @method _addSocketListeners\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._addSocketListeners = function () {\n  this.connection.addEventListener('message', this._onMessage.bind(this));\n  this.connection.addEventListener('open', this._onConnect.bind(this));\n  this.connection.addEventListener('close', this._onClose.bind(this));\n  if (this.connection._client) {\n    this.connection._client.removeAllListeners('connectFailed'); //Override the internal listeners, so they don't trigger a `close` event. We want to trigger `_onClose` manually with a description.\n    this.connection._client.on('connectFailed', this._onConnectFailed.bind(this));\n  }\n};\n/**\n * Will remove all socket listeners\n *\n * @method _removeSocketListeners\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._removeSocketListeners = function () {\n  this.connection.removeEventListener('message', this._onMessage);\n  this.connection.removeEventListener('open', this._onConnect);\n  this.connection.removeEventListener('close', this._onClose);\n  if (this.connection._connection) this.connection._client.removeListener('connectFailed', this._onConnectFailed);\n};\n/**\n * Will parse the response and make an array out of it.\n *\n * @method _parseResponse\n *\n * @param {String} data\n *\n * @returns {Array}\n */\nWebsocketProvider.prototype._parseResponse = function (data) {\n  var _this = this,\n    returnValues = [];\n  // DE-CHUNKER\n  var dechunkedData = data.replace(/\\}[\\n\\r]?\\{/g, '}|--|{') // }{\n  .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{') // }][{\n  .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{') // }[{\n  .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{') // }]{\n  .split('|--|');\n  dechunkedData.forEach(function (data) {\n    // prepend the last chunk\n    if (_this.lastChunk) data = _this.lastChunk + data;\n    var result = null;\n    try {\n      result = JSON.parse(data);\n    } catch (e) {\n      _this.lastChunk = data;\n      // start timeout to cancel all requests\n      clearTimeout(_this.lastChunkTimeout);\n      _this.lastChunkTimeout = setTimeout(function () {\n        if (_this.reconnectOptions.auto && _this.reconnectOptions.onTimeout) {\n          _this.reconnect();\n          return;\n        }\n        _this.emit(_this.ERROR, errors.ConnectionTimeout(_this._customTimeout));\n        if (_this.requestQueue.size > 0) {\n          _this.requestQueue.forEach(function (request, key) {\n            request.callback(errors.ConnectionTimeout(_this._customTimeout));\n            _this.requestQueue.delete(key);\n          });\n        }\n      }, _this._customTimeout);\n      return;\n    }\n    // cancel timeout and set chunk to null\n    clearTimeout(_this.lastChunkTimeout);\n    _this.lastChunk = null;\n    if (result) returnValues.push(result);\n  });\n  return returnValues;\n};\n/**\n * Does check if the provider is connecting and will add it to the queue or will send it directly\n *\n * @method send\n *\n * @param {Object} payload\n * @param {Function} callback\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.send = function (payload, callback) {\n  var _this = this;\n  var id = payload.id;\n  var request = {\n    payload: payload,\n    callback: callback\n  };\n  if (Array.isArray(payload)) {\n    id = payload[0].id;\n  }\n  if (this.connection.readyState === this.connection.CONNECTING || this.reconnecting) {\n    this.requestQueue.set(id, request);\n    return;\n  }\n  if (this.connection.readyState !== this.connection.OPEN) {\n    this.requestQueue.delete(id);\n    this.emit(this.ERROR, errors.ConnectionNotOpenError());\n    request.callback(errors.ConnectionNotOpenError());\n    return;\n  }\n  this.responseQueue.set(id, request);\n  this.requestQueue.delete(id);\n  try {\n    this.connection.send(JSON.stringify(request.payload));\n  } catch (error) {\n    request.callback(error);\n    _this.responseQueue.delete(id);\n  }\n};\n/**\n * Resets the providers, clears all callbacks\n *\n * @method reset\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.reset = function () {\n  this.responseQueue.clear();\n  this.requestQueue.clear();\n  this.removeAllListeners();\n  this._removeSocketListeners();\n  this._addSocketListeners();\n};\n/**\n * Closes the current connection with the given code and reason arguments\n *\n * @method disconnect\n *\n * @param {number} code\n * @param {string} reason\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.disconnect = function (code, reason) {\n  this._removeSocketListeners();\n  this.connection.close(code || 1000, reason);\n};\n/**\n * Returns the desired boolean.\n *\n * @method supportsSubscriptions\n *\n * @returns {boolean}\n */\nWebsocketProvider.prototype.supportsSubscriptions = function () {\n  return true;\n};\n/**\n * Removes the listeners and reconnects to the socket.\n *\n * @method reconnect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.reconnect = function () {\n  var _this = this;\n  this.reconnecting = true;\n  if (this.responseQueue.size > 0) {\n    this.responseQueue.forEach(function (request, key) {\n      try {\n        _this.responseQueue.delete(key);\n        request.callback(errors.PendingRequestsOnReconnectingError());\n      } catch (e) {\n        console.error(\"Error encountered in reconnect: \", e);\n      }\n    });\n  }\n  if (!this.reconnectOptions.maxAttempts || this.reconnectAttempts < this.reconnectOptions.maxAttempts) {\n    setTimeout(function () {\n      _this.reconnectAttempts++;\n      _this._removeSocketListeners();\n      _this.emit(_this.RECONNECT, _this.reconnectAttempts);\n      _this.connect();\n    }, this.reconnectOptions.delay);\n    return;\n  }\n  this.emit(this.ERROR, errors.MaxAttemptsReachedOnReconnectingError());\n  this.reconnecting = false;\n  if (this.requestQueue.size > 0) {\n    this.requestQueue.forEach(function (request, key) {\n      request.callback(errors.MaxAttemptsReachedOnReconnectingError());\n      _this.requestQueue.delete(key);\n    });\n  }\n};\nmodule.exports = WebsocketProvider;","map":{"version":3,"names":["EventEmitter","require","helpers","errors","Ws","w3cwebsocket","WebsocketProvider","url","options","call","_customTimeout","timeout","headers","protocol","undefined","reconnectOptions","Object","assign","auto","delay","maxAttempts","onTimeout","reconnect","clientConfig","requestOptions","DATA","CLOSE","ERROR","CONNECT","RECONNECT","connection","requestQueue","Map","responseQueue","reconnectAttempts","reconnecting","connectFailedDescription","parsedURL","parseURL","username","password","authorization","btoa","auth","defineProperty","get","readyState","OPEN","enumerable","connect","prototype","create","constructor","_addSocketListeners","_onMessage","e","_this","_parseResponse","data","forEach","result","method","indexOf","emit","id","Array","isArray","has","callback","delete","_onConnect","size","request","key","send","payload","_onConnectFailed","event","toString","split","description","code","reason","includes","wasClean","ConnectionNotOpenError","InvalidConnection","_connection","removeAllListeners","_client","_readyState","_onClose","_removeSocketListeners","addEventListener","bind","on","removeEventListener","removeListener","returnValues","dechunkedData","replace","lastChunk","JSON","parse","clearTimeout","lastChunkTimeout","setTimeout","ConnectionTimeout","push","CONNECTING","set","stringify","error","reset","clear","disconnect","close","supportsSubscriptions","PendingRequestsOnReconnectingError","console","MaxAttemptsReachedOnReconnectingError","module","exports"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/web3-providers-ws/lib/index.js"],"sourcesContent":["/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file WebsocketProvider.js\n * @authors: Samuel Furter <samuel@ethereum.org>, Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2019\n */\n'use strict';\nvar EventEmitter = require('eventemitter3');\nvar helpers = require('./helpers.js');\nvar errors = require('web3-core-helpers').errors;\nvar Ws = require('websocket').w3cwebsocket;\n/**\n * @param {string} url\n * @param {Object} options\n *\n * @constructor\n */\nvar WebsocketProvider = function WebsocketProvider(url, options) {\n    EventEmitter.call(this);\n    options = options || {};\n    this.url = url;\n    this._customTimeout = options.timeout || 1000 * 15;\n    this.headers = options.headers || {};\n    this.protocol = options.protocol || undefined;\n    this.reconnectOptions = Object.assign({\n        auto: false,\n        delay: 5000,\n        maxAttempts: false,\n        onTimeout: false\n    }, options.reconnect);\n    this.clientConfig = options.clientConfig || undefined; // Allow a custom client configuration\n    this.requestOptions = options.requestOptions || undefined; // Allow a custom request options (https://github.com/theturtle32/WebSocket-Node/blob/master/docs/WebSocketClient.md#connectrequesturl-requestedprotocols-origin-headers-requestoptions)\n    this.DATA = 'data';\n    this.CLOSE = 'close';\n    this.ERROR = 'error';\n    this.CONNECT = 'connect';\n    this.RECONNECT = 'reconnect';\n    this.connection = null;\n    this.requestQueue = new Map();\n    this.responseQueue = new Map();\n    this.reconnectAttempts = 0;\n    this.reconnecting = false;\n    this.connectFailedDescription = null;\n    // The w3cwebsocket implementation does not support Basic Auth\n    // username/password in the URL. So generate the basic auth header, and\n    // pass through with any additional headers supplied in constructor\n    var parsedURL = helpers.parseURL(url);\n    if (parsedURL.username && parsedURL.password) {\n        this.headers.authorization = 'Basic ' + helpers.btoa(parsedURL.username + ':' + parsedURL.password);\n    }\n    // When all node core implementations that do not have the\n    // WHATWG compatible URL parser go out of service this line can be removed.\n    if (parsedURL.auth) {\n        this.headers.authorization = 'Basic ' + helpers.btoa(parsedURL.auth);\n    }\n    // make property `connected` which will return the current connection status\n    Object.defineProperty(this, 'connected', {\n        get: function () {\n            return this.connection && this.connection.readyState === this.connection.OPEN;\n        },\n        enumerable: true\n    });\n    this.connect();\n};\n// Inherit from EventEmitter\nWebsocketProvider.prototype = Object.create(EventEmitter.prototype);\nWebsocketProvider.prototype.constructor = WebsocketProvider;\n/**\n * Connects to the configured node\n *\n * @method connect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.connect = function () {\n    this.connection = new Ws(this.url, this.protocol, undefined, this.headers, this.requestOptions, this.clientConfig);\n    this._addSocketListeners();\n};\n/**\n * Listener for the `data` event of the underlying WebSocket object\n *\n * @method _onMessage\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onMessage = function (e) {\n    var _this = this;\n    this._parseResponse((typeof e.data === 'string') ? e.data : '').forEach(function (result) {\n        if (result.method && result.method.indexOf('_subscription') !== -1) {\n            _this.emit(_this.DATA, result);\n            return;\n        }\n        var id = result.id;\n        // get the id which matches the returned id\n        if (Array.isArray(result)) {\n            id = result[0].id;\n        }\n        if (_this.responseQueue.has(id)) {\n            if (_this.responseQueue.get(id).callback !== undefined) {\n                _this.responseQueue.get(id).callback(false, result);\n            }\n            _this.responseQueue.delete(id);\n        }\n    });\n};\n/**\n * Listener for the `open` event of the underlying WebSocket object\n *\n * @method _onConnect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onConnect = function () {\n    this.emit(this.CONNECT);\n    this.reconnectAttempts = 0;\n    this.reconnecting = false;\n    if (this.requestQueue.size > 0) {\n        var _this = this;\n        this.requestQueue.forEach(function (request, key) {\n            _this.send(request.payload, request.callback);\n            _this.requestQueue.delete(key);\n        });\n    }\n};\nWebsocketProvider.prototype._onConnectFailed = function (event) {\n    this.connectFailedDescription = event.toString().split('\\n')[0];\n    var _this = this;\n    if (this.connectFailedDescription) {\n        event.description = this.connectFailedDescription;\n        this.connectFailedDescription = null; // clean the message, so it won't be used in the next connection\n    }\n    event.code = 1006;\n    event.reason = 'connection failed';\n    if (this.reconnectOptions.auto && (![1000, 1001].includes(event.code) || event.wasClean === false)) {\n        this.reconnect();\n        return;\n    }\n    this.emit(this.ERROR, event);\n    if (this.requestQueue.size > 0) {\n        this.requestQueue.forEach(function (request, key) {\n            request.callback(errors.ConnectionNotOpenError(event));\n            _this.requestQueue.delete(key);\n        });\n    }\n    if (this.responseQueue.size > 0) {\n        this.responseQueue.forEach(function (request, key) {\n            request.callback(errors.InvalidConnection('on WS', event));\n            _this.responseQueue.delete(key);\n        });\n    }\n    //clean connection on our own\n    if (this.connection._connection) {\n        this.connection._connection.removeAllListeners();\n    }\n    this.connection._client.removeAllListeners();\n    this.connection._readyState = 3; // set readyState to CLOSED\n    this.emit(this.CLOSE, event);\n};\n/**\n * Listener for the `close` event of the underlying WebSocket object\n *\n * @method _onClose\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._onClose = function (event) {\n    var _this = this;\n    if (this.reconnectOptions.auto && (![1000, 1001].includes(event.code) || event.wasClean === false)) {\n        this.reconnect();\n        return;\n    }\n    this.emit(this.CLOSE, event);\n    if (this.requestQueue.size > 0) {\n        this.requestQueue.forEach(function (request, key) {\n            request.callback(errors.ConnectionNotOpenError(event));\n            _this.requestQueue.delete(key);\n        });\n    }\n    if (this.responseQueue.size > 0) {\n        this.responseQueue.forEach(function (request, key) {\n            request.callback(errors.InvalidConnection('on WS', event));\n            _this.responseQueue.delete(key);\n        });\n    }\n    this._removeSocketListeners();\n    this.removeAllListeners();\n};\n/**\n * Will add the required socket listeners\n *\n * @method _addSocketListeners\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._addSocketListeners = function () {\n    this.connection.addEventListener('message', this._onMessage.bind(this));\n    this.connection.addEventListener('open', this._onConnect.bind(this));\n    this.connection.addEventListener('close', this._onClose.bind(this));\n    if (this.connection._client) {\n        this.connection._client.removeAllListeners('connectFailed'); //Override the internal listeners, so they don't trigger a `close` event. We want to trigger `_onClose` manually with a description.\n        this.connection._client.on('connectFailed', this._onConnectFailed.bind(this));\n    }\n};\n/**\n * Will remove all socket listeners\n *\n * @method _removeSocketListeners\n *\n * @returns {void}\n */\nWebsocketProvider.prototype._removeSocketListeners = function () {\n    this.connection.removeEventListener('message', this._onMessage);\n    this.connection.removeEventListener('open', this._onConnect);\n    this.connection.removeEventListener('close', this._onClose);\n    if (this.connection._connection)\n        this.connection._client.removeListener('connectFailed', this._onConnectFailed);\n};\n/**\n * Will parse the response and make an array out of it.\n *\n * @method _parseResponse\n *\n * @param {String} data\n *\n * @returns {Array}\n */\nWebsocketProvider.prototype._parseResponse = function (data) {\n    var _this = this, returnValues = [];\n    // DE-CHUNKER\n    var dechunkedData = data\n        .replace(/\\}[\\n\\r]?\\{/g, '}|--|{') // }{\n        .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{') // }][{\n        .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{') // }[{\n        .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{') // }]{\n        .split('|--|');\n    dechunkedData.forEach(function (data) {\n        // prepend the last chunk\n        if (_this.lastChunk)\n            data = _this.lastChunk + data;\n        var result = null;\n        try {\n            result = JSON.parse(data);\n        }\n        catch (e) {\n            _this.lastChunk = data;\n            // start timeout to cancel all requests\n            clearTimeout(_this.lastChunkTimeout);\n            _this.lastChunkTimeout = setTimeout(function () {\n                if (_this.reconnectOptions.auto && _this.reconnectOptions.onTimeout) {\n                    _this.reconnect();\n                    return;\n                }\n                _this.emit(_this.ERROR, errors.ConnectionTimeout(_this._customTimeout));\n                if (_this.requestQueue.size > 0) {\n                    _this.requestQueue.forEach(function (request, key) {\n                        request.callback(errors.ConnectionTimeout(_this._customTimeout));\n                        _this.requestQueue.delete(key);\n                    });\n                }\n            }, _this._customTimeout);\n            return;\n        }\n        // cancel timeout and set chunk to null\n        clearTimeout(_this.lastChunkTimeout);\n        _this.lastChunk = null;\n        if (result)\n            returnValues.push(result);\n    });\n    return returnValues;\n};\n/**\n * Does check if the provider is connecting and will add it to the queue or will send it directly\n *\n * @method send\n *\n * @param {Object} payload\n * @param {Function} callback\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.send = function (payload, callback) {\n    var _this = this;\n    var id = payload.id;\n    var request = { payload: payload, callback: callback };\n    if (Array.isArray(payload)) {\n        id = payload[0].id;\n    }\n    if (this.connection.readyState === this.connection.CONNECTING || this.reconnecting) {\n        this.requestQueue.set(id, request);\n        return;\n    }\n    if (this.connection.readyState !== this.connection.OPEN) {\n        this.requestQueue.delete(id);\n        this.emit(this.ERROR, errors.ConnectionNotOpenError());\n        request.callback(errors.ConnectionNotOpenError());\n        return;\n    }\n    this.responseQueue.set(id, request);\n    this.requestQueue.delete(id);\n    try {\n        this.connection.send(JSON.stringify(request.payload));\n    }\n    catch (error) {\n        request.callback(error);\n        _this.responseQueue.delete(id);\n    }\n};\n/**\n * Resets the providers, clears all callbacks\n *\n * @method reset\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.reset = function () {\n    this.responseQueue.clear();\n    this.requestQueue.clear();\n    this.removeAllListeners();\n    this._removeSocketListeners();\n    this._addSocketListeners();\n};\n/**\n * Closes the current connection with the given code and reason arguments\n *\n * @method disconnect\n *\n * @param {number} code\n * @param {string} reason\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.disconnect = function (code, reason) {\n    this._removeSocketListeners();\n    this.connection.close(code || 1000, reason);\n};\n/**\n * Returns the desired boolean.\n *\n * @method supportsSubscriptions\n *\n * @returns {boolean}\n */\nWebsocketProvider.prototype.supportsSubscriptions = function () {\n    return true;\n};\n/**\n * Removes the listeners and reconnects to the socket.\n *\n * @method reconnect\n *\n * @returns {void}\n */\nWebsocketProvider.prototype.reconnect = function () {\n    var _this = this;\n    this.reconnecting = true;\n    if (this.responseQueue.size > 0) {\n        this.responseQueue.forEach(function (request, key) {\n            try {\n                _this.responseQueue.delete(key);\n                request.callback(errors.PendingRequestsOnReconnectingError());\n            }\n            catch (e) {\n                console.error(\"Error encountered in reconnect: \", e);\n            }\n        });\n    }\n    if (!this.reconnectOptions.maxAttempts ||\n        this.reconnectAttempts < this.reconnectOptions.maxAttempts) {\n        setTimeout(function () {\n            _this.reconnectAttempts++;\n            _this._removeSocketListeners();\n            _this.emit(_this.RECONNECT, _this.reconnectAttempts);\n            _this.connect();\n        }, this.reconnectOptions.delay);\n        return;\n    }\n    this.emit(this.ERROR, errors.MaxAttemptsReachedOnReconnectingError());\n    this.reconnecting = false;\n    if (this.requestQueue.size > 0) {\n        this.requestQueue.forEach(function (request, key) {\n            request.callback(errors.MaxAttemptsReachedOnReconnectingError());\n            _this.requestQueue.delete(key);\n        });\n    }\n};\nmodule.exports = WebsocketProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}