{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{useCelo}from'@celo/react-celo';import Card from'components/Card';import Column from'components/Column';import CurrencyLogo from'components/CurrencyLogo';import Row,{RowBetween,RowFixed}from'components/Row';import{useToken}from'hooks/Tokens';import React,{useCallback,useMemo,useRef,useState}from'react';import{useRemoveUserAddedToken,useUserAddedTokens}from'state/user/hooks';import styled from'styled-components';import{ButtonText,ExternalLink,ExternalLinkIcon,TrashIcon,TYPE}from'theme';import{isAddress}from'utils';import useTheme from'../../hooks/useTheme';import{CurrencyModalView}from'./CurrencySearchModal';import ImportRow from'./ImportRow';import{PaddedColumn,SearchInput,Separator}from'./styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: calc(100% - 60px);\\n  position: relative;\\n  padding-bottom: 60px;\\n\"])));const Footer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  border-radius: 20px;\\n  border-top-right-radius: 0;\\n  border-top-left-radius: 0;\\n  border-top: 1px solid \",\";\\n  padding: 20px;\\n  text-align: center;\\n\"])),_ref=>{let{theme}=_ref;return theme.bg3;});export default function ManageTokens(_ref2){let{setModalView,setImportToken}=_ref2;const{network}=useCelo();const chainId=network.chainId;const[searchQuery,setSearchQuery]=useState('');const theme=useTheme();// manage focus on modal show\nconst inputRef=useRef();const handleInput=useCallback(event=>{const input=event.target.value;const checksummedInput=isAddress(input);setSearchQuery(checksummedInput||input);},[]);// if they input an address, use it\nconst isAddressSearch=isAddress(searchQuery);const searchToken=useToken(searchQuery);// all tokens for local lisr\nconst userAddedTokens=useUserAddedTokens();const removeToken=useRemoveUserAddedToken();const handleRemoveAll=useCallback(()=>{if(chainId&&userAddedTokens){userAddedTokens.map(token=>{return removeToken(chainId,token.address);});}},[removeToken,userAddedTokens,chainId]);const tokenList=useMemo(()=>{return chainId&&userAddedTokens.map(token=>/*#__PURE__*/_jsxs(RowBetween,{width:\"100%\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:token,size:'20px'}),/*#__PURE__*/_jsx(ExternalLink,{href:\"\".concat(network.explorer,\"/address/\").concat(token.address),children:/*#__PURE__*/_jsx(TYPE.main,{ml:'10px',fontWeight:600,children:token.symbol})})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TrashIcon,{onClick:()=>removeToken(chainId,token.address)}),/*#__PURE__*/_jsx(ExternalLinkIcon,{href:\"\".concat(network.explorer,\"/address/\").concat(token.address)})]})]},token.address));},[userAddedTokens,removeToken,network,chainId]);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Column,{style:{width:'100%',flex:'1 1'},children:[/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"14px\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(SearchInput,{type:\"text\",id:\"token-search-input\",placeholder:'0x0000',value:searchQuery,autoComplete:\"off\",ref:inputRef,onChange:handleInput})}),searchQuery!==''&&!isAddressSearch&&/*#__PURE__*/_jsx(TYPE.error,{error:true,children:'Enter valid token address'}),searchToken&&/*#__PURE__*/_jsx(Card,{backgroundColor:theme.bg2,padding:\"10px 0\",children:/*#__PURE__*/_jsx(ImportRow,{token:searchToken,showImportView:()=>setModalView(CurrencyModalView.importToken),setImportToken:setImportToken,style:{height:'fit-content'}})})]}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"lg\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(TYPE.main,{fontWeight:600,children:[userAddedTokens===null||userAddedTokens===void 0?void 0:userAddedTokens.length,\" \",'Custom',\" \",userAddedTokens.length===1?'Token':'Tokens']}),userAddedTokens.length>0&&/*#__PURE__*/_jsx(ButtonText,{onClick:handleRemoveAll,children:/*#__PURE__*/_jsx(TYPE.blue,{children:'Clear all'})})]}),tokenList]})]}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsx(TYPE.darkGray,{children:'Tip: Custom tokens are stored locally in your browser'})})]});}","map":{"version":3,"names":["useCelo","Card","Column","CurrencyLogo","Row","RowBetween","RowFixed","useToken","React","useCallback","useMemo","useRef","useState","useRemoveUserAddedToken","useUserAddedTokens","styled","ButtonText","ExternalLink","ExternalLinkIcon","TrashIcon","TYPE","isAddress","useTheme","CurrencyModalView","ImportRow","PaddedColumn","SearchInput","Separator","jsx","_jsx","jsxs","_jsxs","Wrapper","div","_templateObject","_taggedTemplateLiteral","Footer","_templateObject2","_ref","theme","bg3","ManageTokens","_ref2","setModalView","setImportToken","network","chainId","searchQuery","setSearchQuery","inputRef","handleInput","event","input","target","value","checksummedInput","isAddressSearch","searchToken","userAddedTokens","removeToken","handleRemoveAll","map","token","address","tokenList","width","children","currency","size","href","concat","explorer","main","ml","fontWeight","symbol","onClick","style","flex","gap","type","id","placeholder","autoComplete","ref","onChange","error","backgroundColor","bg2","padding","showImportView","importToken","height","length","blue","darkGray"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/SearchModal/ManageTokens.tsx"],"sourcesContent":["import { useCelo } from '@celo/react-celo'\nimport { ChainId, Token } from '@ubeswap/sdk'\nimport Card from 'components/Card'\nimport Column from 'components/Column'\nimport CurrencyLogo from 'components/CurrencyLogo'\nimport Row, { RowBetween, RowFixed } from 'components/Row'\nimport { useToken } from 'hooks/Tokens'\nimport React, { RefObject, useCallback, useMemo, useRef, useState } from 'react'\nimport { useRemoveUserAddedToken, useUserAddedTokens } from 'state/user/hooks'\nimport styled from 'styled-components'\nimport { ButtonText, ExternalLink, ExternalLinkIcon, TrashIcon, TYPE } from 'theme'\nimport { isAddress } from 'utils'\n\nimport useTheme from '../../hooks/useTheme'\nimport { CurrencyModalView } from './CurrencySearchModal'\nimport ImportRow from './ImportRow'\nimport { PaddedColumn, SearchInput, Separator } from './styleds'\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: calc(100% - 60px);\n  position: relative;\n  padding-bottom: 60px;\n`\n\nconst Footer = styled.div`\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  border-radius: 20px;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  border-top: 1px solid ${({ theme }) => theme.bg3};\n  padding: 20px;\n  text-align: center;\n`\n\nexport default function ManageTokens({\n  setModalView,\n  setImportToken,\n}: {\n  setModalView: (view: CurrencyModalView) => void\n  setImportToken: (token: Token) => void\n}) {\n  const { network } = useCelo()\n  const chainId = network.chainId as unknown as ChainId\n\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const theme = useTheme()\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>()\n  const handleInput = useCallback((event) => {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n  }, [])\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(searchQuery)\n  const searchToken = useToken(searchQuery)\n\n  // all tokens for local lisr\n  const userAddedTokens: Token[] = useUserAddedTokens()\n  const removeToken = useRemoveUserAddedToken()\n\n  const handleRemoveAll = useCallback(() => {\n    if (chainId && userAddedTokens) {\n      userAddedTokens.map((token) => {\n        return removeToken(chainId, token.address)\n      })\n    }\n  }, [removeToken, userAddedTokens, chainId])\n\n  const tokenList = useMemo(() => {\n    return (\n      chainId &&\n      userAddedTokens.map((token) => (\n        <RowBetween key={token.address} width=\"100%\">\n          <RowFixed>\n            <CurrencyLogo currency={token} size={'20px'} />\n            <ExternalLink href={`${network.explorer}/address/${token.address}`}>\n              <TYPE.main ml={'10px'} fontWeight={600}>\n                {token.symbol}\n              </TYPE.main>\n            </ExternalLink>\n          </RowFixed>\n          <RowFixed>\n            <TrashIcon onClick={() => removeToken(chainId, token.address)} />\n            <ExternalLinkIcon href={`${network.explorer}/address/${token.address}`} />\n          </RowFixed>\n        </RowBetween>\n      ))\n    )\n  }, [userAddedTokens, removeToken, network, chainId])\n\n  return (\n    <Wrapper>\n      <Column style={{ width: '100%', flex: '1 1' }}>\n        <PaddedColumn gap=\"14px\">\n          <Row>\n            <SearchInput\n              type=\"text\"\n              id=\"token-search-input\"\n              placeholder={'0x0000'}\n              value={searchQuery}\n              autoComplete=\"off\"\n              ref={inputRef as RefObject<HTMLInputElement>}\n              onChange={handleInput}\n            />\n          </Row>\n          {searchQuery !== '' && !isAddressSearch && (\n            <TYPE.error error={true}>{'Enter valid token address'}</TYPE.error>\n          )}\n          {searchToken && (\n            <Card backgroundColor={theme.bg2} padding=\"10px 0\">\n              <ImportRow\n                token={searchToken}\n                showImportView={() => setModalView(CurrencyModalView.importToken)}\n                setImportToken={setImportToken}\n                style={{ height: 'fit-content' }}\n              />\n            </Card>\n          )}\n        </PaddedColumn>\n        <Separator />\n        <PaddedColumn gap=\"lg\">\n          <RowBetween>\n            <TYPE.main fontWeight={600}>\n              {userAddedTokens?.length} {'Custom'} {userAddedTokens.length === 1 ? 'Token' : 'Tokens'}\n            </TYPE.main>\n            {userAddedTokens.length > 0 && (\n              <ButtonText onClick={handleRemoveAll}>\n                <TYPE.blue>{'Clear all'}</TYPE.blue>\n              </ButtonText>\n            )}\n          </RowBetween>\n          {tokenList}\n        </PaddedColumn>\n      </Column>\n      <Footer>\n        <TYPE.darkGray>{'Tip: Custom tokens are stored locally in your browser'}</TYPE.darkGray>\n      </Footer>\n    </Wrapper>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}