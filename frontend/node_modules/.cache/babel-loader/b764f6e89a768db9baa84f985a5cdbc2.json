{"ast":null,"code":"import _asyncToGenerator from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useCelo}from'@celo/react-celo';import{CELO,cUSD,Fraction,TokenAmount,TradeType}from'@ubeswap/sdk';import{ErrorText}from'components/swap/styleds';import{usePair}from'data/Reserves';import{BigNumber}from'ethers';import React,{useContext,useEffect,useState}from'react';import{ThemeContext}from'styled-components';import{TYPE}from'../../../../theme';import QuestionHelper from'../../../QuestionHelper';import{RowBetween,RowFixed}from'../../../Row';import{useLendingPool}from'../moola/useMoola';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const MoolaDirectTradeDetails=_ref=>{let{trade}=_ref;const{address:account,network}=useCelo();const chainId=network.chainId;const lendingPool=useLendingPool();const theme=useContext(ThemeContext);const celo=CELO[chainId];const[,pair]=usePair(celo,cUSD[chainId]);const cusdPrice=pair===null||pair===void 0?void 0:pair.priceOf(cUSD[chainId]);const[userData,setUserData]=useState(null);useEffect(()=>{if(account){;_asyncToGenerator(function*(){const data=yield lendingPool.getUserAccountData(account);setUserData(data);})();}},[account,lendingPool]);let userDataArea=null;if(userData){const healthFactor=userData.healthFactor.div(BigNumber.from(10).pow(27));const collateral=cusdPrice?new TokenAmount(celo,userData.totalCollateralETH.toString()).multiply(cusdPrice):null;const borrows=cusdPrice?new TokenAmount(celo,userData.totalDebtETH.toString()).multiply(cusdPrice):null;userDataArea=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{color:theme.text2,fontSize:14,fontWeight:400,children:\"Collateral Balance\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"The amount of collateral you have in Moola.\"})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(TYPE.black,{fontSize:14,marginLeft:'4px',children:collateral?collateral.lessThan(new Fraction('1'))?'<$1':\"$\".concat(collateral.toFixed(2)):'--'})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{color:theme.text2,fontSize:14,fontWeight:400,children:\"Borrow Balance\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"The amount you owe to Moola.\"})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(TYPE.black,{fontSize:14,marginLeft:'4px',children:borrows?borrows.lessThan(new Fraction('1'))?'<$1':\"$\".concat(borrows.toFixed(2)):'--'})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{color:theme.text2,fontSize:14,fontWeight:400,children:\"Health Factor\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"How risky your position is. If this is below 1, you can be liquidated.\"})]}),/*#__PURE__*/_jsx(ErrorText,{fontWeight:500,fontSize:14,severity:0,children:healthFactor.gt(100)?'Excellent':healthFactor.toString()})]})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsxs(TYPE.black,{fontSize:14,fontWeight:400,color:theme.text2,children:[trade.outputAmount.currency.symbol,\" received\"]}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Since this trade is routed through Moola, you are guaranteed to receive 1 \".concat(trade.outputAmount.currency.symbol,\" per \").concat(trade.inputAmount.currency.symbol,\".\")})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontSize:14,children:trade.outputAmount.lessThan('10000')?trade.outputAmount.toSignificant(4):trade.outputAmount.toFixed(0)}),/*#__PURE__*/_jsx(TYPE.black,{fontSize:14,marginLeft:'4px',children:trade.tradeType===TradeType.EXACT_INPUT?trade.outputAmount.currency.symbol:trade.inputAmount.currency.symbol})]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{color:theme.text2,fontSize:14,fontWeight:400,children:\"Price Impact\"}),/*#__PURE__*/_jsx(QuestionHelper,{text:\"Since this trade is routed through Moola, there is zero price slippage.\"})]}),/*#__PURE__*/_jsx(ErrorText,{fontWeight:500,fontSize:14,severity:0,children:\"0.00%\"})]}),userDataArea]});};","map":null,"metadata":{},"sourceType":"module"}