{"ast":null,"code":"import{useCelo}from'@celo/react-celo';import{cUSD,JSBI}from'@ubeswap/sdk';import React,{useCallback,useEffect,useState}from'react';import{Plus}from'react-feather';import{Text}from'rebass';import{ButtonDropdownLight}from'../../components/Button';import{BlueCard,LightCard}from'../../components/Card';import{AutoColumn,ColumnCenter}from'../../components/Column';import CurrencyLogo from'../../components/CurrencyLogo';import{FindPoolTabs}from'../../components/NavigationTabs';import{MinimalPositionCard}from'../../components/PositionCard';import Row from'../../components/Row';import CurrencySearchModal from'../../components/SearchModal/CurrencySearchModal';import{PairState,usePair}from'../../data/Reserves';import{usePairAdder}from'../../state/user/hooks';import{useTokenBalance}from'../../state/wallet/hooks';import{StyledInternalLink,TYPE}from'../../theme';import{currencyId}from'../../utils/currencyId';import AppBody from'../AppBody';import{Dots}from'../Pool/styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Fields=/*#__PURE__*/function(Fields){Fields[Fields[\"TOKEN0\"]=0]=\"TOKEN0\";Fields[Fields[\"TOKEN1\"]=1]=\"TOKEN1\";return Fields;}(Fields||{});export default function PoolFinder(){var _ref;const{address:account,network}=useCelo();const chainId=network.chainId;const[showSearch,setShowSearch]=useState(false);const[activeField,setActiveField]=useState(Fields.TOKEN1);const[currency0,setCurrency0]=useState(cUSD[chainId]);const[currency1,setCurrency1]=useState(null);const[pairState,pair]=usePair(currency0!==null&&currency0!==void 0?currency0:undefined,currency1!==null&&currency1!==void 0?currency1:undefined);const addPair=usePairAdder();useEffect(()=>{if(pair){addPair(pair);}},[pair,addPair]);const validPairNoLiquidity=pairState===PairState.NOT_EXISTS||Boolean(pairState===PairState.EXISTS&&pair&&JSBI.equal(pair.reserve0.raw,JSBI.BigInt(0))&&JSBI.equal(pair.reserve1.raw,JSBI.BigInt(0)));const position=useTokenBalance(account!==null&&account!==void 0?account:undefined,pair===null||pair===void 0?void 0:pair.liquidityToken);const hasPosition=Boolean(position&&JSBI.greaterThan(position.raw,JSBI.BigInt(0)));const handleCurrencySelect=useCallback(currency=>{if(activeField===Fields.TOKEN0){setCurrency0(currency);}else{setCurrency1(currency);}},[activeField]);const handleSearchDismiss=useCallback(()=>{setShowSearch(false);},[setShowSearch]);const prerequisiteMessage=/*#__PURE__*/_jsx(LightCard,{padding:\"45px 10px\",children:/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:!account?'Connect to a wallet to find pools':'Select a token to find your liquidity.'})});return/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(FindPoolTabs,{}),/*#__PURE__*/_jsxs(AutoColumn,{style:{padding:'1rem'},gap:\"md\",children:[/*#__PURE__*/_jsx(BlueCard,{children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"10px\",children:/*#__PURE__*/_jsxs(TYPE.link,{fontWeight:400,color:'primaryText1',children:[/*#__PURE__*/_jsx(\"b\",{children:\"Tip:\"}),\" Use this tool to find pairs that don't automatically appear in the interface.\"]})})}),/*#__PURE__*/_jsx(ButtonDropdownLight,{onClick:()=>{setShowSearch(true);setActiveField(Fields.TOKEN0);},children:currency0?/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currency0}),/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,marginLeft:'12px',children:currency0.symbol})]}):/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,marginLeft:'12px',children:\"Select a Token\"})}),/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(Plus,{size:\"16\",color:\"#888D9B\"})}),/*#__PURE__*/_jsx(ButtonDropdownLight,{onClick:()=>{setShowSearch(true);setActiveField(Fields.TOKEN1);},children:currency1?/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currency1}),/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,marginLeft:'12px',children:currency1.symbol})]}):/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,marginLeft:'12px',children:\"Select a Token\"})}),hasPosition&&/*#__PURE__*/_jsxs(ColumnCenter,{style:{justifyItems:'center',backgroundColor:'',padding:'12px 0px',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(Text,{textAlign:\"center\",fontWeight:500,children:\"Pool Found!\"}),/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/pool\",children:/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:\"Manage this pool.\"})})]}),currency0&&currency1?pairState===PairState.EXISTS?hasPosition&&pair?/*#__PURE__*/_jsx(MinimalPositionCard,{pair:pair,border:\"1px solid #CED0D9\"}):/*#__PURE__*/_jsx(LightCard,{padding:\"45px 10px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",justify:\"center\",children:[/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:\"You don\\u2019t have liquidity in this pool yet.\"}),/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/add/\".concat(currencyId(currency0),\"/\").concat(currencyId(currency1)),children:/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:\"Add liquidity.\"})})]})}):validPairNoLiquidity?/*#__PURE__*/_jsx(LightCard,{padding:\"45px 10px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",justify:\"center\",children:[/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:\"No pool found.\"}),/*#__PURE__*/_jsx(StyledInternalLink,{to:\"/add/\".concat(currencyId(currency0),\"/\").concat(currencyId(currency1)),children:\"Create pool.\"})]})}):pairState===PairState.INVALID?/*#__PURE__*/_jsx(LightCard,{padding:\"45px 10px\",children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"sm\",justify:\"center\",children:/*#__PURE__*/_jsx(Text,{textAlign:\"center\",fontWeight:500,children:\"Invalid pair.\"})})}):pairState===PairState.LOADING?/*#__PURE__*/_jsx(LightCard,{padding:\"45px 10px\",children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"sm\",justify:\"center\",children:/*#__PURE__*/_jsxs(Text,{textAlign:\"center\",children:[\"Loading\",/*#__PURE__*/_jsx(Dots,{})]})})}):null:prerequisiteMessage]}),/*#__PURE__*/_jsx(CurrencySearchModal,{isOpen:showSearch,onCurrencySelect:handleCurrencySelect,onDismiss:handleSearchDismiss,showCommonBases:true,selectedCurrency:(_ref=activeField===Fields.TOKEN0?currency1:currency0)!==null&&_ref!==void 0?_ref:undefined})]});}","map":null,"metadata":{},"sourceType":"module"}