{"ast":null,"code":"import _asyncToGenerator from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useCelo,useProvider}from'@celo/react-celo';import{Percent}from'@ubeswap/sdk';import{useDoTransaction}from'components/swap/routing';import React,{useCallback,useContext,useState}from'react';import{ArrowDown,Plus}from'react-feather';import ReactGA from'react-ga';import{Text}from'rebass';import{ThemeContext}from'styled-components';import{ButtonConfirmed,ButtonError,ButtonLight,ButtonPrimary}from'../../components/Button';import{BlueCard,LightCard}from'../../components/Card';import{AutoColumn,ColumnCenter}from'../../components/Column';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import CurrencyLogo from'../../components/CurrencyLogo';import DoubleCurrencyLogo from'../../components/DoubleLogo';import{AddRemoveTabs}from'../../components/NavigationTabs';import{MinimalPositionCard}from'../../components/PositionCard';import Row,{RowBetween,RowFixed}from'../../components/Row';import Slider from'../../components/Slider';import{Dots}from'../../components/swap/styleds';import TransactionConfirmationModal,{ConfirmationModalContent}from'../../components/TransactionConfirmationModal';import{ROUTER_ADDRESS}from'../../constants';import{useCurrency}from'../../hooks/Tokens';import{ApprovalState,useApproveCallback}from'../../hooks/useApproveCallback';import{usePairContract}from'../../hooks/useContract';import useTransactionDeadline from'../../hooks/useTransactionDeadline';import{Field}from'../../state/burn/actions';import{useBurnActionHandlers,useBurnState,useDerivedBurnInfo}from'../../state/burn/hooks';import{useUserSlippageTolerance}from'../../state/user/hooks';import{TYPE}from'../../theme';import{calculateSlippageAmount,getRouterContract}from'../../utils';import{currencyId}from'../../utils/currencyId';import useDebouncedChangeHandler from'../../utils/useDebouncedChangeHandler';import AppBody from'../AppBody';import{ClickableText,MaxButton,Wrapper}from'../Pool/styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function RemoveLiquidity(_ref){var _useCurrency,_useCurrency2,_parsedAmounts$Field$,_parsedAmounts$Field$2,_parsedAmounts$Field$3,_parsedAmounts$Field$4,_parsedAmounts$Field$5,_parsedAmounts$Field$6,_parsedAmounts$Field$7,_pair$liquidityToken,_parsedAmounts$Field$11,_parsedAmounts$Field$12;let{history,match:{params:{currencyIdA,currencyIdB}}}=_ref;const[currencyA,currencyB]=[(_useCurrency=useCurrency(currencyIdA))!==null&&_useCurrency!==void 0?_useCurrency:undefined,(_useCurrency2=useCurrency(currencyIdB))!==null&&_useCurrency2!==void 0?_useCurrency2:undefined];const{address:account,network,connect}=useCelo();const library=useProvider();const chainId=network.chainId;const[tokenA,tokenB]=[currencyA,currencyB];const theme=useContext(ThemeContext);// toggle wallet when disconnected\n// burn state\nconst{independentField,typedValue}=useBurnState();const{pair,parsedAmounts,error}=useDerivedBurnInfo(currencyA!==null&&currencyA!==void 0?currencyA:undefined,currencyB!==null&&currencyB!==void 0?currencyB:undefined);const{onUserInput:_onUserInput}=useBurnActionHandlers();const isValid=!error;// modal and loading\nconst[showConfirm,setShowConfirm]=useState(false);const[showDetailed,setShowDetailed]=useState(false);const[attemptingTxn,setAttemptingTxn]=useState(false);// clicked confirm\n// txn values\nconst[txHash,setTxHash]=useState('');const deadline=useTransactionDeadline();const[allowedSlippage]=useUserSlippageTolerance();const formattedAmounts={[Field.LIQUIDITY_PERCENT]:parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')?'0':parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1','100'))?'<1':parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0),[Field.LIQUIDITY]:independentField===Field.LIQUIDITY?typedValue:(_parsedAmounts$Field$=(_parsedAmounts$Field$2=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$2===void 0?void 0:_parsedAmounts$Field$2.toSignificant(6))!==null&&_parsedAmounts$Field$!==void 0?_parsedAmounts$Field$:'',[Field.CURRENCY_A]:independentField===Field.CURRENCY_A?typedValue:(_parsedAmounts$Field$3=(_parsedAmounts$Field$4=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$4===void 0?void 0:_parsedAmounts$Field$4.toSignificant(6))!==null&&_parsedAmounts$Field$3!==void 0?_parsedAmounts$Field$3:'',[Field.CURRENCY_B]:independentField===Field.CURRENCY_B?typedValue:(_parsedAmounts$Field$5=(_parsedAmounts$Field$6=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$6===void 0?void 0:_parsedAmounts$Field$6.toSignificant(6))!==null&&_parsedAmounts$Field$5!==void 0?_parsedAmounts$Field$5:''};const atMaxAmount=(_parsedAmounts$Field$7=parsedAmounts[Field.LIQUIDITY_PERCENT])===null||_parsedAmounts$Field$7===void 0?void 0:_parsedAmounts$Field$7.equalTo(new Percent('1'));// pair contract\nconst pairContract=usePairContract(pair===null||pair===void 0?void 0:(_pair$liquidityToken=pair.liquidityToken)===null||_pair$liquidityToken===void 0?void 0:_pair$liquidityToken.address);// allowance handling\nconst[signatureData,setSignatureData]=useState(null);const[approval,approveCallback]=useApproveCallback(parsedAmounts[Field.LIQUIDITY],ROUTER_ADDRESS);function onAttemptToApprove(){return _onAttemptToApprove.apply(this,arguments);}// wrapped onUserInput to clear signatures\nfunction _onAttemptToApprove(){_onAttemptToApprove=_asyncToGenerator(function*(){if(!pairContract||!pair||!library||!deadline)throw new Error('missing dependencies');const liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(!liquidityAmount)throw new Error('missing liquidity amount');approveCallback();});return _onAttemptToApprove.apply(this,arguments);}const onUserInput=useCallback((field,typedValue)=>{setSignatureData(null);return _onUserInput(field,typedValue);},[_onUserInput]);const onLiquidityInput=useCallback(typedValue=>onUserInput(Field.LIQUIDITY,typedValue),[onUserInput]);const onCurrencyAInput=useCallback(typedValue=>onUserInput(Field.CURRENCY_A,typedValue),[onUserInput]);const onCurrencyBInput=useCallback(typedValue=>onUserInput(Field.CURRENCY_B,typedValue),[onUserInput]);// tx sending\nconst doTransaction=useDoTransaction();function onRemove(){return _onRemove.apply(this,arguments);}function _onRemove(){_onRemove=_asyncToGenerator(function*(){if(!chainId||!library||!account||!deadline)throw new Error('missing dependencies');const{[Field.CURRENCY_A]:currencyAmountA,[Field.CURRENCY_B]:currencyAmountB}=parsedAmounts;if(!currencyAmountA||!currencyAmountB){throw new Error('missing currency amounts');}const router=getRouterContract(chainId,library,account);const amountsMin={[Field.CURRENCY_A]:calculateSlippageAmount(currencyAmountA,allowedSlippage)[0],[Field.CURRENCY_B]:calculateSlippageAmount(currencyAmountB,allowedSlippage)[0]};if(!currencyA||!currencyB)throw new Error('missing tokens');const liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(!liquidityAmount)throw new Error('missing liquidity amount');if(!tokenA||!tokenB)throw new Error('could not wrap');// we have approval, use normal remove liquidity\nif(approval!==ApprovalState.APPROVED){throw new Error('Attempting to confirm without approval or a signature. Please contact support.');}// removeLiquidity\nsetAttemptingTxn(true);try{var _parsedAmounts$Field$13,_parsedAmounts$Field$14;const response=yield doTransaction(router,'removeLiquidity',{args:[tokenA.address,tokenB.address,liquidityAmount.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,deadline.toHexString()],summary:'Remove '+((_parsedAmounts$Field$13=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$13===void 0?void 0:_parsedAmounts$Field$13.toSignificant(3))+' '+(currencyA===null||currencyA===void 0?void 0:currencyA.symbol)+' and '+((_parsedAmounts$Field$14=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$14===void 0?void 0:_parsedAmounts$Field$14.toSignificant(3))+' '+(currencyB===null||currencyB===void 0?void 0:currencyB.symbol)});setAttemptingTxn(false);setTxHash(response.hash);ReactGA.event({category:'Liquidity',action:'Remove',label:[currencyA===null||currencyA===void 0?void 0:currencyA.symbol,currencyB===null||currencyB===void 0?void 0:currencyB.symbol].join('/')});}catch(error){setAttemptingTxn(false);// we only care if the error is something _other_ than the user rejected the tx\nconsole.error(error);}});return _onRemove.apply(this,arguments);}function modalHeader(){var _parsedAmounts$Field$8,_parsedAmounts$Field$9;return/*#__PURE__*/_jsxs(AutoColumn,{gap:'md',style:{marginTop:'20px'},children:[/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,children:(_parsedAmounts$Field$8=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$8===void 0?void 0:_parsedAmounts$Field$8.toSignificant(6)}),/*#__PURE__*/_jsxs(RowFixed,{gap:\"4px\",children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyA,size:'24px'}),/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'},children:currencyA===null||currencyA===void 0?void 0:currencyA.symbol})]})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(Plus,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,children:(_parsedAmounts$Field$9=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$9===void 0?void 0:_parsedAmounts$Field$9.toSignificant(6)}),/*#__PURE__*/_jsxs(RowFixed,{gap:\"4px\",children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyB,size:'24px'}),/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'},children:currencyB===null||currencyB===void 0?void 0:currencyB.symbol})]})]}),/*#__PURE__*/_jsx(TYPE.italic,{fontSize:12,color:theme.text2,textAlign:\"left\",padding:'12px 0 0 0',children:\"Output is estimated. If the price changes by more than \".concat(allowedSlippage/100,\"% your transaction will revert.\")})]});}function modalBottom(){var _parsedAmounts$Field$10;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(Text,{color:theme.text2,fontWeight:500,fontSize:16,children:['UBE '+(currencyA===null||currencyA===void 0?void 0:currencyA.symbol)+'/'+(currencyB===null||currencyB===void 0?void 0:currencyB.symbol),\" Burned\"]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{currency0:currencyA,currency1:currencyB,margin:true}),/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:16,children:(_parsedAmounts$Field$10=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$10===void 0?void 0:_parsedAmounts$Field$10.toSignificant(6)})]})]}),pair&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{color:theme.text2,fontWeight:500,fontSize:16,children:\"Price\"}),/*#__PURE__*/_jsxs(Text,{fontWeight:500,fontSize:16,color:theme.text1,children:[\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(Text,{fontWeight:500,fontSize:16,color:theme.text1,children:[\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol]})]})]}),/*#__PURE__*/_jsx(ButtonPrimary,{disabled:!(approval===ApprovalState.APPROVED||signatureData!==null),onClick:onRemove,children:/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:20,children:\"Confirm\"})})]});}const pendingText=\"Removing \".concat((_parsedAmounts$Field$11=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$11===void 0?void 0:_parsedAmounts$Field$11.toSignificant(6),\" \").concat(currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" and \").concat((_parsedAmounts$Field$12=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$12===void 0?void 0:_parsedAmounts$Field$12.toSignificant(6),\" \").concat(currencyB===null||currencyB===void 0?void 0:currencyB.symbol);const liquidityPercentChangeCallback=useCallback(value=>{onUserInput(Field.LIQUIDITY_PERCENT,value.toString());},[onUserInput]);const handleSelectCurrencyA=useCallback(currency=>{if(currencyIdB&&currencyId(currency)===currencyIdB){history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdA));}else{history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdB));}},[currencyIdA,currencyIdB,history]);const handleSelectCurrencyB=useCallback(currency=>{if(currencyIdA&&currencyId(currency)===currencyIdA){history.push(\"/remove/\".concat(currencyIdB,\"/\").concat(currencyId(currency)));}else{history.push(\"/remove/\".concat(currencyIdA,\"/\").concat(currencyId(currency)));}},[currencyIdA,currencyIdB,history]);const handleDismissConfirmation=useCallback(()=>{setShowConfirm(false);setSignatureData(null);// important that we clear signature data to avoid bad sigs\n// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.LIQUIDITY_PERCENT,'0');}setTxHash('');},[onUserInput,txHash]);const[innerLiquidityPercentage,setInnerLiquidityPercentage]=useDebouncedChangeHandler(Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),liquidityPercentChangeCallback);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(AddRemoveTabs,{creating:false,adding:false}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(TransactionConfirmationModal,{isOpen:showConfirm,onDismiss:handleDismissConfirmation,attemptingTxn:attemptingTxn,hash:txHash?txHash:'',content:()=>/*#__PURE__*/_jsx(ConfirmationModalContent,{title:'You will receive',onDismiss:handleDismissConfirmation,topContent:modalHeader,bottomContent:modalBottom}),pendingText:pendingText}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(BlueCard,{children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"10px\",children:/*#__PURE__*/_jsxs(TYPE.link,{fontWeight:400,color:'primaryText1',children:[/*#__PURE__*/_jsx(\"b\",{children:\"Tip:\"}),\" Removing pool tokens converts your position back into underlying tokens at the current rate, proportional to your share of the pool. Accrued fees are included in the amounts you receive.\"]})})}),/*#__PURE__*/_jsx(LightCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"20px\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{fontWeight:500,children:\"Amount\"}),/*#__PURE__*/_jsx(ClickableText,{fontWeight:500,onClick:()=>{setShowDetailed(!showDetailed);},children:showDetailed?'Simple':'Detailed'})]}),/*#__PURE__*/_jsx(Row,{style:{alignItems:'flex-end'},children:/*#__PURE__*/_jsxs(Text,{fontSize:72,fontWeight:500,children:[formattedAmounts[Field.LIQUIDITY_PERCENT],\"%\"]})}),!showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Slider,{value:innerLiquidityPercentage,onChange:setInnerLiquidityPercentage}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(MaxButton,{onClick:()=>onUserInput(Field.LIQUIDITY_PERCENT,'25'),width:\"20%\",children:\"25%\"}),/*#__PURE__*/_jsx(MaxButton,{onClick:()=>onUserInput(Field.LIQUIDITY_PERCENT,'50'),width:\"20%\",children:\"50%\"}),/*#__PURE__*/_jsx(MaxButton,{onClick:()=>onUserInput(Field.LIQUIDITY_PERCENT,'75'),width:\"20%\",children:\"75%\"}),/*#__PURE__*/_jsx(MaxButton,{onClick:()=>onUserInput(Field.LIQUIDITY_PERCENT,'100'),width:\"20%\",children:\"Max\"})]})]})]})}),!showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsx(LightCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"10px\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,children:formattedAmounts[Field.CURRENCY_A]||'-'}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyA,style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,id:\"remove-liquidity-tokena-symbol\",children:currencyA===null||currencyA===void 0?void 0:currencyA.symbol})]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,children:formattedAmounts[Field.CURRENCY_B]||'-'}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencyB,style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,id:\"remove-liquidity-tokenb-symbol\",children:currencyB===null||currencyB===void 0?void 0:currencyB.symbol})]})]})]})})]}),showDetailed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.LIQUIDITY],onUserInput:onLiquidityInput,onMax:()=>{onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,disableCurrencySelect:true,currency:pair===null||pair===void 0?void 0:pair.liquidityToken,pair:pair,id:\"liquidity-amount\"}),/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_A],onUserInput:onCurrencyAInput,onMax:()=>onUserInput(Field.LIQUIDITY_PERCENT,'100'),showMaxButton:!atMaxAmount,currency:currencyA,label:'Output',onCurrencySelect:handleSelectCurrencyA,id:\"remove-liquidity-tokena\"}),/*#__PURE__*/_jsx(ColumnCenter,{children:/*#__PURE__*/_jsx(Plus,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_B],onUserInput:onCurrencyBInput,onMax:()=>onUserInput(Field.LIQUIDITY_PERCENT,'100'),showMaxButton:!atMaxAmount,currency:currencyB,label:'Output',onCurrencySelect:handleSelectCurrencyB,id:\"remove-liquidity-tokenb\"})]}),pair&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px 20px'},children:[/*#__PURE__*/_jsxs(RowBetween,{children:[\"Price:\",/*#__PURE__*/_jsxs(\"div\",{children:[\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:'relative'},children:!account?/*#__PURE__*/_jsx(ButtonLight,{onClick:()=>connect().catch(console.warn),children:\"Connect Wallet\"}):/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ButtonConfirmed,{onClick:onAttemptToApprove,confirmed:approval===ApprovalState.APPROVED||signatureData!==null,disabled:approval!==ApprovalState.NOT_APPROVED||signatureData!==null,mr:\"0.5rem\",fontWeight:500,fontSize:16,children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsx(Dots,{children:\"Approving\"}):approval===ApprovalState.APPROVED||signatureData!==null?'Approved':'Approve'}),/*#__PURE__*/_jsx(ButtonError,{onClick:()=>{setShowConfirm(true);},disabled:!isValid||signatureData===null&&approval!==ApprovalState.APPROVED,error:!isValid&&!!parsedAmounts[Field.CURRENCY_A]&&!!parsedAmounts[Field.CURRENCY_B],children:/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:error||'Remove'})})]})})]})]})]}),pair?/*#__PURE__*/_jsx(AutoColumn,{style:{minWidth:'20rem',width:'100%',maxWidth:'400px',marginTop:'1rem'},children:/*#__PURE__*/_jsx(MinimalPositionCard,{pair:pair})}):null]});}","map":{"version":3,"names":["useCelo","useProvider","Percent","useDoTransaction","React","useCallback","useContext","useState","ArrowDown","Plus","ReactGA","Text","ThemeContext","ButtonConfirmed","ButtonError","ButtonLight","ButtonPrimary","BlueCard","LightCard","AutoColumn","ColumnCenter","CurrencyInputPanel","CurrencyLogo","DoubleCurrencyLogo","AddRemoveTabs","MinimalPositionCard","Row","RowBetween","RowFixed","Slider","Dots","TransactionConfirmationModal","ConfirmationModalContent","ROUTER_ADDRESS","useCurrency","ApprovalState","useApproveCallback","usePairContract","useTransactionDeadline","Field","useBurnActionHandlers","useBurnState","useDerivedBurnInfo","useUserSlippageTolerance","TYPE","calculateSlippageAmount","getRouterContract","currencyId","useDebouncedChangeHandler","AppBody","ClickableText","MaxButton","Wrapper","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RemoveLiquidity","_ref","_useCurrency","_useCurrency2","_parsedAmounts$Field$","_parsedAmounts$Field$2","_parsedAmounts$Field$3","_parsedAmounts$Field$4","_parsedAmounts$Field$5","_parsedAmounts$Field$6","_parsedAmounts$Field$7","_pair$liquidityToken","_parsedAmounts$Field$11","_parsedAmounts$Field$12","history","match","params","currencyIdA","currencyIdB","currencyA","currencyB","undefined","address","account","network","connect","library","chainId","tokenA","tokenB","theme","independentField","typedValue","pair","parsedAmounts","error","onUserInput","_onUserInput","isValid","showConfirm","setShowConfirm","showDetailed","setShowDetailed","attemptingTxn","setAttemptingTxn","txHash","setTxHash","deadline","allowedSlippage","formattedAmounts","LIQUIDITY_PERCENT","equalTo","lessThan","toFixed","LIQUIDITY","toSignificant","CURRENCY_A","CURRENCY_B","atMaxAmount","pairContract","liquidityToken","signatureData","setSignatureData","approval","approveCallback","onAttemptToApprove","_onAttemptToApprove","apply","arguments","_asyncToGenerator","Error","liquidityAmount","field","onLiquidityInput","onCurrencyAInput","onCurrencyBInput","doTransaction","onRemove","_onRemove","currencyAmountA","currencyAmountB","router","amountsMin","APPROVED","_parsedAmounts$Field$13","_parsedAmounts$Field$14","response","args","raw","toString","toHexString","summary","symbol","hash","event","category","action","label","join","console","modalHeader","_parsedAmounts$Field$8","_parsedAmounts$Field$9","gap","style","marginTop","children","align","fontSize","fontWeight","currency","size","marginLeft","color","text2","italic","textAlign","padding","concat","modalBottom","_parsedAmounts$Field$10","currency0","currency1","margin","text1","priceOf","disabled","onClick","pendingText","liquidityPercentChangeCallback","value","handleSelectCurrencyA","push","handleSelectCurrencyB","handleDismissConfirmation","innerLiquidityPercentage","setInnerLiquidityPercentage","Number","parseInt","creating","adding","isOpen","onDismiss","content","title","topContent","bottomContent","link","alignItems","onChange","width","marginRight","id","onMax","showMaxButton","disableCurrencySelect","hideBalance","onCurrencySelect","position","catch","warn","confirmed","NOT_APPROVED","mr","PENDING","minWidth","maxWidth"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/pages/RemoveLiquidity/index.tsx"],"sourcesContent":["import { useCelo, useProvider } from '@celo/react-celo'\nimport { Contract } from '@ethersproject/contracts'\nimport { Percent, Token } from '@ubeswap/sdk'\nimport { useDoTransaction } from 'components/swap/routing'\nimport React, { useCallback, useContext, useState } from 'react'\nimport { ArrowDown, Plus } from 'react-feather'\nimport ReactGA from 'react-ga'\nimport { RouteComponentProps } from 'react-router'\nimport { Text } from 'rebass'\nimport { ThemeContext } from 'styled-components'\n\nimport { ButtonConfirmed, ButtonError, ButtonLight, ButtonPrimary } from '../../components/Button'\nimport { BlueCard, LightCard } from '../../components/Card'\nimport { AutoColumn, ColumnCenter } from '../../components/Column'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport CurrencyLogo from '../../components/CurrencyLogo'\nimport DoubleCurrencyLogo from '../../components/DoubleLogo'\nimport { AddRemoveTabs } from '../../components/NavigationTabs'\nimport { MinimalPositionCard } from '../../components/PositionCard'\nimport Row, { RowBetween, RowFixed } from '../../components/Row'\nimport Slider from '../../components/Slider'\nimport { Dots } from '../../components/swap/styleds'\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal'\nimport { ROUTER_ADDRESS } from '../../constants'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback'\nimport { usePairContract } from '../../hooks/useContract'\nimport useTransactionDeadline from '../../hooks/useTransactionDeadline'\nimport { Field } from '../../state/burn/actions'\nimport { useBurnActionHandlers, useBurnState, useDerivedBurnInfo } from '../../state/burn/hooks'\nimport { useUserSlippageTolerance } from '../../state/user/hooks'\nimport { TYPE } from '../../theme'\nimport { calculateSlippageAmount, getRouterContract } from '../../utils'\nimport { currencyId } from '../../utils/currencyId'\nimport useDebouncedChangeHandler from '../../utils/useDebouncedChangeHandler'\nimport AppBody from '../AppBody'\nimport { ClickableText, MaxButton, Wrapper } from '../Pool/styleds'\n\nexport default function RemoveLiquidity({\n  history,\n  match: {\n    params: { currencyIdA, currencyIdB },\n  },\n}: RouteComponentProps<{ currencyIdA: string; currencyIdB: string }>) {\n  const [currencyA, currencyB] = [useCurrency(currencyIdA) ?? undefined, useCurrency(currencyIdB) ?? undefined]\n  const { address: account, network, connect } = useCelo()\n  const library = useProvider()\n  const chainId = network.chainId\n  const [tokenA, tokenB] = [currencyA, currencyB]\n\n  const theme = useContext(ThemeContext)\n\n  // toggle wallet when disconnected\n\n  // burn state\n  const { independentField, typedValue } = useBurnState()\n  const { pair, parsedAmounts, error } = useDerivedBurnInfo(currencyA ?? undefined, currencyB ?? undefined)\n  const { onUserInput: _onUserInput } = useBurnActionHandlers()\n  const isValid = !error\n\n  // modal and loading\n  const [showConfirm, setShowConfirm] = useState<boolean>(false)\n  const [showDetailed, setShowDetailed] = useState<boolean>(false)\n  const [attemptingTxn, setAttemptingTxn] = useState(false) // clicked confirm\n\n  // txn values\n  const [txHash, setTxHash] = useState<string>('')\n  const deadline = useTransactionDeadline()\n  const [allowedSlippage] = useUserSlippageTolerance()\n\n  const formattedAmounts = {\n    [Field.LIQUIDITY_PERCENT]: parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')\n      ? '0'\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1', '100'))\n      ? '<1'\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0),\n    [Field.LIQUIDITY]:\n      independentField === Field.LIQUIDITY ? typedValue : parsedAmounts[Field.LIQUIDITY]?.toSignificant(6) ?? '',\n    [Field.CURRENCY_A]:\n      independentField === Field.CURRENCY_A ? typedValue : parsedAmounts[Field.CURRENCY_A]?.toSignificant(6) ?? '',\n    [Field.CURRENCY_B]:\n      independentField === Field.CURRENCY_B ? typedValue : parsedAmounts[Field.CURRENCY_B]?.toSignificant(6) ?? '',\n  }\n\n  const atMaxAmount = parsedAmounts[Field.LIQUIDITY_PERCENT]?.equalTo(new Percent('1'))\n\n  // pair contract\n  const pairContract: Contract | null = usePairContract(pair?.liquidityToken?.address)\n\n  // allowance handling\n  const [signatureData, setSignatureData] = useState<{ v: number; r: string; s: string; deadline: number } | null>(null)\n  const [approval, approveCallback] = useApproveCallback(parsedAmounts[Field.LIQUIDITY], ROUTER_ADDRESS)\n\n  async function onAttemptToApprove() {\n    if (!pairContract || !pair || !library || !deadline) throw new Error('missing dependencies')\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\n    approveCallback()\n  }\n\n  // wrapped onUserInput to clear signatures\n  const onUserInput = useCallback(\n    (field: Field, typedValue: string) => {\n      setSignatureData(null)\n      return _onUserInput(field, typedValue)\n    },\n    [_onUserInput]\n  )\n\n  const onLiquidityInput = useCallback(\n    (typedValue: string): void => onUserInput(Field.LIQUIDITY, typedValue),\n    [onUserInput]\n  )\n  const onCurrencyAInput = useCallback(\n    (typedValue: string): void => onUserInput(Field.CURRENCY_A, typedValue),\n    [onUserInput]\n  )\n  const onCurrencyBInput = useCallback(\n    (typedValue: string): void => onUserInput(Field.CURRENCY_B, typedValue),\n    [onUserInput]\n  )\n\n  // tx sending\n  const doTransaction = useDoTransaction()\n  async function onRemove() {\n    if (!chainId || !library || !account || !deadline) throw new Error('missing dependencies')\n    const { [Field.CURRENCY_A]: currencyAmountA, [Field.CURRENCY_B]: currencyAmountB } = parsedAmounts\n    if (!currencyAmountA || !currencyAmountB) {\n      throw new Error('missing currency amounts')\n    }\n    const router = getRouterContract(chainId, library, account)\n\n    const amountsMin = {\n      [Field.CURRENCY_A]: calculateSlippageAmount(currencyAmountA, allowedSlippage)[0],\n      [Field.CURRENCY_B]: calculateSlippageAmount(currencyAmountB, allowedSlippage)[0],\n    }\n\n    if (!currencyA || !currencyB) throw new Error('missing tokens')\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\n\n    if (!tokenA || !tokenB) throw new Error('could not wrap')\n\n    // we have approval, use normal remove liquidity\n    if (approval !== ApprovalState.APPROVED) {\n      throw new Error('Attempting to confirm without approval or a signature. Please contact support.')\n    }\n\n    // removeLiquidity\n    setAttemptingTxn(true)\n    try {\n      const response = await doTransaction(router, 'removeLiquidity', {\n        args: [\n          tokenA.address,\n          tokenB.address,\n          liquidityAmount.raw.toString(),\n          amountsMin[Field.CURRENCY_A].toString(),\n          amountsMin[Field.CURRENCY_B].toString(),\n          account,\n          deadline.toHexString(),\n        ],\n        summary:\n          'Remove ' +\n          parsedAmounts[Field.CURRENCY_A]?.toSignificant(3) +\n          ' ' +\n          currencyA?.symbol +\n          ' and ' +\n          parsedAmounts[Field.CURRENCY_B]?.toSignificant(3) +\n          ' ' +\n          currencyB?.symbol,\n      })\n      setAttemptingTxn(false)\n      setTxHash(response.hash)\n\n      ReactGA.event({\n        category: 'Liquidity',\n        action: 'Remove',\n        label: [currencyA?.symbol, currencyB?.symbol].join('/'),\n      })\n    } catch (error) {\n      setAttemptingTxn(false)\n      // we only care if the error is something _other_ than the user rejected the tx\n      console.error(error)\n    }\n  }\n\n  function modalHeader() {\n    return (\n      <AutoColumn gap={'md'} style={{ marginTop: '20px' }}>\n        <RowBetween align=\"flex-end\">\n          <Text fontSize={24} fontWeight={500}>\n            {parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)}\n          </Text>\n          <RowFixed gap=\"4px\">\n            <CurrencyLogo currency={currencyA} size={'24px'} />\n            <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\n              {currencyA?.symbol}\n            </Text>\n          </RowFixed>\n        </RowBetween>\n        <RowFixed>\n          <Plus size=\"16\" color={theme.text2} />\n        </RowFixed>\n        <RowBetween align=\"flex-end\">\n          <Text fontSize={24} fontWeight={500}>\n            {parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)}\n          </Text>\n          <RowFixed gap=\"4px\">\n            <CurrencyLogo currency={currencyB} size={'24px'} />\n            <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\n              {currencyB?.symbol}\n            </Text>\n          </RowFixed>\n        </RowBetween>\n\n        <TYPE.italic fontSize={12} color={theme.text2} textAlign=\"left\" padding={'12px 0 0 0'}>\n          {`Output is estimated. If the price changes by more than ${\n            allowedSlippage / 100\n          }% your transaction will revert.`}\n        </TYPE.italic>\n      </AutoColumn>\n    )\n  }\n\n  function modalBottom() {\n    return (\n      <>\n        <RowBetween>\n          <Text color={theme.text2} fontWeight={500} fontSize={16}>\n            {'UBE ' + currencyA?.symbol + '/' + currencyB?.symbol} Burned\n          </Text>\n          <RowFixed>\n            <DoubleCurrencyLogo currency0={currencyA} currency1={currencyB} margin={true} />\n            <Text fontWeight={500} fontSize={16}>\n              {parsedAmounts[Field.LIQUIDITY]?.toSignificant(6)}\n            </Text>\n          </RowFixed>\n        </RowBetween>\n        {pair && (\n          <>\n            <RowBetween>\n              <Text color={theme.text2} fontWeight={500} fontSize={16}>\n                Price\n              </Text>\n              <Text fontWeight={500} fontSize={16} color={theme.text1}>\n                1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\n              </Text>\n            </RowBetween>\n            <RowBetween>\n              <div />\n              <Text fontWeight={500} fontSize={16} color={theme.text1}>\n                1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\n              </Text>\n            </RowBetween>\n          </>\n        )}\n        <ButtonPrimary disabled={!(approval === ApprovalState.APPROVED || signatureData !== null)} onClick={onRemove}>\n          <Text fontWeight={500} fontSize={20}>\n            Confirm\n          </Text>\n        </ButtonPrimary>\n      </>\n    )\n  }\n\n  const pendingText = `Removing ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)} ${\n    currencyA?.symbol\n  } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)} ${currencyB?.symbol}`\n\n  const liquidityPercentChangeCallback = useCallback(\n    (value: number) => {\n      onUserInput(Field.LIQUIDITY_PERCENT, value.toString())\n    },\n    [onUserInput]\n  )\n\n  const handleSelectCurrencyA = useCallback(\n    (currency: Token) => {\n      if (currencyIdB && currencyId(currency) === currencyIdB) {\n        history.push(`/remove/${currencyId(currency)}/${currencyIdA}`)\n      } else {\n        history.push(`/remove/${currencyId(currency)}/${currencyIdB}`)\n      }\n    },\n    [currencyIdA, currencyIdB, history]\n  )\n  const handleSelectCurrencyB = useCallback(\n    (currency: Token) => {\n      if (currencyIdA && currencyId(currency) === currencyIdA) {\n        history.push(`/remove/${currencyIdB}/${currencyId(currency)}`)\n      } else {\n        history.push(`/remove/${currencyIdA}/${currencyId(currency)}`)\n      }\n    },\n    [currencyIdA, currencyIdB, history]\n  )\n\n  const handleDismissConfirmation = useCallback(() => {\n    setShowConfirm(false)\n    setSignatureData(null) // important that we clear signature data to avoid bad sigs\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.LIQUIDITY_PERCENT, '0')\n    }\n    setTxHash('')\n  }, [onUserInput, txHash])\n\n  const [innerLiquidityPercentage, setInnerLiquidityPercentage] = useDebouncedChangeHandler(\n    Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),\n    liquidityPercentChangeCallback\n  )\n\n  return (\n    <>\n      <AppBody>\n        <AddRemoveTabs creating={false} adding={false} />\n        <Wrapper>\n          <TransactionConfirmationModal\n            isOpen={showConfirm}\n            onDismiss={handleDismissConfirmation}\n            attemptingTxn={attemptingTxn}\n            hash={txHash ? txHash : ''}\n            content={() => (\n              <ConfirmationModalContent\n                title={'You will receive'}\n                onDismiss={handleDismissConfirmation}\n                topContent={modalHeader}\n                bottomContent={modalBottom}\n              />\n            )}\n            pendingText={pendingText}\n          />\n          <AutoColumn gap=\"md\">\n            <BlueCard>\n              <AutoColumn gap=\"10px\">\n                <TYPE.link fontWeight={400} color={'primaryText1'}>\n                  <b>Tip:</b> Removing pool tokens converts your position back into underlying tokens at the current\n                  rate, proportional to your share of the pool. Accrued fees are included in the amounts you receive.\n                </TYPE.link>\n              </AutoColumn>\n            </BlueCard>\n            <LightCard>\n              <AutoColumn gap=\"20px\">\n                <RowBetween>\n                  <Text fontWeight={500}>Amount</Text>\n                  <ClickableText\n                    fontWeight={500}\n                    onClick={() => {\n                      setShowDetailed(!showDetailed)\n                    }}\n                  >\n                    {showDetailed ? 'Simple' : 'Detailed'}\n                  </ClickableText>\n                </RowBetween>\n                <Row style={{ alignItems: 'flex-end' }}>\n                  <Text fontSize={72} fontWeight={500}>\n                    {formattedAmounts[Field.LIQUIDITY_PERCENT]}%\n                  </Text>\n                </Row>\n                {!showDetailed && (\n                  <>\n                    <Slider value={innerLiquidityPercentage} onChange={setInnerLiquidityPercentage} />\n                    <RowBetween>\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '25')} width=\"20%\">\n                        25%\n                      </MaxButton>\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '50')} width=\"20%\">\n                        50%\n                      </MaxButton>\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '75')} width=\"20%\">\n                        75%\n                      </MaxButton>\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')} width=\"20%\">\n                        Max\n                      </MaxButton>\n                    </RowBetween>\n                  </>\n                )}\n              </AutoColumn>\n            </LightCard>\n            {!showDetailed && (\n              <>\n                <ColumnCenter>\n                  <ArrowDown size=\"16\" color={theme.text2} />\n                </ColumnCenter>\n                <LightCard>\n                  <AutoColumn gap=\"10px\">\n                    <RowBetween>\n                      <Text fontSize={24} fontWeight={500}>\n                        {formattedAmounts[Field.CURRENCY_A] || '-'}\n                      </Text>\n                      <RowFixed>\n                        <CurrencyLogo currency={currencyA} style={{ marginRight: '12px' }} />\n                        <Text fontSize={24} fontWeight={500} id=\"remove-liquidity-tokena-symbol\">\n                          {currencyA?.symbol}\n                        </Text>\n                      </RowFixed>\n                    </RowBetween>\n                    <RowBetween>\n                      <Text fontSize={24} fontWeight={500}>\n                        {formattedAmounts[Field.CURRENCY_B] || '-'}\n                      </Text>\n                      <RowFixed>\n                        <CurrencyLogo currency={currencyB} style={{ marginRight: '12px' }} />\n                        <Text fontSize={24} fontWeight={500} id=\"remove-liquidity-tokenb-symbol\">\n                          {currencyB?.symbol}\n                        </Text>\n                      </RowFixed>\n                    </RowBetween>\n                  </AutoColumn>\n                </LightCard>\n              </>\n            )}\n\n            {showDetailed && (\n              <>\n                <CurrencyInputPanel\n                  value={formattedAmounts[Field.LIQUIDITY]}\n                  onUserInput={onLiquidityInput}\n                  onMax={() => {\n                    onUserInput(Field.LIQUIDITY_PERCENT, '100')\n                  }}\n                  showMaxButton={!atMaxAmount}\n                  disableCurrencySelect\n                  currency={pair?.liquidityToken}\n                  pair={pair}\n                  id=\"liquidity-amount\"\n                />\n                <ColumnCenter>\n                  <ArrowDown size=\"16\" color={theme.text2} />\n                </ColumnCenter>\n                <CurrencyInputPanel\n                  hideBalance={true}\n                  value={formattedAmounts[Field.CURRENCY_A]}\n                  onUserInput={onCurrencyAInput}\n                  onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\n                  showMaxButton={!atMaxAmount}\n                  currency={currencyA}\n                  label={'Output'}\n                  onCurrencySelect={handleSelectCurrencyA}\n                  id=\"remove-liquidity-tokena\"\n                />\n                <ColumnCenter>\n                  <Plus size=\"16\" color={theme.text2} />\n                </ColumnCenter>\n                <CurrencyInputPanel\n                  hideBalance={true}\n                  value={formattedAmounts[Field.CURRENCY_B]}\n                  onUserInput={onCurrencyBInput}\n                  onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\n                  showMaxButton={!atMaxAmount}\n                  currency={currencyB}\n                  label={'Output'}\n                  onCurrencySelect={handleSelectCurrencyB}\n                  id=\"remove-liquidity-tokenb\"\n                />\n              </>\n            )}\n            {pair && (\n              <div style={{ padding: '10px 20px' }}>\n                <RowBetween>\n                  Price:\n                  <div>\n                    1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\n                  </div>\n                </RowBetween>\n                <RowBetween>\n                  <div />\n                  <div>\n                    1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\n                  </div>\n                </RowBetween>\n              </div>\n            )}\n            <div style={{ position: 'relative' }}>\n              {!account ? (\n                <ButtonLight onClick={() => connect().catch(console.warn)}>Connect Wallet</ButtonLight>\n              ) : (\n                <RowBetween>\n                  <ButtonConfirmed\n                    onClick={onAttemptToApprove}\n                    confirmed={approval === ApprovalState.APPROVED || signatureData !== null}\n                    disabled={approval !== ApprovalState.NOT_APPROVED || signatureData !== null}\n                    mr=\"0.5rem\"\n                    fontWeight={500}\n                    fontSize={16}\n                  >\n                    {approval === ApprovalState.PENDING ? (\n                      <Dots>Approving</Dots>\n                    ) : approval === ApprovalState.APPROVED || signatureData !== null ? (\n                      'Approved'\n                    ) : (\n                      'Approve'\n                    )}\n                  </ButtonConfirmed>\n                  <ButtonError\n                    onClick={() => {\n                      setShowConfirm(true)\n                    }}\n                    disabled={!isValid || (signatureData === null && approval !== ApprovalState.APPROVED)}\n                    error={!isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]}\n                  >\n                    <Text fontSize={16} fontWeight={500}>\n                      {error || 'Remove'}\n                    </Text>\n                  </ButtonError>\n                </RowBetween>\n              )}\n            </div>\n          </AutoColumn>\n        </Wrapper>\n      </AppBody>\n\n      {pair ? (\n        <AutoColumn style={{ minWidth: '20rem', width: '100%', maxWidth: '400px', marginTop: '1rem' }}>\n          <MinimalPositionCard pair={pair} />\n        </AutoColumn>\n      ) : null}\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}