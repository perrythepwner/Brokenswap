{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhoneNumberBase = exports.anonymizedPhone = exports.isE164Number = exports.getPhoneHash = void 0;\nvar attestations_1 = require(\"./attestations\");\nvar PHONE_SALT_SEPARATOR = '__';\nvar E164_REGEX = /^\\+[1-9][0-9]{1,14}$/;\nvar getPhoneHash = function getPhoneHash(sha3, phoneNumber, salt) {\n  if (!phoneNumber || !isE164Number(phoneNumber)) {\n    throw Error('Attempting to hash a non-e164 number: ' + phoneNumber);\n  }\n  var prefix = (0, attestations_1.getIdentifierPrefix)(attestations_1.IdentifierType.PHONE_NUMBER);\n  var value = prefix + (salt ? phoneNumber + PHONE_SALT_SEPARATOR + salt : phoneNumber);\n  return sha3(value);\n};\nexports.getPhoneHash = getPhoneHash;\nfunction isE164Number(phoneNumber) {\n  return E164_REGEX.test(phoneNumber);\n}\nexports.isE164Number = isE164Number;\nfunction anonymizedPhone(phoneNumber) {\n  return phoneNumber.slice(0, -4) + 'XXXX';\n}\nexports.anonymizedPhone = anonymizedPhone;\nexports.PhoneNumberBase = {\n  getPhoneHash: exports.getPhoneHash,\n  isE164Number: isE164Number\n};","map":null,"metadata":{},"sourceType":"script"}