{"ast":null,"code":"import _asyncToGenerator from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{CeloContract}from'@celo/contractkit';import{currencyEquals}from'@ubeswap/sdk';import{LendingPool__factory}from'../../../../generated';import{moolaLendingPools}from'./useMoola';/**\n * Executes a trade on Moola.\n * @param trade\n * @returns\n */export const executeMoolaDirectTrade=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(function*(_ref){let{trade,signer,chainId,doTransaction}=_ref;const chainCfg=moolaLendingPools[chainId];const{mcUSD,mCELO}=chainCfg;const pool=LendingPool__factory.connect(chainCfg.lendingPool,signer);const{inputAmount,outputAmount}=trade;const token=inputAmount.token;const convert=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(function*(){var _token$symbol;const symbol=currencyEquals(token,chainCfg[CeloContract.StableToken])?'cUSD':currencyEquals(token,chainCfg[CeloContract.GoldToken])?'CELO':currencyEquals(token,mcUSD)?'mcUSD':currencyEquals(token,mCELO)?'mCELO':(_token$symbol=token.symbol)!==null&&_token$symbol!==void 0?_token$symbol:null;if(symbol!==null&&symbol!==void 0&&symbol.startsWith('m')){const recipient=yield signer.getAddress();return yield doTransaction(pool,'withdraw',{args:[outputAmount.token.address,outputAmount.raw.toString(),recipient],summary:\"Withdraw \".concat(inputAmount.toSignificant(2),\" \").concat(symbol,\" from Moola\")});}if(symbol){const recipient=yield signer.getAddress();return yield doTransaction(pool,'deposit',{args:[inputAmount.token.address,inputAmount.raw.toString(),recipient,0x0421],summary:\"Deposit \".concat(inputAmount.toSignificant(2),\" \").concat(symbol,\" into Moola\")});}throw new Error(\"unknown currency: \".concat(token.address));});return function convert(){return _ref3.apply(this,arguments);};}();return{hash:(yield convert()).hash};});return function executeMoolaDirectTrade(_x){return _ref2.apply(this,arguments);};}();","map":null,"metadata":{},"sourceType":"module"}