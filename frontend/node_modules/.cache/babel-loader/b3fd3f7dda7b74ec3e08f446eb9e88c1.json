{"ast":null,"code":"import{CeloContract}from'@celo/contractkit';import{useCelo,useProvider}from'@celo/react-celo';import{CELO,ChainId,cREAL,currencyEquals,cUSD}from'@ubeswap/sdk';import{CEUR,MCELO,MCEUR,MCREAL,MCUSD}from'constants/index';import{useMemo}from'react';import{LendingPool__factory}from'../../../../generated';export const moolaLendingPools={// Addresses from: https://github.com/moolamarket/moola\n[ChainId.ALFAJORES]:{dataProvider:'0x31ccB9dC068058672D96E92BAf96B1607855822E',lendingPool:'0x58ad305f1eCe49ca55ADE0D5cCC90114C3902E88',lendingPoolCore:'0x090D652d1Bb0FEFbEe2531e9BBbb3604bE71f5de',[CeloContract.GoldToken]:CELO[ChainId.ALFAJORES],[CeloContract.StableToken]:cUSD[ChainId.ALFAJORES],mcUSD:MCUSD[ChainId.ALFAJORES],mCREAL:MCREAL[ChainId.ALFAJORES],mCELO:MCELO[ChainId.ALFAJORES]},[ChainId.MAINNET]:{dataProvider:'0x43d067ed784D9DD2ffEda73775e2CC4c560103A1',lendingPool:'0x970b12522CA9b4054807a2c5B736149a5BE6f670',lendingPoolCore:'0xAF106F8D4756490E7069027315F4886cc94A8F73',[CeloContract.GoldToken]:CELO[ChainId.MAINNET],[CeloContract.StableToken]:cUSD[ChainId.MAINNET],mcUSD:MCUSD[ChainId.MAINNET],mCREAL:MCREAL[ChainId.MAINNET],mCELO:MCELO[ChainId.MAINNET]}};export const moolaDuals=[[MCREAL,cREAL],[MCUSD,cUSD],[MCELO,CELO],[MCEUR,CEUR]].flatMap(dual=>[dual,[dual[1],dual[0]]]);/**\n * Gets the Moola token that the token can be converted to/from.\n * @param currency\n * @returns\n */export const getMoolaDual=currency=>{var _moolaDuals$find$1$ch,_moolaDuals$find,_moolaDuals$find$;const{chainId}=currency;if(chainId===ChainId.BAKLAVA){return null;}return(_moolaDuals$find$1$ch=(_moolaDuals$find=moolaDuals.find(dual=>currencyEquals(dual[0][chainId],currency)))===null||_moolaDuals$find===void 0?void 0:(_moolaDuals$find$=_moolaDuals$find[1])===null||_moolaDuals$find$===void 0?void 0:_moolaDuals$find$[chainId])!==null&&_moolaDuals$find$1$ch!==void 0?_moolaDuals$find$1$ch:null;};export const useMoolaConfig=()=>{const{network}=useCelo();const chainId=network.chainId;// TODO(igm): this breaks on baklava\nconst chainCfg=moolaLendingPools[chainId];if(chainCfg){const{lendingPool,lendingPoolCore}=chainCfg;return{lendingPoolCore,lendingPool};}return null;};export const useLendingPool=()=>{const cfg=useMoolaConfig();if(!cfg){throw new Error('no cfg');}const library=useProvider();return useMemo(()=>LendingPool__factory.connect(cfg.lendingPool,library),[cfg.lendingPool,library]);};","map":{"version":3,"names":["CeloContract","useCelo","useProvider","CELO","ChainId","cREAL","currencyEquals","cUSD","CEUR","MCELO","MCEUR","MCREAL","MCUSD","useMemo","LendingPool__factory","moolaLendingPools","ALFAJORES","dataProvider","lendingPool","lendingPoolCore","GoldToken","StableToken","mcUSD","mCREAL","mCELO","MAINNET","moolaDuals","flatMap","dual","getMoolaDual","currency","_moolaDuals$find$1$ch","_moolaDuals$find","_moolaDuals$find$","chainId","BAKLAVA","find","useMoolaConfig","network","chainCfg","useLendingPool","cfg","Error","library","connect"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/swap/routing/moola/useMoola.ts"],"sourcesContent":["import { CeloContract } from '@celo/contractkit'\nimport { useCelo, useProvider } from '@celo/react-celo'\nimport { CELO, ChainId, cREAL, currencyEquals, cUSD, Token } from '@ubeswap/sdk'\nimport { CEUR, MCELO, MCEUR, MCREAL, MCUSD } from 'constants/index'\nimport { useMemo } from 'react'\n\nimport { LendingPool, LendingPool__factory } from '../../../../generated'\n\nexport const moolaLendingPools = {\n  // Addresses from: https://github.com/moolamarket/moola\n  [ChainId.ALFAJORES]: {\n    dataProvider: '0x31ccB9dC068058672D96E92BAf96B1607855822E',\n    lendingPool: '0x58ad305f1eCe49ca55ADE0D5cCC90114C3902E88',\n    lendingPoolCore: '0x090D652d1Bb0FEFbEe2531e9BBbb3604bE71f5de',\n    [CeloContract.GoldToken]: CELO[ChainId.ALFAJORES],\n    [CeloContract.StableToken]: cUSD[ChainId.ALFAJORES],\n    mcUSD: MCUSD[ChainId.ALFAJORES],\n    mCREAL: MCREAL[ChainId.ALFAJORES],\n    mCELO: MCELO[ChainId.ALFAJORES],\n  },\n  [ChainId.MAINNET]: {\n    dataProvider: '0x43d067ed784D9DD2ffEda73775e2CC4c560103A1',\n    lendingPool: '0x970b12522CA9b4054807a2c5B736149a5BE6f670',\n    lendingPoolCore: '0xAF106F8D4756490E7069027315F4886cc94A8F73',\n    [CeloContract.GoldToken]: CELO[ChainId.MAINNET],\n    [CeloContract.StableToken]: cUSD[ChainId.MAINNET],\n    mcUSD: MCUSD[ChainId.MAINNET],\n    mCREAL: MCREAL[ChainId.MAINNET],\n    mCELO: MCELO[ChainId.MAINNET],\n  },\n}\n\nexport const moolaDuals = (\n  [\n    [MCREAL, cREAL],\n    [MCUSD, cUSD],\n    [MCELO, CELO],\n    [MCEUR, CEUR],\n  ] as const\n).flatMap((dual) => [dual, [dual[1], dual[0]] as const])\n\n/**\n * Gets the Moola token that the token can be converted to/from.\n * @param currency\n * @returns\n */\nexport const getMoolaDual = (currency: Token): Token | null => {\n  const { chainId } = currency\n  if (chainId === ChainId.BAKLAVA) {\n    return null\n  }\n  return moolaDuals.find((dual) => currencyEquals(dual[0][chainId], currency))?.[1]?.[chainId] ?? null\n}\n\nexport type IMoolaChain = keyof typeof moolaLendingPools\n\nexport type MoolaConfig = typeof moolaLendingPools[IMoolaChain]\n\nexport const useMoolaConfig = () => {\n  const { network } = useCelo()\n  const chainId = network.chainId as unknown as ChainId\n  // TODO(igm): this breaks on baklava\n  const chainCfg = moolaLendingPools[chainId as IMoolaChain]\n  if (chainCfg) {\n    const { lendingPool, lendingPoolCore } = chainCfg\n    return {\n      lendingPoolCore,\n      lendingPool,\n    }\n  }\n  return null\n}\n\nexport const useLendingPool = (): LendingPool => {\n  const cfg = useMoolaConfig()\n  if (!cfg) {\n    throw new Error('no cfg')\n  }\n  const library = useProvider()\n  return useMemo(() => LendingPool__factory.connect(cfg.lendingPool, library as any), [cfg.lendingPool, library])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}