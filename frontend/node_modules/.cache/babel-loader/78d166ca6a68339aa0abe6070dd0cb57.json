{"ast":null,"code":"import{createReducer,nanoid}from'@reduxjs/toolkit';import{addPopup,removePopup,setOpenModal,updateBlockNumber}from'./actions';const initialState={blockNumber:{},popupList:[],openModal:null};export default createReducer(initialState,builder=>builder.addCase(updateBlockNumber,(state,action)=>{const{chainId,blockNumber}=action.payload;if(typeof state.blockNumber[chainId]!=='number'){state.blockNumber[chainId]=blockNumber;}else{state.blockNumber[chainId]=Math.max(blockNumber,state.blockNumber[chainId]);}}).addCase(setOpenModal,(state,action)=>{state.openModal=action.payload;}).addCase(addPopup,(state,_ref)=>{let{payload:{content,key,removeAfterMs=15000}}=_ref;state.popupList=(key?state.popupList.filter(popup=>popup.key!==key):state.popupList).concat([{key:key||nanoid(),show:true,content,removeAfterMs}]);}).addCase(removePopup,(state,_ref2)=>{let{payload:{key}}=_ref2;state.popupList.forEach(p=>{if(p.key===key){p.show=false;}});}));","map":{"version":3,"names":["createReducer","nanoid","addPopup","removePopup","setOpenModal","updateBlockNumber","initialState","blockNumber","popupList","openModal","builder","addCase","state","action","chainId","payload","Math","max","_ref","content","key","removeAfterMs","filter","popup","concat","show","_ref2","forEach","p"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/state/application/reducer.ts"],"sourcesContent":["import { createReducer, nanoid } from '@reduxjs/toolkit'\n\nimport { addPopup, ApplicationModal, PopupContent, removePopup, setOpenModal, updateBlockNumber } from './actions'\n\ntype PopupList = Array<{ key: string; show: boolean; content: PopupContent; removeAfterMs: number | null }>\n\nexport interface ApplicationState {\n  readonly blockNumber: { readonly [chainId: number]: number }\n  readonly popupList: PopupList\n  readonly openModal: ApplicationModal | null\n}\n\nconst initialState: ApplicationState = {\n  blockNumber: {},\n  popupList: [],\n  openModal: null,\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateBlockNumber, (state, action) => {\n      const { chainId, blockNumber } = action.payload\n      if (typeof state.blockNumber[chainId] !== 'number') {\n        state.blockNumber[chainId] = blockNumber\n      } else {\n        state.blockNumber[chainId] = Math.max(blockNumber, state.blockNumber[chainId])\n      }\n    })\n    .addCase(setOpenModal, (state, action) => {\n      state.openModal = action.payload\n    })\n    .addCase(addPopup, (state, { payload: { content, key, removeAfterMs = 15000 } }) => {\n      state.popupList = (key ? state.popupList.filter((popup) => popup.key !== key) : state.popupList).concat([\n        {\n          key: key || nanoid(),\n          show: true,\n          content,\n          removeAfterMs,\n        },\n      ])\n    })\n    .addCase(removePopup, (state, { payload: { key } }) => {\n      state.popupList.forEach((p) => {\n        if (p.key === key) {\n          p.show = false\n        }\n      })\n    })\n)\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,MAAM,KAAQ,kBAAkB,CAExD,OAASC,QAAQ,CAAkCC,WAAW,CAAEC,YAAY,CAAEC,iBAAiB,KAAQ,WAAW,CAUlH,KAAM,CAAAC,YAA8B,CAAG,CACrCC,WAAW,CAAE,CAAC,CAAC,CACfC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,IACb,CAAC,CAED,cAAe,CAAAT,aAAa,CAACM,YAAY,CAAGI,OAAO,EACjDA,OAAO,CACJC,OAAO,CAACN,iBAAiB,CAAE,CAACO,KAAK,CAAEC,MAAM,GAAK,CAC7C,KAAM,CAAEC,OAAO,CAAEP,WAAY,CAAC,CAAGM,MAAM,CAACE,OAAO,CAC/C,GAAI,MAAO,CAAAH,KAAK,CAACL,WAAW,CAACO,OAAO,CAAC,GAAK,QAAQ,CAAE,CAClDF,KAAK,CAACL,WAAW,CAACO,OAAO,CAAC,CAAGP,WAAW,CAC1C,CAAC,IAAM,CACLK,KAAK,CAACL,WAAW,CAACO,OAAO,CAAC,CAAGE,IAAI,CAACC,GAAG,CAACV,WAAW,CAAEK,KAAK,CAACL,WAAW,CAACO,OAAO,CAAC,CAAC,CAChF,CACF,CAAC,CAAC,CACDH,OAAO,CAACP,YAAY,CAAE,CAACQ,KAAK,CAAEC,MAAM,GAAK,CACxCD,KAAK,CAACH,SAAS,CAAGI,MAAM,CAACE,OAAO,CAClC,CAAC,CAAC,CACDJ,OAAO,CAACT,QAAQ,CAAE,CAACU,KAAK,CAAAM,IAAA,GAA2D,IAAzD,CAAEH,OAAO,CAAE,CAAEI,OAAO,CAAEC,GAAG,CAAEC,aAAa,CAAG,KAAM,CAAE,CAAC,CAAAH,IAAA,CAC7EN,KAAK,CAACJ,SAAS,CAAG,CAACY,GAAG,CAAGR,KAAK,CAACJ,SAAS,CAACc,MAAM,CAAEC,KAAK,EAAKA,KAAK,CAACH,GAAG,GAAKA,GAAG,CAAC,CAAGR,KAAK,CAACJ,SAAS,EAAEgB,MAAM,CAAC,CACtG,CACEJ,GAAG,CAAEA,GAAG,EAAInB,MAAM,CAAC,CAAC,CACpBwB,IAAI,CAAE,IAAI,CACVN,OAAO,CACPE,aACF,CAAC,CACF,CAAC,CACJ,CAAC,CAAC,CACDV,OAAO,CAACR,WAAW,CAAE,CAACS,KAAK,CAAAc,KAAA,GAA2B,IAAzB,CAAEX,OAAO,CAAE,CAAEK,GAAI,CAAE,CAAC,CAAAM,KAAA,CAChDd,KAAK,CAACJ,SAAS,CAACmB,OAAO,CAAEC,CAAC,EAAK,CAC7B,GAAIA,CAAC,CAACR,GAAG,GAAKA,GAAG,CAAE,CACjBQ,CAAC,CAACH,IAAI,CAAG,KAAK,CAChB,CACF,CAAC,CAAC,CACJ,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module"}