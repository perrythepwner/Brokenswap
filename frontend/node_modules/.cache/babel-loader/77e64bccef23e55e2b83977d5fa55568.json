{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{useCelo}from'@celo/react-celo';import Card from'components/Card';import Column from'components/Column';import CurrencyLogo from'components/CurrencyLogo';import Row,{RowBetween,RowFixed}from'components/Row';import{useToken}from'hooks/Tokens';import React,{useCallback,useMemo,useRef,useState}from'react';import{useRemoveUserAddedToken,useUserAddedTokens}from'state/user/hooks';import styled from'styled-components';import{ButtonText,ExternalLink,ExternalLinkIcon,TrashIcon,TYPE}from'theme';import{isAddress}from'utils';import useTheme from'../../hooks/useTheme';import{CurrencyModalView}from'./CurrencySearchModal';import ImportRow from'./ImportRow';import{PaddedColumn,SearchInput,Separator}from'./styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: calc(100% - 60px);\\n  position: relative;\\n  padding-bottom: 60px;\\n\"])));const Footer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  border-radius: 20px;\\n  border-top-right-radius: 0;\\n  border-top-left-radius: 0;\\n  border-top: 1px solid \",\";\\n  padding: 20px;\\n  text-align: center;\\n\"])),_ref=>{let{theme}=_ref;return theme.bg3;});export default function ManageTokens(_ref2){let{setModalView,setImportToken}=_ref2;const{network}=useCelo();const chainId=network.chainId;const[searchQuery,setSearchQuery]=useState('');const theme=useTheme();// manage focus on modal show\nconst inputRef=useRef();const handleInput=useCallback(event=>{const input=event.target.value;const checksummedInput=isAddress(input);setSearchQuery(checksummedInput||input);},[]);// if they input an address, use it\nconst isAddressSearch=isAddress(searchQuery);const searchToken=useToken(searchQuery);// all tokens for local lisr\nconst userAddedTokens=useUserAddedTokens();const removeToken=useRemoveUserAddedToken();const handleRemoveAll=useCallback(()=>{if(chainId&&userAddedTokens){userAddedTokens.map(token=>{return removeToken(chainId,token.address);});}},[removeToken,userAddedTokens,chainId]);const tokenList=useMemo(()=>{return chainId&&userAddedTokens.map(token=>/*#__PURE__*/_jsxs(RowBetween,{width:\"100%\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:token,size:'20px'}),/*#__PURE__*/_jsx(ExternalLink,{href:\"\".concat(network.explorer,\"/address/\").concat(token.address),children:/*#__PURE__*/_jsx(TYPE.main,{ml:'10px',fontWeight:600,children:token.symbol})})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TrashIcon,{onClick:()=>removeToken(chainId,token.address)}),/*#__PURE__*/_jsx(ExternalLinkIcon,{href:\"\".concat(network.explorer,\"/address/\").concat(token.address)})]})]},token.address));},[userAddedTokens,removeToken,network,chainId]);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Column,{style:{width:'100%',flex:'1 1'},children:[/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"14px\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(SearchInput,{type:\"text\",id:\"token-search-input\",placeholder:'0x0000',value:searchQuery,autoComplete:\"off\",ref:inputRef,onChange:handleInput})}),searchQuery!==''&&!isAddressSearch&&/*#__PURE__*/_jsx(TYPE.error,{error:true,children:'Enter valid token address'}),searchToken&&/*#__PURE__*/_jsx(Card,{backgroundColor:theme.bg2,padding:\"10px 0\",children:/*#__PURE__*/_jsx(ImportRow,{token:searchToken,showImportView:()=>setModalView(CurrencyModalView.importToken),setImportToken:setImportToken,style:{height:'fit-content'}})})]}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"lg\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(TYPE.main,{fontWeight:600,children:[userAddedTokens===null||userAddedTokens===void 0?void 0:userAddedTokens.length,\" \",'Custom',\" \",userAddedTokens.length===1?'Token':'Tokens']}),userAddedTokens.length>0&&/*#__PURE__*/_jsx(ButtonText,{onClick:handleRemoveAll,children:/*#__PURE__*/_jsx(TYPE.blue,{children:'Clear all'})})]}),tokenList]})]}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsx(TYPE.darkGray,{children:'Tip: Custom tokens are stored locally in your browser'})})]});}","map":null,"metadata":{},"sourceType":"module"}