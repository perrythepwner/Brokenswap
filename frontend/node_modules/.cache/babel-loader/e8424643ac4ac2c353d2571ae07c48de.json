{"ast":null,"code":"import _objectSpread from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createReducer}from'@reduxjs/toolkit';import{Field,replaceLimitState,selectCurrency,setBuying,setRecipient,switchCurrencies,typeInput}from'./actions';const initialState={priceTypedValue:'',tokenTypedValue:'',[Field.TOKEN]:{currencyId:''},[Field.PRICE]:{currencyId:''},recipient:null,buying:true};export default createReducer(initialState,builder=>builder.addCase(replaceLimitState,(state,_ref)=>{let{payload:{tokenTypedValue,priceTypedValue,recipient,field,tokenCurrencyId,priceCurrencyId,buying}}=_ref;return{[Field.TOKEN]:{currencyId:tokenCurrencyId},[Field.PRICE]:{currencyId:priceCurrencyId},independentField:field,tokenTypedValue,priceTypedValue,recipient,buying};}).addCase(selectCurrency,(state,_ref2)=>{let{payload:{currencyId,field}}=_ref2;const otherField=field===Field.TOKEN?Field.PRICE:Field.TOKEN;if(currencyId===state[otherField].currencyId){// the case where we have to Limit the order\nreturn _objectSpread(_objectSpread({},state),{},{[field]:{currencyId:currencyId},[otherField]:{currencyId:state[field].currencyId}});}else{// the normal case\nreturn _objectSpread(_objectSpread({},state),{},{[field]:{currencyId:currencyId}});}}).addCase(switchCurrencies,state=>{return _objectSpread(_objectSpread({},state),{},{[Field.TOKEN]:{currencyId:state[Field.PRICE].currencyId},[Field.PRICE]:{currencyId:state[Field.TOKEN].currencyId}});}).addCase(typeInput,(state,_ref3)=>{let{payload:{field,typedValue}}=_ref3;if(field===Field.PRICE){return _objectSpread(_objectSpread({},state),{},{priceTypedValue:typedValue});}else if(field===Field.TOKEN){return _objectSpread(_objectSpread({},state),{},{tokenTypedValue:typedValue});}return state;}).addCase(setRecipient,(state,_ref4)=>{let{payload:{recipient}}=_ref4;state.recipient=recipient;}).addCase(setBuying,(state,_ref5)=>{let{payload:{buying}}=_ref5;state.buying=buying;}));","map":{"version":3,"names":["createReducer","Field","replaceLimitState","selectCurrency","setBuying","setRecipient","switchCurrencies","typeInput","initialState","priceTypedValue","tokenTypedValue","TOKEN","currencyId","PRICE","recipient","buying","builder","addCase","state","_ref","payload","field","tokenCurrencyId","priceCurrencyId","independentField","_ref2","otherField","_objectSpread","_ref3","typedValue","_ref4","_ref5"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/state/limit/reducer.ts"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\n\nimport {\n  Field,\n  replaceLimitState,\n  selectCurrency,\n  setBuying,\n  setRecipient,\n  switchCurrencies,\n  typeInput,\n} from './actions'\n\nexport interface LimitState {\n  readonly priceTypedValue: string\n  readonly tokenTypedValue: string\n  readonly [Field.TOKEN]: {\n    readonly currencyId: string | undefined\n  }\n  readonly [Field.PRICE]: {\n    readonly currencyId: string | undefined\n  }\n  // the typed recipient address or ENS name, or null if Limit should go to sender\n  readonly recipient: string | null\n  readonly buying: boolean\n}\n\nconst initialState: LimitState = {\n  priceTypedValue: '',\n  tokenTypedValue: '',\n  [Field.TOKEN]: {\n    currencyId: '',\n  },\n  [Field.PRICE]: {\n    currencyId: '',\n  },\n  recipient: null,\n  buying: true,\n}\n\nexport default createReducer<LimitState>(initialState, (builder) =>\n  builder\n    .addCase(\n      replaceLimitState,\n      (\n        state,\n        { payload: { tokenTypedValue, priceTypedValue, recipient, field, tokenCurrencyId, priceCurrencyId, buying } }\n      ) => {\n        return {\n          [Field.TOKEN]: {\n            currencyId: tokenCurrencyId,\n          },\n          [Field.PRICE]: {\n            currencyId: priceCurrencyId,\n          },\n          independentField: field,\n          tokenTypedValue,\n          priceTypedValue,\n          recipient,\n          buying,\n        }\n      }\n    )\n    .addCase(selectCurrency, (state, { payload: { currencyId, field } }) => {\n      const otherField = field === Field.TOKEN ? Field.PRICE : Field.TOKEN\n      if (currencyId === state[otherField].currencyId) {\n        // the case where we have to Limit the order\n        return {\n          ...state,\n          [field]: { currencyId: currencyId },\n          [otherField]: { currencyId: state[field].currencyId },\n        }\n      } else {\n        // the normal case\n        return {\n          ...state,\n          [field]: { currencyId: currencyId },\n        }\n      }\n    })\n    .addCase(switchCurrencies, (state) => {\n      return {\n        ...state,\n        [Field.TOKEN]: { currencyId: state[Field.PRICE].currencyId },\n        [Field.PRICE]: { currencyId: state[Field.TOKEN].currencyId },\n      }\n    })\n    .addCase(typeInput, (state, { payload: { field, typedValue } }) => {\n      if (field === Field.PRICE) {\n        return {\n          ...state,\n          priceTypedValue: typedValue,\n        }\n      } else if (field === Field.TOKEN) {\n        return {\n          ...state,\n          tokenTypedValue: typedValue,\n        }\n      }\n      return state\n    })\n    .addCase(setRecipient, (state, { payload: { recipient } }) => {\n      state.recipient = recipient\n    })\n    .addCase(setBuying, (state, { payload: { buying } }) => {\n      state.buying = buying\n    })\n)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}