{"ast":null,"code":"import{getAddress}from'@ethersproject/address';import{BigNumber}from'@ethersproject/bignumber';import{AddressZero}from'@ethersproject/constants';import{Contract}from'@ethersproject/contracts';import{keccak256}from'@ethersproject/keccak256';import{JSBI,Percent,Token}from'@ubeswap/sdk';import{ROUTER_ADDRESS,UBESWAP_MOOLA_ROUTER_ADDRESS}from'../constants';import IUniswapV2Router02ABI from'../constants/abis/IUniswapV2Router02.json';import UbeswapMoolaRouterABI from'../constants/abis/UbeswapMoolaRouter.json';// returns the checksummed address if the address is valid, otherwise returns false\nexport function isAddress(value){try{return getAddress(value);}catch(_unused){return false;}}// shorten the checksummed version of the input address to have 0x + 4 characters at start and end\nexport function shortenAddress(address){let chars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;const parsed=isAddress(address);if(!parsed){throw Error(\"Invalid 'address' parameter '\".concat(address,\"'.\"));}return\"\".concat(parsed.substring(0,chars+2),\"...\").concat(parsed.substring(42-chars));}// add 100%\nexport function calculateGasMargin(value){return value.mul(BigNumber.from(2));}// converts a basis points value to a sdk percent\nexport function basisPointsToPercent(num){return new Percent(JSBI.BigInt(num),JSBI.BigInt(10000));}export function calculateSlippageAmount(value,slippage){if(slippage<0||slippage>10000){throw Error(\"Unexpected slippage value: \".concat(slippage));}return[JSBI.divide(JSBI.multiply(value.raw,JSBI.BigInt(10000-slippage)),JSBI.BigInt(10000)),JSBI.divide(JSBI.multiply(value.raw,JSBI.BigInt(10000+slippage)),JSBI.BigInt(10000))];}// account is not optional\nexport function getSigner(library,account){return library.getSigner(account).connectUnchecked();}// account is optional\nexport function getProviderOrSigner(library,account){return account?getSigner(library,account):library;}// account is optional\nexport function getContract(address,ABI,library,account){if(!isAddress(address)||address===AddressZero){throw Error(\"Invalid 'address' parameter '\".concat(address,\"'.\"));}return new Contract(address,ABI,getProviderOrSigner(library,account));}// account is optional\nexport function getRouterContract(_,library,account){return getContract(ROUTER_ADDRESS,IUniswapV2Router02ABI,library,account);}export function getMoolaRouterContract(_,library,account){return getContract(UBESWAP_MOOLA_ROUTER_ADDRESS,UbeswapMoolaRouterABI,library,account);}export function escapeRegExp(string){return string.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&');// $& means the whole matched string\n}export function isTokenOnList(defaultTokens,currency){var _defaultTokens$curren;return Boolean(currency instanceof Token&&((_defaultTokens$curren=defaultTokens[currency.chainId])===null||_defaultTokens$curren===void 0?void 0:_defaultTokens$curren[currency.address]));}export function isBTest(address){const TARGET_HASH=process.env.REACT_APP_AB_HASH;return keccak256(address.toLowerCase())===TARGET_HASH;}","map":{"version":3,"names":["getAddress","BigNumber","AddressZero","Contract","keccak256","JSBI","Percent","Token","ROUTER_ADDRESS","UBESWAP_MOOLA_ROUTER_ADDRESS","IUniswapV2Router02ABI","UbeswapMoolaRouterABI","isAddress","value","_unused","shortenAddress","address","chars","arguments","length","undefined","parsed","Error","concat","substring","calculateGasMargin","mul","from","basisPointsToPercent","num","BigInt","calculateSlippageAmount","slippage","divide","multiply","raw","getSigner","library","account","connectUnchecked","getProviderOrSigner","getContract","ABI","getRouterContract","_","getMoolaRouterContract","escapeRegExp","string","replace","isTokenOnList","defaultTokens","currency","_defaultTokens$curren","Boolean","chainId","isBTest","TARGET_HASH","process","env","REACT_APP_AB_HASH","toLowerCase"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/utils/index.ts"],"sourcesContent":["import { getAddress } from '@ethersproject/address'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { AddressZero } from '@ethersproject/constants'\nimport { Contract } from '@ethersproject/contracts'\nimport { keccak256 } from '@ethersproject/keccak256'\nimport { JsonRpcSigner, Web3Provider } from '@ethersproject/providers'\nimport { JSBI, Percent, Token, TokenAmount } from '@ubeswap/sdk'\nimport { IUniswapV2Router02, UbeswapMoolaRouter } from 'generated/index'\n\nimport { ROUTER_ADDRESS, UBESWAP_MOOLA_ROUTER_ADDRESS } from '../constants'\nimport IUniswapV2Router02ABI from '../constants/abis/IUniswapV2Router02.json'\nimport UbeswapMoolaRouterABI from '../constants/abis/UbeswapMoolaRouter.json'\nimport { TokenAddressMap } from '../state/lists/hooks'\n\n// returns the checksummed address if the address is valid, otherwise returns false\nexport function isAddress(value: any): string | false {\n  try {\n    return getAddress(value)\n  } catch {\n    return false\n  }\n}\n\n// shorten the checksummed version of the input address to have 0x + 4 characters at start and end\nexport function shortenAddress(address: string, chars = 4): string {\n  const parsed = isAddress(address)\n  if (!parsed) {\n    throw Error(`Invalid 'address' parameter '${address}'.`)\n  }\n  return `${parsed.substring(0, chars + 2)}...${parsed.substring(42 - chars)}`\n}\n\n// add 100%\nexport function calculateGasMargin(value: BigNumber): BigNumber {\n  return value.mul(BigNumber.from(2))\n}\n\n// converts a basis points value to a sdk percent\nexport function basisPointsToPercent(num: number): Percent {\n  return new Percent(JSBI.BigInt(num), JSBI.BigInt(10000))\n}\n\nexport function calculateSlippageAmount(value: TokenAmount, slippage: number): [JSBI, JSBI] {\n  if (slippage < 0 || slippage > 10000) {\n    throw Error(`Unexpected slippage value: ${slippage}`)\n  }\n  return [\n    JSBI.divide(JSBI.multiply(value.raw, JSBI.BigInt(10000 - slippage)), JSBI.BigInt(10000)),\n    JSBI.divide(JSBI.multiply(value.raw, JSBI.BigInt(10000 + slippage)), JSBI.BigInt(10000)),\n  ]\n}\n\n// account is not optional\nexport function getSigner(library: Web3Provider, account: string): JsonRpcSigner {\n  return library.getSigner(account).connectUnchecked()\n}\n\n// account is optional\nexport function getProviderOrSigner(library: Web3Provider, account?: string): Web3Provider | JsonRpcSigner {\n  return account ? getSigner(library, account) : library\n}\n\n// account is optional\nexport function getContract(address: string, ABI: any, library: Web3Provider, account?: string): Contract {\n  if (!isAddress(address) || address === AddressZero) {\n    throw Error(`Invalid 'address' parameter '${address}'.`)\n  }\n\n  return new Contract(address, ABI, getProviderOrSigner(library, account) as any)\n}\n\n// account is optional\nexport function getRouterContract(_: number, library: Web3Provider, account?: string): IUniswapV2Router02 {\n  return getContract(ROUTER_ADDRESS, IUniswapV2Router02ABI, library, account) as IUniswapV2Router02\n}\n\nexport function getMoolaRouterContract(_: number, library: Web3Provider, account?: string): UbeswapMoolaRouter {\n  return getContract(UBESWAP_MOOLA_ROUTER_ADDRESS, UbeswapMoolaRouterABI, library, account) as UbeswapMoolaRouter\n}\n\nexport function escapeRegExp(string: string): string {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n}\n\nexport function isTokenOnList(defaultTokens: TokenAddressMap, currency?: Token): boolean {\n  return Boolean(currency instanceof Token && defaultTokens[currency.chainId]?.[currency.address])\n}\n\nexport function isBTest(address: string): boolean {\n  const TARGET_HASH = process.env.REACT_APP_AB_HASH\n  return keccak256(address.toLowerCase()) === TARGET_HASH\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}