{"ast":null,"code":"import _asyncToGenerator from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useCelo,useProvider}from'@celo/react-celo';import ENS from'@ensdomains/ensjs';import{useEffect,useState}from'react';/**\n * Fetches the account summary of a Celo account.\n */export default function useAccountSummary(address){const[summary,setSummary]=useState(null);const[nom,setNom]=useState(null);const{kit}=useCelo();const provider=useProvider();useEffect(()=>{;_asyncToGenerator(function*(){if(!address){return;}try{const accounts=yield kit.contracts.getAccounts();const account=yield accounts.signerToAccount(address);setSummary(yield accounts.getAccountSummary(account));}catch(e){console.error('Could not fetch account summary',e);}const nom=new ENS({provider,ensAddress:'0x3DE51c3960400A0F752d3492652Ae4A0b2A36FB3'});try{const{name}=yield nom.getName(address);if(name)setNom(\"\".concat(name,\".nom\"));}catch(e){console.error('Could not fetch nom data',e);}})();},[address,kit,provider]);return{summary,nom,loading:summary===null};}","map":{"version":3,"names":["useCelo","useProvider","ENS","useEffect","useState","useAccountSummary","address","summary","setSummary","nom","setNom","kit","provider","_asyncToGenerator","accounts","contracts","getAccounts","account","signerToAccount","getAccountSummary","e","console","error","ensAddress","name","getName","concat","loading"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/hooks/useAccountSummary.ts"],"sourcesContent":["import { AccountsWrapper } from '@celo/contractkit/lib/wrappers/Accounts'\nimport { useCelo, useProvider } from '@celo/react-celo'\nimport ENS from '@ensdomains/ensjs'\nimport { useEffect, useState } from 'react'\n\ntype AsyncReturnType<T extends (...args: any) => any> = T extends (...args: any) => Promise<infer U>\n  ? U\n  : T extends (...args: any) => infer U\n  ? U\n  : any\n\ntype AccountSummary = AsyncReturnType<AccountsWrapper['getAccountSummary']>\n\n/**\n * Fetches the account summary of a Celo account.\n */\nexport default function useAccountSummary(address?: string | null): {\n  summary: AccountSummary | null\n  nom: string | null\n  loading: boolean\n} {\n  const [summary, setSummary] = useState<AccountSummary | null>(null)\n  const [nom, setNom] = useState<string | null>(null)\n  const { kit } = useCelo()\n  const provider = useProvider()\n\n  useEffect(() => {\n    ;(async () => {\n      if (!address) {\n        return\n      }\n      try {\n        const accounts = await kit.contracts.getAccounts()\n        const account = await accounts.signerToAccount(address)\n        setSummary(await accounts.getAccountSummary(account))\n      } catch (e) {\n        console.error('Could not fetch account summary', e)\n      }\n\n      const nom = new ENS({ provider, ensAddress: '0x3DE51c3960400A0F752d3492652Ae4A0b2A36FB3' })\n      try {\n        const { name } = await nom.getName(address)\n        if (name) setNom(`${name}.nom`)\n      } catch (e) {\n        console.error('Could not fetch nom data', e)\n      }\n    })()\n  }, [address, kit, provider])\n\n  return { summary, nom, loading: summary === null }\n}\n"],"mappings":"kLACA,OAASA,OAAO,CAAEC,WAAW,KAAQ,kBAAkB,CACvD,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CACnC,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAU3C;AACA;AACA,GACA,cAAe,SAAS,CAAAC,iBAAiBA,CAACC,OAAuB,CAI/D,CACA,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGJ,QAAQ,CAAwB,IAAI,CAAC,CACnE,KAAM,CAACK,GAAG,CAAEC,MAAM,CAAC,CAAGN,QAAQ,CAAgB,IAAI,CAAC,CACnD,KAAM,CAAEO,GAAI,CAAC,CAAGX,OAAO,CAAC,CAAC,CACzB,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9BE,SAAS,CAAC,IAAM,CACd,CAACU,iBAAA,CAAC,WAAY,CACZ,GAAI,CAACP,OAAO,CAAE,CACZ,OACF,CACA,GAAI,CACF,KAAM,CAAAQ,QAAQ,MAAS,CAAAH,GAAG,CAACI,SAAS,CAACC,WAAW,CAAC,CAAC,CAClD,KAAM,CAAAC,OAAO,MAAS,CAAAH,QAAQ,CAACI,eAAe,CAACZ,OAAO,CAAC,CACvDE,UAAU,MAAO,CAAAM,QAAQ,CAACK,iBAAiB,CAACF,OAAO,CAAC,CAAC,CACvD,CAAE,MAAOG,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAEF,CAAC,CAAC,CACrD,CAEA,KAAM,CAAAX,GAAG,CAAG,GAAI,CAAAP,GAAG,CAAC,CAAEU,QAAQ,CAAEW,UAAU,CAAE,4CAA6C,CAAC,CAAC,CAC3F,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,MAAS,CAAAf,GAAG,CAACgB,OAAO,CAACnB,OAAO,CAAC,CAC3C,GAAIkB,IAAI,CAAEd,MAAM,IAAAgB,MAAA,CAAIF,IAAI,QAAM,CAAC,CACjC,CAAE,MAAOJ,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEF,CAAC,CAAC,CAC9C,CACF,CAAC,EAAE,CAAC,CACN,CAAC,CAAE,CAACd,OAAO,CAAEK,GAAG,CAAEC,QAAQ,CAAC,CAAC,CAE5B,MAAO,CAAEL,OAAO,CAAEE,GAAG,CAAEkB,OAAO,CAAEpB,OAAO,GAAK,IAAK,CAAC,CACpD"},"metadata":{},"sourceType":"module"}