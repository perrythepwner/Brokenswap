{"ast":null,"code":"import{TradeType}from'@ubeswap/sdk';import React,{useContext,useMemo}from'react';import{AlertTriangle,ArrowDown}from'react-feather';import{Text}from'rebass';import{ThemeContext}from'styled-components';import{Field}from'../../state/swap/actions';import{TYPE}from'../../theme';import{isAddress,shortenAddress}from'../../utils';import{computeSlippageAdjustedAmounts,computeTradePriceBreakdown,warningSeverity}from'../../utils/prices';import{ButtonPrimary}from'../Button';import{AutoColumn}from'../Column';import CurrencyLogo from'../CurrencyLogo';import{RowBetween,RowFixed}from'../Row';import{MoolaDirectTrade}from'./routing/moola/MoolaDirectTrade';import{SwapShowAcceptChanges,TruncatedText}from'./styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SwapModalHeader(_ref){var _slippageAdjustedAmou,_slippageAdjustedAmou2;let{trade,allowedSlippage,recipient,showAcceptChanges,onAcceptChanges}=_ref;const slippageAdjustedAmounts=useMemo(()=>computeSlippageAdjustedAmounts(trade,allowedSlippage),[trade,allowedSlippage]);const{priceImpactWithoutFee}=useMemo(()=>computeTradePriceBreakdown(trade),[trade]);const priceImpactSeverity=warningSeverity(priceImpactWithoutFee);const theme=useContext(ThemeContext);return/*#__PURE__*/_jsxs(AutoColumn,{gap:'md',style:{marginTop:'20px'},children:[/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsxs(RowFixed,{gap:'0px',children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:trade.inputAmount.currency,size:'24px',style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(TruncatedText,{fontSize:24,fontWeight:500,color:showAcceptChanges&&trade.tradeType===TradeType.EXACT_OUTPUT?theme.primary1:'',children:trade.inputAmount.toSignificant(6)})]}),/*#__PURE__*/_jsx(RowFixed,{gap:'0px',children:/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'},children:trade.inputAmount.currency.symbol})})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.text2,style:{marginLeft:'4px',minWidth:'16px'}})}),/*#__PURE__*/_jsxs(RowBetween,{align:\"flex-end\",children:[/*#__PURE__*/_jsxs(RowFixed,{gap:'0px',children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:trade.outputAmount.currency,size:'24px',style:{marginRight:'12px'}}),/*#__PURE__*/_jsx(TruncatedText,{fontSize:24,fontWeight:500,color:priceImpactSeverity>2?theme.red1:showAcceptChanges&&trade.tradeType===TradeType.EXACT_INPUT?theme.primary1:'',children:trade.outputAmount.toSignificant(6)})]}),/*#__PURE__*/_jsx(RowFixed,{gap:'0px',children:/*#__PURE__*/_jsx(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'},children:trade.outputAmount.currency.symbol})})]}),showAcceptChanges?/*#__PURE__*/_jsx(SwapShowAcceptChanges,{justify:\"flex-start\",gap:'0px',children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(AlertTriangle,{size:20,style:{marginRight:'8px',minWidth:24}}),/*#__PURE__*/_jsx(TYPE.main,{color:theme.primary1,children:\" Price Updated\"})]}),/*#__PURE__*/_jsx(ButtonPrimary,{style:{padding:'.5rem',width:'fit-content',fontSize:'0.825rem',borderRadius:'12px'},onClick:onAcceptChanges,children:\"Accept\"})]})}):null,!(trade instanceof MoolaDirectTrade)&&/*#__PURE__*/_jsx(AutoColumn,{justify:\"flex-start\",gap:\"sm\",style:{padding:'12px 0 0 0px'},children:trade.tradeType===TradeType.EXACT_INPUT?/*#__PURE__*/_jsxs(TYPE.italic,{textAlign:\"left\",style:{width:'100%'},children:[\"Output is estimated. You will receive at least \",/*#__PURE__*/_jsxs(\"b\",{children:[(_slippageAdjustedAmou=slippageAdjustedAmounts[Field.OUTPUT])===null||_slippageAdjustedAmou===void 0?void 0:_slippageAdjustedAmou.toSignificant(6),\" \",trade.outputAmount.currency.symbol]}),' or the transaction will revert.']}):/*#__PURE__*/_jsxs(TYPE.italic,{textAlign:\"left\",style:{width:'100%'},children:[\"Input is estimated. You will sell at most \",/*#__PURE__*/_jsxs(\"b\",{children:[(_slippageAdjustedAmou2=slippageAdjustedAmounts[Field.INPUT])===null||_slippageAdjustedAmou2===void 0?void 0:_slippageAdjustedAmou2.toSignificant(6),\" \",trade.inputAmount.currency.symbol]}),' or the transaction will revert.']})}),recipient!==null?/*#__PURE__*/_jsx(AutoColumn,{justify:\"flex-start\",gap:\"sm\",style:{padding:'12px 0 0 0px'},children:/*#__PURE__*/_jsxs(TYPE.main,{children:[\"Output will be sent to\",' ',/*#__PURE__*/_jsx(\"b\",{title:recipient,children:isAddress(recipient)?shortenAddress(recipient):recipient})]})}):null]});}","map":{"version":3,"names":["TradeType","React","useContext","useMemo","AlertTriangle","ArrowDown","Text","ThemeContext","Field","TYPE","isAddress","shortenAddress","computeSlippageAdjustedAmounts","computeTradePriceBreakdown","warningSeverity","ButtonPrimary","AutoColumn","CurrencyLogo","RowBetween","RowFixed","MoolaDirectTrade","SwapShowAcceptChanges","TruncatedText","jsx","_jsx","jsxs","_jsxs","SwapModalHeader","_ref","_slippageAdjustedAmou","_slippageAdjustedAmou2","trade","allowedSlippage","recipient","showAcceptChanges","onAcceptChanges","slippageAdjustedAmounts","priceImpactWithoutFee","priceImpactSeverity","theme","gap","style","marginTop","children","align","currency","inputAmount","size","marginRight","fontSize","fontWeight","color","tradeType","EXACT_OUTPUT","primary1","toSignificant","marginLeft","symbol","text2","minWidth","outputAmount","red1","EXACT_INPUT","justify","main","padding","width","borderRadius","onClick","italic","textAlign","OUTPUT","INPUT","title"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/swap/SwapModalHeader.tsx"],"sourcesContent":["import { Trade, TradeType } from '@ubeswap/sdk'\nimport React, { useContext, useMemo } from 'react'\nimport { AlertTriangle, ArrowDown } from 'react-feather'\nimport { Text } from 'rebass'\nimport { ThemeContext } from 'styled-components'\n\nimport { Field } from '../../state/swap/actions'\nimport { TYPE } from '../../theme'\nimport { isAddress, shortenAddress } from '../../utils'\nimport { computeSlippageAdjustedAmounts, computeTradePriceBreakdown, warningSeverity } from '../../utils/prices'\nimport { ButtonPrimary } from '../Button'\nimport { AutoColumn } from '../Column'\nimport CurrencyLogo from '../CurrencyLogo'\nimport { RowBetween, RowFixed } from '../Row'\nimport { MoolaDirectTrade } from './routing/moola/MoolaDirectTrade'\nimport { SwapShowAcceptChanges, TruncatedText } from './styleds'\n\nexport default function SwapModalHeader({\n  trade,\n  allowedSlippage,\n  recipient,\n  showAcceptChanges,\n  onAcceptChanges,\n}: {\n  trade: Trade\n  allowedSlippage: number\n  recipient: string | null\n  showAcceptChanges: boolean\n  onAcceptChanges: () => void\n}) {\n  const slippageAdjustedAmounts = useMemo(\n    () => computeSlippageAdjustedAmounts(trade, allowedSlippage),\n    [trade, allowedSlippage]\n  )\n  const { priceImpactWithoutFee } = useMemo(() => computeTradePriceBreakdown(trade), [trade])\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee)\n\n  const theme = useContext(ThemeContext)\n\n  return (\n    <AutoColumn gap={'md'} style={{ marginTop: '20px' }}>\n      <RowBetween align=\"flex-end\">\n        <RowFixed gap={'0px'}>\n          <CurrencyLogo currency={trade.inputAmount.currency} size={'24px'} style={{ marginRight: '12px' }} />\n          <TruncatedText\n            fontSize={24}\n            fontWeight={500}\n            color={showAcceptChanges && trade.tradeType === TradeType.EXACT_OUTPUT ? theme.primary1 : ''}\n          >\n            {trade.inputAmount.toSignificant(6)}\n          </TruncatedText>\n        </RowFixed>\n        <RowFixed gap={'0px'}>\n          <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\n            {trade.inputAmount.currency.symbol}\n          </Text>\n        </RowFixed>\n      </RowBetween>\n      <RowFixed>\n        <ArrowDown size=\"16\" color={theme.text2} style={{ marginLeft: '4px', minWidth: '16px' }} />\n      </RowFixed>\n      <RowBetween align=\"flex-end\">\n        <RowFixed gap={'0px'}>\n          <CurrencyLogo currency={trade.outputAmount.currency} size={'24px'} style={{ marginRight: '12px' }} />\n          <TruncatedText\n            fontSize={24}\n            fontWeight={500}\n            color={\n              priceImpactSeverity > 2\n                ? theme.red1\n                : showAcceptChanges && trade.tradeType === TradeType.EXACT_INPUT\n                ? theme.primary1\n                : ''\n            }\n          >\n            {trade.outputAmount.toSignificant(6)}\n          </TruncatedText>\n        </RowFixed>\n        <RowFixed gap={'0px'}>\n          <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\n            {trade.outputAmount.currency.symbol}\n          </Text>\n        </RowFixed>\n      </RowBetween>\n      {showAcceptChanges ? (\n        <SwapShowAcceptChanges justify=\"flex-start\" gap={'0px'}>\n          <RowBetween>\n            <RowFixed>\n              <AlertTriangle size={20} style={{ marginRight: '8px', minWidth: 24 }} />\n              <TYPE.main color={theme.primary1}> Price Updated</TYPE.main>\n            </RowFixed>\n            <ButtonPrimary\n              style={{ padding: '.5rem', width: 'fit-content', fontSize: '0.825rem', borderRadius: '12px' }}\n              onClick={onAcceptChanges}\n            >\n              Accept\n            </ButtonPrimary>\n          </RowBetween>\n        </SwapShowAcceptChanges>\n      ) : null}\n      {!(trade instanceof MoolaDirectTrade) && (\n        <AutoColumn justify=\"flex-start\" gap=\"sm\" style={{ padding: '12px 0 0 0px' }}>\n          {trade.tradeType === TradeType.EXACT_INPUT ? (\n            <TYPE.italic textAlign=\"left\" style={{ width: '100%' }}>\n              {`Output is estimated. You will receive at least `}\n              <b>\n                {slippageAdjustedAmounts[Field.OUTPUT]?.toSignificant(6)} {trade.outputAmount.currency.symbol}\n              </b>\n              {' or the transaction will revert.'}\n            </TYPE.italic>\n          ) : (\n            <TYPE.italic textAlign=\"left\" style={{ width: '100%' }}>\n              {`Input is estimated. You will sell at most `}\n              <b>\n                {slippageAdjustedAmounts[Field.INPUT]?.toSignificant(6)} {trade.inputAmount.currency.symbol}\n              </b>\n              {' or the transaction will revert.'}\n            </TYPE.italic>\n          )}\n        </AutoColumn>\n      )}\n      {recipient !== null ? (\n        <AutoColumn justify=\"flex-start\" gap=\"sm\" style={{ padding: '12px 0 0 0px' }}>\n          <TYPE.main>\n            Output will be sent to{' '}\n            <b title={recipient}>{isAddress(recipient) ? shortenAddress(recipient) : recipient}</b>\n          </TYPE.main>\n        </AutoColumn>\n      ) : null}\n    </AutoColumn>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}