{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst react_1 = require(\"react\");\nconst default_1 = __importDefault(require(\"../theme/default\"));\nconst types_1 = require(\"../types\");\nconst use_celo_1 = require(\"../use-celo\");\nclass ModeState {\n  constructor() {\n    this._mode = types_1.Mode.Light;\n    this.listeners = [];\n  }\n  set mode(mode) {\n    if (this._mode === mode) return;\n    this._mode = mode;\n    this.listeners.forEach(cb => cb(this._mode));\n  }\n  get mode() {\n    return this._mode;\n  }\n  addEventListener(listener) {\n    this.listeners.push(listener);\n  }\n  removeEventListener(listener) {\n    this.listeners = this.listeners.filter(x => x !== listener);\n  }\n  removeEventListeners() {\n    this.listeners = [];\n  }\n}\nconst state = new ModeState();\n// const COLOR_SCHEME_QUERY = '(prefers-color-scheme: dark)';\nconst DARK_CLASSES = ['dark', 'tw-dark'];\nfunction hasDarkClasses(elem) {\n  // const hasDarkMedia = window.matchMedia(COLOR_SCHEME_QUERY).matches;\n  return DARK_CLASSES.some(cls => elem.classList.contains(cls));\n}\nif (typeof MutationObserver !== 'undefined') {\n  const body = document.getElementsByTagName('body');\n  const html = document.getElementsByTagName('html');\n  const elems = [...body, ...html];\n  const mutationCallback = () => {\n    const isDark = elems.some(hasDarkClasses);\n    state.mode = isDark ? types_1.Mode.Dark : types_1.Mode.Light;\n  };\n  const observer = new MutationObserver(mutationCallback);\n  mutationCallback();\n  elems.forEach(elem => {\n    observer.observe(elem, {\n      subtree: false,\n      childList: false,\n      attributeFilter: ['class']\n    });\n  });\n}\nfunction useTheme() {\n  const {\n    theme\n  } = (0, use_celo_1.useCeloInternal)();\n  const [mode, setMode] = (0, react_1.useState)(state.mode);\n  (0, react_1.useEffect)(() => {\n    const cb = m => setMode(m);\n    state.addEventListener(cb);\n    return () => {\n      state.removeEventListener(cb);\n    };\n  }, []);\n  return theme || default_1.default[mode];\n}\nexports.default = useTheme;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","default_1","types_1","use_celo_1","ModeState","constructor","_mode","Mode","Light","listeners","mode","forEach","cb","addEventListener","listener","push","removeEventListener","filter","x","removeEventListeners","state","DARK_CLASSES","hasDarkClasses","elem","some","cls","classList","contains","MutationObserver","body","document","getElementsByTagName","html","elems","mutationCallback","isDark","Dark","observer","observe","subtree","childList","attributeFilter","useTheme","theme","useCeloInternal","setMode","useState","useEffect","m","default"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@celo/react-celo/lib/hooks/use-theme.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = require(\"react\");\nconst default_1 = __importDefault(require(\"../theme/default\"));\nconst types_1 = require(\"../types\");\nconst use_celo_1 = require(\"../use-celo\");\nclass ModeState {\n    constructor() {\n        this._mode = types_1.Mode.Light;\n        this.listeners = [];\n    }\n    set mode(mode) {\n        if (this._mode === mode)\n            return;\n        this._mode = mode;\n        this.listeners.forEach((cb) => cb(this._mode));\n    }\n    get mode() {\n        return this._mode;\n    }\n    addEventListener(listener) {\n        this.listeners.push(listener);\n    }\n    removeEventListener(listener) {\n        this.listeners = this.listeners.filter((x) => x !== listener);\n    }\n    removeEventListeners() {\n        this.listeners = [];\n    }\n}\nconst state = new ModeState();\n// const COLOR_SCHEME_QUERY = '(prefers-color-scheme: dark)';\nconst DARK_CLASSES = ['dark', 'tw-dark'];\nfunction hasDarkClasses(elem) {\n    // const hasDarkMedia = window.matchMedia(COLOR_SCHEME_QUERY).matches;\n    return DARK_CLASSES.some((cls) => elem.classList.contains(cls));\n}\nif (typeof MutationObserver !== 'undefined') {\n    const body = document.getElementsByTagName('body');\n    const html = document.getElementsByTagName('html');\n    const elems = [...body, ...html];\n    const mutationCallback = () => {\n        const isDark = elems.some(hasDarkClasses);\n        state.mode = isDark ? types_1.Mode.Dark : types_1.Mode.Light;\n    };\n    const observer = new MutationObserver(mutationCallback);\n    mutationCallback();\n    elems.forEach((elem) => {\n        observer.observe(elem, {\n            subtree: false,\n            childList: false,\n            attributeFilter: ['class'],\n        });\n    });\n}\nfunction useTheme() {\n    const { theme } = (0, use_celo_1.useCeloInternal)();\n    const [mode, setMode] = (0, react_1.useState)(state.mode);\n    (0, react_1.useEffect)(() => {\n        const cb = (m) => setMode(m);\n        state.addEventListener(cb);\n        return () => {\n            state.removeEventListener(cb);\n        };\n    }, []);\n    return theme || default_1.default[mode];\n}\nexports.default = useTheme;\n//# sourceMappingURL=use-theme.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}