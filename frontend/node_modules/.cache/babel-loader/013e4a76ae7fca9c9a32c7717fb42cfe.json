{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{diffTokenLists}from'@uniswap/token-lists';import React,{useCallback,useMemo}from'react';import ReactGA from'react-ga';import{useDispatch}from'react-redux';import{Text}from'rebass';import styled from'styled-components';import{useRemovePopup}from'../../state/application/hooks';import{acceptListUpdate}from'../../state/lists/actions';import{TYPE}from'../../theme';import listVersionLabel from'../../utils/listVersionLabel';import{ButtonSecondary}from'../Button';import{AutoColumn}from'../Column';import{AutoRow}from'../Row';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const ChangesList=styled.ul(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-height: 400px;\\n  overflow: auto;\\n\"])));export default function ListUpdatePopup(_ref){let{popKey,listUrl,oldList,newList,auto}=_ref;const removePopup=useRemovePopup();const removeThisPopup=useCallback(()=>removePopup(popKey),[popKey,removePopup]);const dispatch=useDispatch();const handleAcceptUpdate=useCallback(()=>{if(auto)return;ReactGA.event({category:'Lists',action:'Update List from Popup',label:listUrl});dispatch(acceptListUpdate(listUrl));removeThisPopup();},[auto,dispatch,listUrl,removeThisPopup]);const{added:tokensAdded,changed:tokensChanged,removed:tokensRemoved}=useMemo(()=>{return diffTokenLists(oldList.tokens,newList.tokens);},[newList.tokens,oldList.tokens]);const numTokensChanged=useMemo(()=>Object.keys(tokensChanged).reduce((memo,chainId)=>memo+Object.keys(tokensChanged[chainId]).length,0),[tokensChanged]);return/*#__PURE__*/_jsx(AutoRow,{children:/*#__PURE__*/_jsx(AutoColumn,{style:{flex:'1'},gap:\"8px\",children:auto?/*#__PURE__*/_jsxs(TYPE.body,{fontWeight:500,children:['The token list',\" \\\"\",oldList.name,\"\\\" \",'has been updated to',' ',/*#__PURE__*/_jsx(\"strong\",{children:listVersionLabel(newList.version)}),\".\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{children:['An update is available for the token list',\" \\\"\",oldList.name,\"\\\" (\",listVersionLabel(oldList.version),\" to \",listVersionLabel(newList.version),\").\"]}),/*#__PURE__*/_jsxs(ChangesList,{children:[tokensAdded.length>0?/*#__PURE__*/_jsxs(\"li\",{children:[tokensAdded.map((token,i)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{title:token.address,children:token.symbol}),i===tokensAdded.length-1?null:', ']},\"\".concat(token.chainId,\"-\").concat(token.address))),' ','added']}):null,tokensRemoved.length>0?/*#__PURE__*/_jsxs(\"li\",{children:[tokensRemoved.map((token,i)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{title:token.address,children:token.symbol}),i===tokensRemoved.length-1?null:', ']},\"\".concat(token.chainId,\"-\").concat(token.address))),' ','removed']}):null,numTokensChanged>0?/*#__PURE__*/_jsxs(\"li\",{children:[numTokensChanged,\" \",'tokens updated']}):null]})]}),/*#__PURE__*/_jsxs(AutoRow,{children:[/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1,marginRight:12},children:/*#__PURE__*/_jsx(ButtonSecondary,{onClick:handleAcceptUpdate,children:'Accept update'})}),/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1},children:/*#__PURE__*/_jsx(ButtonSecondary,{onClick:removeThisPopup,children:'Dismiss'})})]})]})})});}","map":null,"metadata":{},"sourceType":"module"}