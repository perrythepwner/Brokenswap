{"ast":null,"code":"/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/** @file httpprovider.js\n * @authors:\n *   Marek Kotewicz <marek@parity.io>\n *   Marian Oancea\n *   Fabian Vogelsteller <fabian@ethereum.org>\n *   AyanamiTech <ayanami0330@protonmail.com>\n * @date 2015\n */\nvar errors = require('web3-core-helpers').errors;\nvar fetch = require('cross-fetch');\nvar http = require('http');\nvar https = require('https');\n// Apply missing polyfill for IE\nrequire('es6-promise').polyfill();\n// import abortController if abortController is not included in node\nif (typeof global !== \"undefined\" && !global.AbortController) {\n  require('abortcontroller-polyfill/dist/polyfill-patch-fetch');\n}\n/**\n * HttpProvider should be used to send rpc calls over http\n */\nvar HttpProvider = function HttpProvider(host, options) {\n  options = options || {};\n  this.withCredentials = options.withCredentials;\n  this.timeout = options.timeout || 0;\n  this.headers = options.headers;\n  this.agent = options.agent;\n  this.forceGlobalFetch = options.forceGlobalFetch || false;\n  this.connected = false;\n  // keepAlive is true unless explicitly set to false\n  const keepAlive = options.keepAlive !== false;\n  this.host = host || 'http://localhost:8545';\n  if (!this.agent) {\n    if (this.host.substring(0, 5) === \"https\") {\n      this.httpsAgent = new https.Agent({\n        keepAlive\n      });\n    } else {\n      this.httpAgent = new http.Agent({\n        keepAlive\n      });\n    }\n  }\n};\n/**\n * Should be used to make async request\n *\n * @method send\n * @param {Object} payload\n * @param {Function} callback triggered on end with (err, result)\n */\nHttpProvider.prototype.send = function (payload, callback) {\n  var options = {\n    method: 'POST',\n    body: JSON.stringify(payload)\n  };\n  var headers = {};\n  var controller;\n  var fetchFunc = this.forceGlobalFetch ? globalThis.fetch : fetch;\n  if (typeof AbortController !== 'undefined') {\n    controller = new AbortController();\n  } else if (typeof window !== 'undefined' && typeof window.AbortController !== 'undefined') {\n    // Some chrome version doesn't recognize new AbortController(); so we are using it from window instead\n    // https://stackoverflow.com/questions/55718778/why-abortcontroller-is-not-defined\n    controller = new window.AbortController();\n  }\n  if (typeof controller !== 'undefined') {\n    options.signal = controller.signal;\n  }\n  // the current runtime is node\n  if (typeof XMLHttpRequest === 'undefined') {\n    // https://github.com/node-fetch/node-fetch#custom-agent\n    var agents = {\n      httpsAgent: this.httpsAgent,\n      httpAgent: this.httpAgent\n    };\n    if (this.agent) {\n      agents.httpsAgent = this.agent.https;\n      agents.httpAgent = this.agent.http;\n    }\n    if (this.host.substring(0, 5) === \"https\") {\n      options.agent = agents.httpsAgent;\n    } else {\n      options.agent = agents.httpAgent;\n    }\n  }\n  if (this.headers) {\n    this.headers.forEach(function (header) {\n      headers[header.name] = header.value;\n    });\n  }\n  // Default headers\n  if (!headers['Content-Type']) {\n    headers['Content-Type'] = 'application/json';\n  }\n  // As the Fetch API supports the credentials as following options 'include', 'omit', 'same-origin'\n  // https://developer.mozilla.org/en-US/docs/Web/API/fetch#credentials\n  // To avoid breaking change in 1.x we override this value based on boolean option.\n  if (this.withCredentials) {\n    options.credentials = 'include';\n  } else {\n    options.credentials = 'omit';\n  }\n  options.headers = headers;\n  if (this.timeout > 0 && typeof controller !== 'undefined') {\n    this.timeoutId = setTimeout(function () {\n      controller.abort();\n    }, this.timeout);\n  }\n  var success = function success(response) {\n    if (this.timeoutId !== undefined) {\n      clearTimeout(this.timeoutId);\n    }\n    // Response is a stream data so should be awaited for json response\n    response.json().then(function (data) {\n      callback(null, data);\n    }, function () {\n      response.text().then(function (text) {\n        callback(errors.InvalidResponse(text));\n      }, function () {\n        callback(errors.InvalidResponse(\"\"));\n      });\n    });\n  };\n  var failed = function failed(error) {\n    if (this.timeoutId !== undefined) {\n      clearTimeout(this.timeoutId);\n    }\n    if (error.name === 'AbortError') {\n      callback(errors.ConnectionTimeout(this.timeout));\n      return;\n    }\n    callback(errors.InvalidConnection(this.host, error));\n  };\n  fetchFunc(this.host, options).then(success.bind(this), failed.bind(this));\n};\nHttpProvider.prototype.disconnect = function () {\n  //NO OP\n};\n/**\n * Returns the desired boolean.\n *\n * @method supportsSubscriptions\n * @returns {boolean}\n */\nHttpProvider.prototype.supportsSubscriptions = function () {\n  return false;\n};\nmodule.exports = HttpProvider;","map":{"version":3,"names":["errors","require","fetch","http","https","polyfill","global","AbortController","HttpProvider","host","options","withCredentials","timeout","headers","agent","forceGlobalFetch","connected","keepAlive","substring","httpsAgent","Agent","httpAgent","prototype","send","payload","callback","method","body","JSON","stringify","controller","fetchFunc","globalThis","window","signal","XMLHttpRequest","agents","forEach","header","name","value","credentials","timeoutId","setTimeout","abort","success","response","undefined","clearTimeout","json","then","data","text","InvalidResponse","failed","error","ConnectionTimeout","InvalidConnection","bind","disconnect","supportsSubscriptions","module","exports"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/web3-providers-http/lib/index.js"],"sourcesContent":["/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/** @file httpprovider.js\n * @authors:\n *   Marek Kotewicz <marek@parity.io>\n *   Marian Oancea\n *   Fabian Vogelsteller <fabian@ethereum.org>\n *   AyanamiTech <ayanami0330@protonmail.com>\n * @date 2015\n */\nvar errors = require('web3-core-helpers').errors;\nvar fetch = require('cross-fetch');\nvar http = require('http');\nvar https = require('https');\n// Apply missing polyfill for IE\nrequire('es6-promise').polyfill();\n// import abortController if abortController is not included in node\nif (typeof global !== \"undefined\" && !global.AbortController) {\n    require('abortcontroller-polyfill/dist/polyfill-patch-fetch');\n}\n/**\n * HttpProvider should be used to send rpc calls over http\n */\nvar HttpProvider = function HttpProvider(host, options) {\n    options = options || {};\n    this.withCredentials = options.withCredentials;\n    this.timeout = options.timeout || 0;\n    this.headers = options.headers;\n    this.agent = options.agent;\n    this.forceGlobalFetch = options.forceGlobalFetch || false;\n    this.connected = false;\n    // keepAlive is true unless explicitly set to false\n    const keepAlive = options.keepAlive !== false;\n    this.host = host || 'http://localhost:8545';\n    if (!this.agent) {\n        if (this.host.substring(0, 5) === \"https\") {\n            this.httpsAgent = new https.Agent({ keepAlive });\n        }\n        else {\n            this.httpAgent = new http.Agent({ keepAlive });\n        }\n    }\n};\n/**\n * Should be used to make async request\n *\n * @method send\n * @param {Object} payload\n * @param {Function} callback triggered on end with (err, result)\n */\nHttpProvider.prototype.send = function (payload, callback) {\n    var options = {\n        method: 'POST',\n        body: JSON.stringify(payload)\n    };\n    var headers = {};\n    var controller;\n    var fetchFunc = this.forceGlobalFetch ? globalThis.fetch : fetch;\n    if (typeof AbortController !== 'undefined') {\n        controller = new AbortController();\n    }\n    else if (typeof window !== 'undefined' && typeof window.AbortController !== 'undefined') {\n        // Some chrome version doesn't recognize new AbortController(); so we are using it from window instead\n        // https://stackoverflow.com/questions/55718778/why-abortcontroller-is-not-defined\n        controller = new window.AbortController();\n    }\n    if (typeof controller !== 'undefined') {\n        options.signal = controller.signal;\n    }\n    // the current runtime is node\n    if (typeof XMLHttpRequest === 'undefined') {\n        // https://github.com/node-fetch/node-fetch#custom-agent\n        var agents = { httpsAgent: this.httpsAgent, httpAgent: this.httpAgent };\n        if (this.agent) {\n            agents.httpsAgent = this.agent.https;\n            agents.httpAgent = this.agent.http;\n        }\n        if (this.host.substring(0, 5) === \"https\") {\n            options.agent = agents.httpsAgent;\n        }\n        else {\n            options.agent = agents.httpAgent;\n        }\n    }\n    if (this.headers) {\n        this.headers.forEach(function (header) {\n            headers[header.name] = header.value;\n        });\n    }\n    // Default headers\n    if (!headers['Content-Type']) {\n        headers['Content-Type'] = 'application/json';\n    }\n    // As the Fetch API supports the credentials as following options 'include', 'omit', 'same-origin'\n    // https://developer.mozilla.org/en-US/docs/Web/API/fetch#credentials\n    // To avoid breaking change in 1.x we override this value based on boolean option.\n    if (this.withCredentials) {\n        options.credentials = 'include';\n    }\n    else {\n        options.credentials = 'omit';\n    }\n    options.headers = headers;\n    if (this.timeout > 0 && typeof controller !== 'undefined') {\n        this.timeoutId = setTimeout(function () {\n            controller.abort();\n        }, this.timeout);\n    }\n    var success = function (response) {\n        if (this.timeoutId !== undefined) {\n            clearTimeout(this.timeoutId);\n        }\n        // Response is a stream data so should be awaited for json response\n        response\n            .json()\n            .then(function (data) {\n            callback(null, data);\n        }, function () {\n            response\n                .text()\n                .then(function (text) {\n                callback(errors.InvalidResponse(text));\n            }, function () {\n                callback(errors.InvalidResponse(\"\"));\n            });\n        });\n    };\n    var failed = function (error) {\n        if (this.timeoutId !== undefined) {\n            clearTimeout(this.timeoutId);\n        }\n        if (error.name === 'AbortError') {\n            callback(errors.ConnectionTimeout(this.timeout));\n            return;\n        }\n        callback(errors.InvalidConnection(this.host, error));\n    };\n    fetchFunc(this.host, options)\n        .then(success.bind(this), failed.bind(this));\n};\nHttpProvider.prototype.disconnect = function () {\n    //NO OP\n};\n/**\n * Returns the desired boolean.\n *\n * @method supportsSubscriptions\n * @returns {boolean}\n */\nHttpProvider.prototype.supportsSubscriptions = function () {\n    return false;\n};\nmodule.exports = HttpProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}