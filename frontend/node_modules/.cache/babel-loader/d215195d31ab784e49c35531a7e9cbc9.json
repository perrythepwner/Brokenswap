{"ast":null,"code":"const request = require(\"xhr-request-promise\");\nconst genPayload = (() => {\n  let nextId = 0;\n  return (method, params) => ({\n    jsonrpc: \"2.0\",\n    id: ++nextId,\n    method: method,\n    params: params\n  });\n})();\nconst send = url => (method, params) => {\n  return request(url, {\n    method: \"POST\",\n    contentType: \"application/json-rpc\",\n    body: JSON.stringify(genPayload(method, params))\n  }).then(answer => {\n    var resp = JSON.parse(answer); // todo: use njsp?\n    if (resp.error) {\n      throw new Error(resp.error.message);\n    } else {\n      return resp.result;\n    }\n  }).catch(e => {\n    return {\n      error: e.toString()\n    };\n  });\n};\nmodule.exports = send;","map":null,"metadata":{},"sourceType":"script"}