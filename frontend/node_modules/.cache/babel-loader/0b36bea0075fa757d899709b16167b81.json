{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRecent = exports.walletToProvider = void 0;\nconst react_1 = require(\"react\");\nconst react_device_detect_1 = require(\"react-device-detect\");\nconst constants_1 = require(\"../constants\");\nconst local_storage_1 = require(\"../utils/local-storage\");\nconst sort_1 = require(\"../utils/sort\");\nfunction walletToProvider(wallet) {\n  return {\n    name: wallet.name,\n    walletConnectId: wallet.id,\n    type: constants_1.WalletTypes.WalletConnect,\n    description: wallet.description || 'Missing description in registry',\n    icon: wallet.logos.md,\n    canConnect: () => true,\n    showInList: () => react_device_detect_1.isMobile ? Object.values(wallet.mobile).some(Boolean) : true,\n    listPriority: () => constants_1.Priorities.Default,\n    installURL: wallet.homepage,\n    supportedPlatforms: [constants_1.Platform.Mobile]\n  };\n}\nexports.walletToProvider = walletToProvider;\nfunction getRecent() {\n  const listOfRecentWalletTypeIds = (0, local_storage_1.getRecentWallets)();\n  // create mapping by the identifier we saved so its easy to get the recent provider from the id\n  const providersByTypeId = Object.values(constants_1.PROVIDERS).reduce((collection, current) => {\n    const unifiedID = current.type === constants_1.WalletTypes.WalletConnect ? \"\".concat(current.type, \":\").concat(current.walletConnectId) : current.type;\n    collection.set(unifiedID, current);\n    return collection;\n  }, new Map());\n  // map over type-ids and get the actual provider\n  const recentProviders = listOfRecentWalletTypeIds.map(unifiedID => {\n    const provider = providersByTypeId.get(unifiedID);\n    return provider;\n  }).filter(p => p !== undefined);\n  return {\n    providers: recentProviders,\n    // return as a set to make it easy to filter these out of the default list\n    ids: new Set(listOfRecentWalletTypeIds)\n  };\n}\nexports.getRecent = getRecent;\nfunction useProviders() {\n  let wallets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let includedDefaultProviders = arguments.length > 1 ? arguments[1] : undefined;\n  let sort = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : sort_1.defaultProviderSort;\n  let search = arguments.length > 3 ? arguments[3] : undefined;\n  const record = (0, react_1.useMemo)(() => Object.assign(Object.assign({}, includedDefaultProviders.reduce((all, current) => {\n    all[current] = constants_1.PROVIDERS[current];\n    return all;\n  }, {})), wallets.reduce((acc, wallet) => {\n    acc[wallet.id] = walletToProvider(wallet);\n    return acc;\n  }, {})), [wallets, includedDefaultProviders]);\n  const providers = (0, react_1.useMemo)(() => {\n    return Object.entries(record).filter(_ref => {\n      let [providerKey, provider] = _ref;\n      return provider.showInList() && (!search || providerKey.toLowerCase().includes(search.toLowerCase()));\n    }).sort((_ref2, _ref3) => {\n      let [, a] = _ref2;\n      let [, b] = _ref3;\n      return sort(a, b);\n    });\n  }, [record, sort, search]);\n  if (!providers.length) {\n    return [];\n  }\n  const recentlyUsedProviders = getRecent();\n  if (recentlyUsedProviders.ids.size !== 0) {\n    const recent = recentlyUsedProviders.providers.map(provider => {\n      return [provider.name, provider];\n    });\n    const rest = providers.filter(_ref4 => {\n      let [_, provider] = _ref4;\n      const unifiedID = provider.type === constants_1.WalletTypes.WalletConnect ? \"\".concat(provider.type, \":\").concat(provider.walletConnectId) : provider.type;\n      return !recentlyUsedProviders.ids.has(unifiedID);\n    });\n    return [[constants_1.Priorities.Recent, recent], [constants_1.Priorities.Default, rest]];\n  }\n  return [[constants_1.Priorities.Default, providers]];\n}\nexports.default = useProviders;","map":{"version":3,"names":["Object","defineProperty","exports","value","getRecent","walletToProvider","react_1","require","react_device_detect_1","constants_1","local_storage_1","sort_1","wallet","name","walletConnectId","id","type","WalletTypes","WalletConnect","description","icon","logos","md","canConnect","showInList","isMobile","values","mobile","some","Boolean","listPriority","Priorities","Default","installURL","homepage","supportedPlatforms","Platform","Mobile","listOfRecentWalletTypeIds","getRecentWallets","providersByTypeId","PROVIDERS","reduce","collection","current","unifiedID","concat","set","Map","recentProviders","map","provider","get","filter","p","undefined","providers","ids","Set","useProviders","wallets","arguments","length","includedDefaultProviders","sort","defaultProviderSort","search","record","useMemo","assign","all","acc","entries","_ref","providerKey","toLowerCase","includes","_ref2","_ref3","a","b","recentlyUsedProviders","size","recent","rest","_ref4","_","has","Recent","default"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@celo/react-celo/lib/hooks/use-providers.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRecent = exports.walletToProvider = void 0;\nconst react_1 = require(\"react\");\nconst react_device_detect_1 = require(\"react-device-detect\");\nconst constants_1 = require(\"../constants\");\nconst local_storage_1 = require(\"../utils/local-storage\");\nconst sort_1 = require(\"../utils/sort\");\nfunction walletToProvider(wallet) {\n    return {\n        name: wallet.name,\n        walletConnectId: wallet.id,\n        type: constants_1.WalletTypes.WalletConnect,\n        description: wallet.description || 'Missing description in registry',\n        icon: wallet.logos.md,\n        canConnect: () => true,\n        showInList: () => react_device_detect_1.isMobile ? Object.values(wallet.mobile).some(Boolean) : true,\n        listPriority: () => constants_1.Priorities.Default,\n        installURL: wallet.homepage,\n        supportedPlatforms: [constants_1.Platform.Mobile],\n    };\n}\nexports.walletToProvider = walletToProvider;\nfunction getRecent() {\n    const listOfRecentWalletTypeIds = (0, local_storage_1.getRecentWallets)();\n    // create mapping by the identifier we saved so its easy to get the recent provider from the id\n    const providersByTypeId = Object.values(constants_1.PROVIDERS).reduce((collection, current) => {\n        const unifiedID = current.type === constants_1.WalletTypes.WalletConnect\n            ? `${current.type}:${current.walletConnectId}`\n            : current.type;\n        collection.set(unifiedID, current);\n        return collection;\n    }, new Map());\n    // map over type-ids and get the actual provider\n    const recentProviders = listOfRecentWalletTypeIds\n        .map((unifiedID) => {\n        const provider = providersByTypeId.get(unifiedID);\n        return provider;\n    })\n        .filter((p) => p !== undefined);\n    return {\n        providers: recentProviders,\n        // return as a set to make it easy to filter these out of the default list\n        ids: new Set(listOfRecentWalletTypeIds),\n    };\n}\nexports.getRecent = getRecent;\nfunction useProviders(wallets = [], includedDefaultProviders, sort = sort_1.defaultProviderSort, search) {\n    const record = (0, react_1.useMemo)(() => (Object.assign(Object.assign({}, includedDefaultProviders.reduce((all, current) => {\n        all[current] = constants_1.PROVIDERS[current];\n        return all;\n    }, {})), wallets.reduce((acc, wallet) => {\n        acc[wallet.id] = walletToProvider(wallet);\n        return acc;\n    }, {}))), [wallets, includedDefaultProviders]);\n    const providers = (0, react_1.useMemo)(() => {\n        return Object.entries(record)\n            .filter(([providerKey, provider]) => provider.showInList() &&\n            (!search || providerKey.toLowerCase().includes(search.toLowerCase())))\n            .sort(([, a], [, b]) => sort(a, b));\n    }, [record, sort, search]);\n    if (!providers.length) {\n        return [];\n    }\n    const recentlyUsedProviders = getRecent();\n    if (recentlyUsedProviders.ids.size !== 0) {\n        const recent = recentlyUsedProviders.providers.map((provider) => {\n            return [provider.name, provider];\n        });\n        const rest = providers.filter(([_, provider]) => {\n            const unifiedID = provider.type === constants_1.WalletTypes.WalletConnect\n                ? `${provider.type}:${provider.walletConnectId}`\n                : provider.type;\n            return !recentlyUsedProviders.ids.has(unifiedID);\n        });\n        return [\n            [constants_1.Priorities.Recent, recent],\n            [constants_1.Priorities.Default, rest],\n        ];\n    }\n    return [[constants_1.Priorities.Default, providers]];\n}\nexports.default = useProviders;\n//# sourceMappingURL=use-providers.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}