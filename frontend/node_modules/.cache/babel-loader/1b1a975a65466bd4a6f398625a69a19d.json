{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.localStorageAvailable = exports.wipeStorage = exports.clearPreviousConfig = exports.setTypedStorageKey = exports.getTypedStorageKey = exports.getRecentWallets = exports.rememberWallet = void 0;\nconst constants_1 = require(\"../constants\");\nclass MockedLocalStorage {\n  constructor() {\n    this.storage = new Map();\n  }\n  getItem(key) {\n    if (this.storage.has(key)) {\n      this.storage.get(key);\n    }\n    return null;\n  }\n  key(index) {\n    if (index < 0 || index >= this.length) {\n      return null;\n    }\n    let i = 0;\n    for (const value of this.storage.values()) {\n      if (i === index) {\n        return value;\n      }\n      i += 1;\n    }\n    return null;\n  }\n  setItem(key, value) {\n    this.storage.set(key, value);\n  }\n  removeItem(key) {\n    this.storage.delete(key);\n  }\n  clear() {\n    this.storage.clear();\n  }\n  get length() {\n    return this.storage.size;\n  }\n}\nconst localStorage = typeof window === 'undefined' ? new MockedLocalStorage() : window.localStorage;\nconst MAX_WALLETS = 3;\n// adds wallet to top of stack\n// if stack already has wallet pull to top\nfunction rememberWallet(type, id) {\n  const unifiedID = id ? \"\".concat(type, \":\").concat(id) : type;\n  const stack = getRecentWallets();\n  const index = stack.indexOf(unifiedID);\n  if (index > -1) {\n    stack.splice(index, 1);\n  }\n  const newLength = stack.unshift(unifiedID);\n  if (newLength > MAX_WALLETS) {\n    // remove oldest\n    stack.pop();\n  }\n  const serialized = JSON.stringify(stack);\n  localStorage.setItem(constants_1.localStorageKeys.lastUsedWallets, serialized);\n}\nexports.rememberWallet = rememberWallet;\nfunction getRecentWallets() {\n  const raw = localStorage.getItem(constants_1.localStorageKeys.lastUsedWallets);\n  if (!raw) {\n    return [];\n  }\n  const stack = JSON.parse(raw);\n  return stack;\n}\nexports.getRecentWallets = getRecentWallets;\nfunction getTypedStorageKey(key) {\n  const item = localStorage.getItem(key);\n  if (key === constants_1.localStorageKeys.lastUsedIndex && item) {\n    return Number(item);\n  }\n  if (item) {\n    return item;\n  }\n  return null;\n}\nexports.getTypedStorageKey = getTypedStorageKey;\nfunction setTypedStorageKey(key, value) {\n  localStorage.setItem(key, value.toString());\n}\nexports.setTypedStorageKey = setTypedStorageKey;\nfunction clearPreviousConfig() {\n  Object.values(constants_1.localStorageKeys).forEach(val => {\n    if (val === constants_1.localStorageKeys.lastUsedWalletId) return;\n    if (val === constants_1.localStorageKeys.lastUsedWalletType) return;\n    if (val === constants_1.localStorageKeys.lastUsedWallets) return;\n    localStorage.removeItem(val);\n  });\n}\nexports.clearPreviousConfig = clearPreviousConfig;\nfunction wipeStorage() {\n  localStorage.clear();\n}\nexports.wipeStorage = wipeStorage;\nfunction localStorageAvailable() {\n  return typeof localStorage !== 'undefined';\n}\nexports.localStorageAvailable = localStorageAvailable;","map":{"version":3,"names":["Object","defineProperty","exports","value","localStorageAvailable","wipeStorage","clearPreviousConfig","setTypedStorageKey","getTypedStorageKey","getRecentWallets","rememberWallet","constants_1","require","MockedLocalStorage","constructor","storage","Map","getItem","key","has","get","index","length","i","values","setItem","set","removeItem","delete","clear","size","localStorage","window","MAX_WALLETS","type","id","unifiedID","concat","stack","indexOf","splice","newLength","unshift","pop","serialized","JSON","stringify","localStorageKeys","lastUsedWallets","raw","parse","item","lastUsedIndex","Number","toString","forEach","val","lastUsedWalletId","lastUsedWalletType"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@celo/react-celo/lib/utils/local-storage.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.localStorageAvailable = exports.wipeStorage = exports.clearPreviousConfig = exports.setTypedStorageKey = exports.getTypedStorageKey = exports.getRecentWallets = exports.rememberWallet = void 0;\nconst constants_1 = require(\"../constants\");\nclass MockedLocalStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    getItem(key) {\n        if (this.storage.has(key)) {\n            this.storage.get(key);\n        }\n        return null;\n    }\n    key(index) {\n        if (index < 0 || index >= this.length) {\n            return null;\n        }\n        let i = 0;\n        for (const value of this.storage.values()) {\n            if (i === index) {\n                return value;\n            }\n            i += 1;\n        }\n        return null;\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n    get length() {\n        return this.storage.size;\n    }\n}\nconst localStorage = typeof window === 'undefined'\n    ? new MockedLocalStorage()\n    : window.localStorage;\nconst MAX_WALLETS = 3;\n// adds wallet to top of stack\n// if stack already has wallet pull to top\nfunction rememberWallet(type, id) {\n    const unifiedID = id ? `${type}:${id}` : type;\n    const stack = getRecentWallets();\n    const index = stack.indexOf(unifiedID);\n    if (index > -1) {\n        stack.splice(index, 1);\n    }\n    const newLength = stack.unshift(unifiedID);\n    if (newLength > MAX_WALLETS) {\n        // remove oldest\n        stack.pop();\n    }\n    const serialized = JSON.stringify(stack);\n    localStorage.setItem(constants_1.localStorageKeys.lastUsedWallets, serialized);\n}\nexports.rememberWallet = rememberWallet;\nfunction getRecentWallets() {\n    const raw = localStorage.getItem(constants_1.localStorageKeys.lastUsedWallets);\n    if (!raw) {\n        return [];\n    }\n    const stack = JSON.parse(raw);\n    return stack;\n}\nexports.getRecentWallets = getRecentWallets;\nfunction getTypedStorageKey(key) {\n    const item = localStorage.getItem(key);\n    if (key === constants_1.localStorageKeys.lastUsedIndex && item) {\n        return Number(item);\n    }\n    if (item) {\n        return item;\n    }\n    return null;\n}\nexports.getTypedStorageKey = getTypedStorageKey;\nfunction setTypedStorageKey(key, value) {\n    localStorage.setItem(key, value.toString());\n}\nexports.setTypedStorageKey = setTypedStorageKey;\nfunction clearPreviousConfig() {\n    Object.values(constants_1.localStorageKeys).forEach((val) => {\n        if (val === constants_1.localStorageKeys.lastUsedWalletId)\n            return;\n        if (val === constants_1.localStorageKeys.lastUsedWalletType)\n            return;\n        if (val === constants_1.localStorageKeys.lastUsedWallets)\n            return;\n        localStorage.removeItem(val);\n    });\n}\nexports.clearPreviousConfig = clearPreviousConfig;\nfunction wipeStorage() {\n    localStorage.clear();\n}\nexports.wipeStorage = wipeStorage;\nfunction localStorageAvailable() {\n    return typeof localStorage !== 'undefined';\n}\nexports.localStorageAvailable = localStorageAvailable;\n//# sourceMappingURL=local-storage.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}