{"ast":null,"code":"\"use strict\";\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.linkedListChanges = exports.linkedListChange = exports.intersection = exports.notEmpty = exports.zeroRange = exports.zip3 = exports.zip = void 0;\nvar address_1 = require(\"./address\");\nfunction zip(fn, as, bs) {\n  var len = Math.min(as.length, bs.length);\n  var res = [];\n  for (var i = 0; i < len; i++) {\n    res.push(fn(as[i], bs[i]));\n  }\n  return res;\n}\nexports.zip = zip;\nfunction zip3(as, bs, cs) {\n  var len = Math.min(as.length, bs.length, cs.length);\n  var res = [];\n  for (var i = 0; i < len; i++) {\n    res.push([as[i], bs[i], cs[i]]);\n  }\n  return res;\n}\nexports.zip3 = zip3;\nfunction zeroRange(to) {\n  return Array.from(Array(to).keys());\n}\nexports.zeroRange = zeroRange;\n// https://stackoverflow.com/questions/43118692/typescript-filter-out-nulls-from-an-array\nfunction notEmpty(value) {\n  return value !== null && value !== undefined;\n}\nexports.notEmpty = notEmpty;\nfunction intersection(arrays) {\n  if (arrays.length === 0) {\n    return [];\n  }\n  var sets = arrays.map(function (array) {\n    return new Set(array);\n  });\n  var res = [];\n  var _loop_1 = function _loop_1(elem) {\n    if (sets.every(function (set) {\n      return set.has(elem);\n    })) {\n      res.push(elem);\n    }\n  };\n  for (var _i = 0, _a = arrays[0]; _i < _a.length; _i++) {\n    var elem = _a[_i];\n    _loop_1(elem);\n  }\n  return res;\n}\nexports.intersection = intersection;\nfunction upsert(sortedList, change, comparator) {\n  var oldIdx = sortedList.findIndex(function (a) {\n    return (0, address_1.eqAddress)(a.address, change.address);\n  });\n  if (oldIdx === -1) {\n    throw new Error('');\n  }\n  sortedList.splice(oldIdx, 1);\n  var newIdx = sortedList.findIndex(function (a) {\n    return comparator(a.value, change.value);\n  });\n  if (newIdx === -1) {\n    sortedList.push(change);\n    return sortedList.length - 1;\n  } else {\n    sortedList.splice(newIdx, 0, change);\n    return newIdx;\n  }\n}\n// Warning: sortedList is modified\nfunction _linkedListChange(sortedList, change, comparator) {\n  var idx = upsert(sortedList, change, comparator);\n  var greater = idx === 0 ? address_1.NULL_ADDRESS : sortedList[idx - 1].address;\n  var lesser = idx === sortedList.length - 1 ? address_1.NULL_ADDRESS : sortedList[idx + 1].address;\n  return {\n    lesser: lesser,\n    greater: greater\n  };\n}\nfunction linkedListChange(sortedList, change, comparator) {\n  var list = sortedList.concat();\n  var _a = _linkedListChange(list, change, comparator),\n    lesser = _a.lesser,\n    greater = _a.greater;\n  return {\n    lesser: lesser,\n    greater: greater,\n    list: list\n  };\n}\nexports.linkedListChange = linkedListChange;\nfunction linkedListChanges(sortedList, changeList, comparator) {\n  var listClone = __spreadArray([], sortedList, true);\n  var lessers = [];\n  var greaters = [];\n  for (var _i = 0, changeList_1 = changeList; _i < changeList_1.length; _i++) {\n    var it_1 = changeList_1[_i];\n    var _a = _linkedListChange(listClone, it_1, comparator),\n      lesser = _a.lesser,\n      greater = _a.greater;\n    lessers.push(lesser);\n    greaters.push(greater);\n  }\n  return {\n    lessers: lessers,\n    greaters: greaters,\n    list: listClone\n  };\n}\nexports.linkedListChanges = linkedListChanges;","map":{"version":3,"sources":["../src/collections.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.linkedListChanges = exports.linkedListChange = exports.intersection = exports.notEmpty = exports.zeroRange = exports.zip3 = exports.zip = void 0;\nvar address_1 = require(\"./address\");\nfunction zip(fn, as, bs) {\n    var len = Math.min(as.length, bs.length);\n    var res = [];\n    for (var i = 0; i < len; i++) {\n        res.push(fn(as[i], bs[i]));\n    }\n    return res;\n}\nexports.zip = zip;\nfunction zip3(as, bs, cs) {\n    var len = Math.min(as.length, bs.length, cs.length);\n    var res = [];\n    for (var i = 0; i < len; i++) {\n        res.push([as[i], bs[i], cs[i]]);\n    }\n    return res;\n}\nexports.zip3 = zip3;\nfunction zeroRange(to) {\n    return Array.from(Array(to).keys());\n}\nexports.zeroRange = zeroRange;\n// https://stackoverflow.com/questions/43118692/typescript-filter-out-nulls-from-an-array\nfunction notEmpty(value) {\n    return value !== null && value !== undefined;\n}\nexports.notEmpty = notEmpty;\nfunction intersection(arrays) {\n    if (arrays.length === 0) {\n        return [];\n    }\n    var sets = arrays.map(function (array) { return new Set(array); });\n    var res = [];\n    var _loop_1 = function (elem) {\n        if (sets.every(function (set) { return set.has(elem); })) {\n            res.push(elem);\n        }\n    };\n    for (var _i = 0, _a = arrays[0]; _i < _a.length; _i++) {\n        var elem = _a[_i];\n        _loop_1(elem);\n    }\n    return res;\n}\nexports.intersection = intersection;\nfunction upsert(sortedList, change, comparator) {\n    var oldIdx = sortedList.findIndex(function (a) { return (0, address_1.eqAddress)(a.address, change.address); });\n    if (oldIdx === -1) {\n        throw new Error('');\n    }\n    sortedList.splice(oldIdx, 1);\n    var newIdx = sortedList.findIndex(function (a) { return comparator(a.value, change.value); });\n    if (newIdx === -1) {\n        sortedList.push(change);\n        return sortedList.length - 1;\n    }\n    else {\n        sortedList.splice(newIdx, 0, change);\n        return newIdx;\n    }\n}\n// Warning: sortedList is modified\nfunction _linkedListChange(sortedList, change, comparator) {\n    var idx = upsert(sortedList, change, comparator);\n    var greater = idx === 0 ? address_1.NULL_ADDRESS : sortedList[idx - 1].address;\n    var lesser = idx === sortedList.length - 1 ? address_1.NULL_ADDRESS : sortedList[idx + 1].address;\n    return { lesser: lesser, greater: greater };\n}\nfunction linkedListChange(sortedList, change, comparator) {\n    var list = sortedList.concat();\n    var _a = _linkedListChange(list, change, comparator), lesser = _a.lesser, greater = _a.greater;\n    return { lesser: lesser, greater: greater, list: list };\n}\nexports.linkedListChange = linkedListChange;\nfunction linkedListChanges(sortedList, changeList, comparator) {\n    var listClone = __spreadArray([], sortedList, true);\n    var lessers = [];\n    var greaters = [];\n    for (var _i = 0, changeList_1 = changeList; _i < changeList_1.length; _i++) {\n        var it_1 = changeList_1[_i];\n        var _a = _linkedListChange(listClone, it_1, comparator), lesser = _a.lesser, greater = _a.greater;\n        lessers.push(lesser);\n        greaters.push(greater);\n    }\n    return { lessers: lessers, greaters: greaters, list: listClone };\n}\nexports.linkedListChanges = linkedListChanges;\n//# sourceMappingURL=collections.js.map"]},"metadata":{},"sourceType":"script"}