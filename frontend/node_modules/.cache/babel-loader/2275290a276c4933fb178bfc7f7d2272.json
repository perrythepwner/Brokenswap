{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GovernanceWrapper = exports.hotfixToParams = exports.VoteValue = exports.proposalToParams = exports.ProposalStage = void 0;\nvar address_1 = require(\"@celo/base/lib/address\");\nvar async_1 = require(\"@celo/base/lib/async\");\nvar collections_1 = require(\"@celo/base/lib/collections\");\nvar connect_1 = require(\"@celo/connect\");\nvar fixidity_1 = require(\"@celo/utils/lib/fixidity\");\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nvar BaseWrapper_1 = require(\"./BaseWrapper\");\nvar BaseWrapperForGoverning_1 = require(\"./BaseWrapperForGoverning\");\nvar ProposalStage;\n(function (ProposalStage) {\n  ProposalStage[\"None\"] = \"None\";\n  ProposalStage[\"Queued\"] = \"Queued\";\n  ProposalStage[\"Approval\"] = \"Approval\";\n  ProposalStage[\"Referendum\"] = \"Referendum\";\n  ProposalStage[\"Execution\"] = \"Execution\";\n  ProposalStage[\"Expiration\"] = \"Expiration\";\n})(ProposalStage = exports.ProposalStage || (exports.ProposalStage = {}));\nvar proposalToParams = function proposalToParams(proposal, descriptionURL) {\n  var data = proposal.map(function (tx) {\n    return (0, address_1.hexToBuffer)(tx.input);\n  });\n  return [proposal.map(function (tx) {\n    return tx.value;\n  }), proposal.map(function (tx) {\n    return tx.to;\n  }), (0, BaseWrapper_1.bufferToSolidityBytes)(Buffer.concat(data)), data.map(function (inp) {\n    return inp.length;\n  }), descriptionURL];\n};\nexports.proposalToParams = proposalToParams;\nvar VoteValue;\n(function (VoteValue) {\n  VoteValue[\"None\"] = \"None\";\n  VoteValue[\"Abstain\"] = \"Abstain\";\n  VoteValue[\"No\"] = \"No\";\n  VoteValue[\"Yes\"] = \"Yes\";\n})(VoteValue = exports.VoteValue || (exports.VoteValue = {}));\nvar hotfixToParams = function hotfixToParams(proposal, salt) {\n  var p = (0, exports.proposalToParams)(proposal, ''); // no description URL for hotfixes\n  return [p[0], p[1], p[2], p[3], (0, address_1.bufferToHex)(salt)];\n};\nexports.hotfixToParams = hotfixToParams;\nvar ZERO_BN = new bignumber_js_1.default(0);\n/**\n * Contract managing voting for governance proposals.\n */\nvar GovernanceWrapper = /** @class */function (_super) {\n  __extends(GovernanceWrapper, _super);\n  function GovernanceWrapper() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * Querying number of possible concurrent proposals.\n     * @returns Current number of possible concurrent proposals.\n     */\n    _this.concurrentProposals = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.concurrentProposals, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query time of last proposal dequeue\n     * @returns Time of last dequeue\n     */\n    _this.lastDequeue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.lastDequeue, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query proposal dequeue frequency.\n     * @returns Current proposal dequeue frequency in seconds.\n     */\n    _this.dequeueFrequency = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.dequeueFrequency, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query minimum deposit required to make a proposal.\n     * @returns Current minimum deposit.\n     */\n    _this.minDeposit = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minDeposit, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query queue expiry parameter.\n     * @return The number of seconds a proposal can stay in the queue before expiring.\n     */\n    _this.queueExpiry = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.queueExpiry, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns whether or not a particular account is voting on proposals.\n     * @param account The address of the account.\n     * @returns Whether or not the account is voting on proposals.\n     */\n    _this.isVoting = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isVoting);\n    /**\n     * Returns the metadata associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.getProposalMetadata = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposal, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) {\n      return {\n        proposer: res[0],\n        deposit: (0, BaseWrapper_1.valueToBigNumber)(res[1]),\n        timestamp: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n        transactionCount: (0, BaseWrapper_1.valueToInt)(res[3]),\n        descriptionURL: res[4]\n      };\n    });\n    /**\n     * Returns the transaction at the given index associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     * @param txIndex Transaction index\n     */\n    _this.getProposalTransaction = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposalTransaction, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString, BaseWrapper_1.valueToString), function (res) {\n      return {\n        value: res[0],\n        to: res[1],\n        input: (0, BaseWrapper_1.solidityBytesToString)(res[2])\n      };\n    });\n    /**\n     * Returns whether a given proposal is approved.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.isApproved = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isApproved, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns whether a dequeued proposal is expired.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.isDequeuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isDequeuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns whether a dequeued proposal is expired.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.isQueuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the approver address for proposals and hotfixes.\n     */\n    _this.getApprover = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.approver);\n    /**\n     * Returns the approver multisig contract for proposals and hotfixes.\n     */\n    _this.getApproverMultisig = function () {\n      return _this.getApprover().then(function (address) {\n        return _this.contracts.getMultiSig(address);\n      });\n    };\n    _this.getProposalStage = function (proposalID) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var queue, existsInQueue, expired, res;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4 /*yield*/, this.getQueue()];\n            case 1:\n              queue = _a.sent();\n              existsInQueue = queue.find(function (u) {\n                return u.proposalID === proposalID;\n              }) !== undefined;\n              if (!existsInQueue) return [3 /*break*/, 3];\n              return [4 /*yield*/, this.isQueuedProposalExpired(proposalID)];\n            case 2:\n              expired = _a.sent();\n              return [2 /*return*/, expired ? ProposalStage.Expiration : ProposalStage.Queued];\n            case 3:\n              return [4 /*yield*/, this.contract.methods.getProposalStage((0, BaseWrapper_1.valueToString)(proposalID)).call()];\n            case 4:\n              res = _a.sent();\n              return [2 /*return*/, Object.keys(ProposalStage)[(0, BaseWrapper_1.valueToInt)(res)]];\n          }\n        });\n      });\n    };\n    /**\n     * Returns whether a given proposal is passing relative to the constitution's threshold.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.isProposalPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isProposalPassing, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Withdraws refunded proposal deposits.\n     */\n    _this.withdraw = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.withdraw);\n    /**\n     * Submits a new governance proposal.\n     * @param proposal Governance proposal\n     * @param descriptionURL A URL where further information about the proposal can be viewed\n     */\n    _this.propose = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.propose, exports.proposalToParams);\n    /**\n     * Returns whether a governance proposal exists with the given ID.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.proposalExists = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.proposalExists, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the current upvoted governance proposal ID and applied vote weight (zeroes if none).\n     * @param upvoter Address of upvoter\n     */\n    _this.getUpvoteRecord = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvoteRecord, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.identity), function (o) {\n      return {\n        proposalID: (0, BaseWrapper_1.valueToBigNumber)(o[0]),\n        upvotes: (0, BaseWrapper_1.valueToBigNumber)(o[1])\n      };\n    });\n    /**\n     * Returns whether a given proposal is queued.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.isQueued = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueued, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the value of proposal deposits that have been refunded.\n     * @param proposer Governance proposer address.\n     */\n    _this.getRefundedDeposits = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.refundedDeposits, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.stringIdentity), BaseWrapper_1.valueToBigNumber);\n    /*\n     * Returns the upvotes applied to a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.getUpvotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvotes, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns the yes, no, and abstain votes applied to a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n    _this.getVotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getVoteTotals, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) {\n      var _a;\n      return _a = {}, _a[VoteValue.Yes] = (0, BaseWrapper_1.valueToBigNumber)(res[0]), _a[VoteValue.No] = (0, BaseWrapper_1.valueToBigNumber)(res[1]), _a[VoteValue.Abstain] = (0, BaseWrapper_1.valueToBigNumber)(res[2]), _a;\n    });\n    /**\n     * Returns the proposal queue as list of upvote records.\n     */\n    _this.getQueue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getQueue, undefined, function (arraysObject) {\n      return (0, collections_1.zip)(function (_id, _upvotes) {\n        return {\n          proposalID: (0, BaseWrapper_1.valueToBigNumber)(_id),\n          upvotes: (0, BaseWrapper_1.valueToBigNumber)(_upvotes)\n        };\n      }, arraysObject[0], arraysObject[1]);\n    });\n    /**\n     * Dequeues any queued proposals if `dequeueFrequency` seconds have elapsed since the last dequeue\n     */\n    _this.dequeueProposalsIfReady = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.dequeueProposalsIfReady);\n    _this.revokeVotes = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.revokeVotes);\n    /**\n     * Returns whether a given hotfix has been whitelisted by a given address.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     * @param whitelister address of whitelister\n     */\n    _this.isHotfixWhitelistedBy = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixWhitelistedBy, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex, function (s) {\n      return (0, BaseWrapper_1.identity)(s);\n    }));\n    /**\n     * Returns whether a given hotfix can be passed.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n    _this.isHotfixPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixPassing, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Returns the number of validators required to reach a Byzantine quorum\n     */\n    _this.minQuorumSize = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minQuorumSizeInCurrentSet, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns the number of validators that whitelisted the hotfix\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n    _this.hotfixWhitelistValidatorTally = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.hotfixWhitelistValidatorTally, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix whitelisted by `sender`.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n    _this.whitelistHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.whitelistHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix approved by `sender`.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     * @notice Only the `approver` address will succeed in sending this transaction\n     */\n    _this.approveHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.approveHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix prepared for current epoch if quorum of validators have whitelisted it.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n    _this.prepareHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.prepareHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Executes a given sequence of transactions if the corresponding hash is prepared and approved.\n     * @param hotfix Governance hotfix proposal\n     * @param salt Secret which guarantees uniqueness of hash\n     * @notice keccak256 hash of abi encoded transactions computed on-chain\n     */\n    _this.executeHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.executeHotfix, exports.hotfixToParams);\n    return _this;\n  }\n  /**\n   * Query durations of different stages in proposal lifecycle.\n   * @returns Durations for approval, referendum and execution stages in seconds.\n   */\n  GovernanceWrapper.prototype.stageDurations = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.contract.methods.stageDurations().call()];\n          case 1:\n            res = _b.sent();\n            return [2 /*return*/, (_a = {}, _a[ProposalStage.Referendum] = (0, BaseWrapper_1.valueToBigNumber)(res[1]), _a[ProposalStage.Execution] = (0, BaseWrapper_1.valueToBigNumber)(res[2]), _a)];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal transaction.\n   * @param tx Transaction to determine the constitution for running.\n   */\n  GovernanceWrapper.prototype.getTransactionConstitution = function (tx) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var callSignature, value;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            callSignature = (0, address_1.ensureLeading0x)((0, address_1.trimLeading0x)(tx.input).slice(0, 8));\n            return [4 /*yield*/, this.contract.methods.getConstitution((_a = tx.to) !== null && _a !== void 0 ? _a : address_1.NULL_ADDRESS, callSignature).call()];\n          case 1:\n            value = _b.sent();\n            return [2 /*return*/, (0, fixidity_1.fromFixed)(new bignumber_js_1.default(value))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal.\n   * @param proposal Proposal to determine the constitution for running.\n   */\n  GovernanceWrapper.prototype.getConstitution = function (proposal) {\n    return __awaiter(this, void 0, void 0, function () {\n      var constitution, _i, proposal_1, tx, _a, _b;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            constitution = new bignumber_js_1.default(0);\n            _i = 0, proposal_1 = proposal;\n            _c.label = 1;\n          case 1:\n            if (!(_i < proposal_1.length)) return [3 /*break*/, 4];\n            tx = proposal_1[_i];\n            _b = (_a = bignumber_js_1.default).max;\n            return [4 /*yield*/, this.getTransactionConstitution(tx)];\n          case 2:\n            constitution = _b.apply(_a, [_c.sent(), constitution]);\n            _c.label = 3;\n          case 3:\n            _i++;\n            return [3 /*break*/, 1];\n          case 4:\n            return [2 /*return*/, constitution];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the participation parameters.\n   * @returns The participation parameters.\n   */\n  GovernanceWrapper.prototype.getParticipationParameters = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.contract.methods.getParticipationParameters().call()];\n          case 1:\n            res = _a.sent();\n            return [2 /*return*/, {\n              baseline: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[0])),\n              baselineFloor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[1])),\n              baselineUpdateFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[2])),\n              baselineQuorumFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[3]))\n            }];\n        }\n      });\n    });\n  };\n  // simulates proposal.getSupportWithQuorumPadding\n  GovernanceWrapper.prototype.getSupport = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var participation, quorum, votes, total, lockedGold, networkWeight, required, support;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getParticipationParameters()];\n          case 1:\n            participation = _a.sent();\n            quorum = participation.baseline.times(participation.baselineQuorumFactor);\n            return [4 /*yield*/, this.getVotes(proposalID)];\n          case 2:\n            votes = _a.sent();\n            total = votes.Yes.plus(votes.No).plus(votes.Abstain);\n            return [4 /*yield*/, this.contracts.getLockedGold()\n            // NOTE: this networkWeight is not as governance calculates it,\n            // but we don't have access to proposal.networkWeight\n            ];\n\n          case 3:\n            lockedGold = _a.sent();\n            return [4 /*yield*/, lockedGold.getTotalLockedGold()];\n          case 4:\n            networkWeight = _a.sent();\n            required = networkWeight.times(quorum);\n            support = votes.Yes.div(votes.Yes.plus(votes.No));\n            return [2 /*return*/, {\n              support: support,\n              required: required,\n              total: total\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns current configuration parameters.\n   */\n  GovernanceWrapper.prototype.getConfig = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, Promise.all([this.concurrentProposals(), this.dequeueFrequency(), this.minDeposit(), this.queueExpiry(), this.stageDurations(), this.getParticipationParameters()])];\n          case 1:\n            res = _a.sent();\n            return [2 /*return*/, {\n              concurrentProposals: res[0],\n              dequeueFrequency: res[1],\n              minDeposit: res[2],\n              queueExpiry: res[3],\n              stageDurations: res[4],\n              participationParameters: res[5]\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * @dev Returns human readable configuration of the governance contract\n   * @return GovernanceConfig object\n   */\n  GovernanceWrapper.prototype.getHumanReadableConfig = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var config, stageDurations;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.getConfig()];\n          case 1:\n            config = _b.sent();\n            stageDurations = (_a = {}, _a[ProposalStage.Referendum] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Referendum]), _a[ProposalStage.Execution] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Execution]), _a);\n            return [2 /*return*/, __assign(__assign({}, config), {\n              dequeueFrequency: (0, BaseWrapper_1.secondsToDurationString)(config.dequeueFrequency),\n              queueExpiry: (0, BaseWrapper_1.secondsToDurationString)(config.queueExpiry),\n              stageDurations: stageDurations\n            })];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the human readable metadata associated with a given proposal.\n   * @param proposalID Governance proposal UUID\n   */\n  GovernanceWrapper.prototype.getHumanReadableProposalMetadata = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var meta;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n          case 1:\n            meta = _a.sent();\n            return [2 /*return*/, __assign(__assign({}, meta), {\n              timestamp: (0, BaseWrapper_1.unixSecondsTimestampToDateString)(meta.timestamp)\n            })];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.proposalSchedule = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var meta, stage, queueExpiry, queueExpiration, durations, referendum, execution, expiration;\n      var _a, _b;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n          case 1:\n            meta = _c.sent();\n            return [4 /*yield*/, this.getProposalStage(proposalID)];\n          case 2:\n            stage = _c.sent();\n            if (!(stage === ProposalStage.Queued)) return [3 /*break*/, 4];\n            return [4 /*yield*/, this.queueExpiry()];\n          case 3:\n            queueExpiry = _c.sent();\n            queueExpiration = meta.timestamp.plus(queueExpiry);\n            return [2 /*return*/, (_a = {}, _a[ProposalStage.Queued] = meta.timestamp, _a[ProposalStage.Expiration] = queueExpiration, _a)];\n          case 4:\n            return [4 /*yield*/, this.stageDurations()];\n          case 5:\n            durations = _c.sent();\n            referendum = meta.timestamp;\n            execution = referendum.plus(durations.Referendum);\n            expiration = execution.plus(durations.Execution);\n            return [2 /*return*/, (_b = {}, _b[ProposalStage.Referendum] = referendum, _b[ProposalStage.Execution] = execution, _b[ProposalStage.Expiration] = expiration, _b)];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.humanReadableProposalSchedule = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var schedule, dates, _i, _a, stage;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.proposalSchedule(proposalID)];\n          case 1:\n            schedule = _b.sent();\n            dates = {};\n            for (_i = 0, _a = Object.keys(schedule); _i < _a.length; _i++) {\n              stage = _a[_i];\n              dates[stage] = (0, BaseWrapper_1.unixSecondsTimestampToDateString)(schedule[stage]);\n            }\n            return [2 /*return*/, dates];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the proposal associated with a given id.\n   * @param proposalID Governance proposal UUID\n   */\n  GovernanceWrapper.prototype.getProposal = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var metadata, txIndices;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n          case 1:\n            metadata = _a.sent();\n            txIndices = (0, collections_1.zeroRange)(metadata.transactionCount);\n            return [2 /*return*/, (0, async_1.concurrentMap)(4, txIndices, function (idx) {\n              return _this.getProposalTransaction(proposalID, idx);\n            })];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.getApprovalStatus = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var multisig, approveTx, multisigTxs, confirmations, approvers;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getApproverMultisig()];\n          case 1:\n            multisig = _a.sent();\n            return [4 /*yield*/, this.approve(proposalID)];\n          case 2:\n            approveTx = _a.sent();\n            return [4 /*yield*/, multisig.getTransactionDataByContent(this.address, approveTx.txo)];\n          case 3:\n            multisigTxs = _a.sent();\n            confirmations = multisigTxs ? multisigTxs.confirmations : [];\n            return [4 /*yield*/, multisig.getOwners()];\n          case 4:\n            approvers = _a.sent();\n            return [2 /*return*/, {\n              completion: \"\".concat(confirmations.length, \" / \").concat(approvers.length),\n              confirmations: confirmations,\n              approvers: approvers\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the stage, metadata, upvotes, votes, and transactions associated with a given proposal.\n   * @param proposalID Governance proposal UUID\n   */\n  GovernanceWrapper.prototype.getProposalRecord = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var metadata, proposal, stage, record, _a, _b, _c, _d, _e;\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n          case 1:\n            metadata = _f.sent();\n            return [4 /*yield*/, this.getProposal(proposalID)];\n          case 2:\n            proposal = _f.sent();\n            return [4 /*yield*/, this.getProposalStage(proposalID)];\n          case 3:\n            stage = _f.sent();\n            record = {\n              proposal: proposal,\n              metadata: metadata,\n              stage: stage,\n              passed: false,\n              approved: false\n            };\n            if (!(stage === ProposalStage.Queued)) return [3 /*break*/, 5];\n            _a = record;\n            return [4 /*yield*/, this.getUpvotes(proposalID)];\n          case 4:\n            _a.upvotes = _f.sent();\n            return [3 /*break*/, 10];\n          case 5:\n            if (!(stage === ProposalStage.Referendum || stage === ProposalStage.Execution)) return [3 /*break*/, 10];\n            record.approved = true;\n            _b = record;\n            return [4 /*yield*/, this.isProposalPassing(proposalID)];\n          case 6:\n            _b.passed = _f.sent();\n            _c = record;\n            return [4 /*yield*/, this.getVotes(proposalID)];\n          case 7:\n            _c.votes = _f.sent();\n            _d = record;\n            return [4 /*yield*/, this.isApproved(proposalID)];\n          case 8:\n            _d.approved = _f.sent();\n            _e = record;\n            return [4 /*yield*/, this.getApprovalStatus(proposalID)];\n          case 9:\n            _e.approvals = _f.sent();\n            _f.label = 10;\n          case 10:\n            return [2 /*return*/, record];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.isUpvoting = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvote, _a, _b;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n          case 1:\n            upvote = _c.sent();\n            _b = !upvote.proposalID.isZero();\n            if (!_b) return [3 /*break*/, 3];\n            return [4 /*yield*/, this.isQueued(upvote.proposalID)];\n          case 2:\n            _b = _c.sent();\n            _c.label = 3;\n          case 3:\n            _a = _b;\n            if (!_a) return [3 /*break*/, 5];\n            return [4 /*yield*/, this.isQueuedProposalExpired(upvote.proposalID)];\n          case 4:\n            _a = !_c.sent();\n            _c.label = 5;\n          case 5:\n            return [2 /*return*/, _a];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the corresponding vote record\n   * @param voter Address of voter\n   * @param proposalID Governance proposal UUID\n   */\n  GovernanceWrapper.prototype.getVoteRecord = function (voter, proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, res, _1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 3,, 4]);\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            return [4 /*yield*/, this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n          case 2:\n            res = _a.sent();\n            return [2 /*return*/, {\n              proposalID: (0, BaseWrapper_1.valueToBigNumber)(res[0]),\n              value: Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])],\n              votes: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n              yesVotes: (0, BaseWrapper_1.valueToBigNumber)(res[3]),\n              noVotes: (0, BaseWrapper_1.valueToBigNumber)(res[4]),\n              abstainVotes: (0, BaseWrapper_1.valueToBigNumber)(res[5])\n            }];\n          case 3:\n            _1 = _a.sent();\n            // The proposal ID may not be present in the dequeued list, or the voter may not have a vote\n            // record for the proposal.\n            return [2 /*return*/, null];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the (existing) proposal dequeue as list of proposal IDs.\n   */\n  GovernanceWrapper.prototype.getDequeue = function (filterZeroes) {\n    if (filterZeroes === void 0) {\n      filterZeroes = false;\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var dequeue, dequeueIds;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.contract.methods.getDequeue().call()\n            // filter non-zero as dequeued indices are reused and `deleteDequeuedProposal` zeroes\n            ];\n\n          case 1:\n            dequeue = _a.sent();\n            dequeueIds = dequeue.map(BaseWrapper_1.valueToBigNumber);\n            return [2 /*return*/, filterZeroes ? dequeueIds.filter(function (id) {\n              return !id.isZero();\n            }) : dequeueIds];\n        }\n      });\n    });\n  };\n  /*\n   * Returns the vote records for a given voter.\n   */\n  GovernanceWrapper.prototype.getVoteRecords = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var dequeue, voteRecords;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeue()];\n          case 1:\n            dequeue = _a.sent();\n            return [4 /*yield*/, Promise.all(dequeue.map(function (id) {\n              return _this.getVoteRecord(voter, id);\n            }))];\n          case 2:\n            voteRecords = _a.sent();\n            return [2 /*return*/, voteRecords.filter(function (record) {\n              return record != null;\n            })];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.isVotingReferendum = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var records;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getVoteRecords(voter)];\n          case 1:\n            records = _a.sent();\n            return [2 /*return*/, records.length !== 0];\n        }\n      });\n    });\n  };\n  /*\n   * Returns information pertaining to a voter in governance.\n   */\n  GovernanceWrapper.prototype.getVoter = function (account) {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, Promise.all([this.getUpvoteRecord(account), this.getVoteRecords(account), this.getRefundedDeposits(account)])];\n          case 1:\n            res = _a.sent();\n            return [2 /*return*/, {\n              upvote: res[0],\n              votes: res[1],\n              refundedDeposits: res[2]\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the number of votes that will be applied to a proposal for a given voter.\n   * @param voter Address of voter\n   */\n  GovernanceWrapper.prototype.getVoteWeight = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var lockedGoldContract;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.contracts.getLockedGold()];\n          case 1:\n            lockedGoldContract = _a.sent();\n            return [2 /*return*/, lockedGoldContract.getAccountTotalLockedGold(voter)];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.getIndex = function (id, array) {\n    var index = array.findIndex(function (bn) {\n      return bn.isEqualTo(id);\n    });\n    if (index === -1) {\n      throw new Error(\"ID \".concat(id, \" not found in array \").concat(array));\n    }\n    return index;\n  };\n  GovernanceWrapper.prototype.getDequeueIndex = function (proposalID, dequeue) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!dequeue) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.getDequeue()];\n          case 1:\n            dequeue = _a.sent();\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/, this.getIndex(proposalID, dequeue)];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.getQueueIndex = function (proposalID, queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!queue) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.getQueue()];\n          case 1:\n            queue = _a.sent();\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/, {\n              index: this.getIndex(proposalID, queue.map(function (record) {\n                return record.proposalID;\n              })),\n              queue: queue\n            }];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.lesserAndGreater = function (proposalID, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, index, queue;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.getQueueIndex(proposalID, _queue)];\n          case 1:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            return [2 /*return*/, {\n              lesserID: index === 0 ? ZERO_BN : queue[index - 1].proposalID,\n              greaterID: index === queue.length - 1 ? ZERO_BN : queue[index + 1].proposalID\n            }];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.sortedQueue = function (queue) {\n    return queue.sort(function (a, b) {\n      return a.upvotes.comparedTo(b.upvotes);\n    });\n  };\n  GovernanceWrapper.prototype.withUpvoteRevoked = function (upvoter, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvoteRecord, _a, index, queue;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n          case 1:\n            upvoteRecord = _b.sent();\n            return [4 /*yield*/, this.getQueueIndex(upvoteRecord.proposalID, _queue)];\n          case 2:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            queue[index].upvotes = queue[index].upvotes.minus(upvoteRecord.upvotes);\n            return [2 /*return*/, {\n              queue: this.sortedQueue(queue),\n              upvoteRecord: upvoteRecord\n            }];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.withUpvoteApplied = function (upvoter, proposalID, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, index, queue, weight;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.getQueueIndex(proposalID, _queue)];\n          case 1:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            return [4 /*yield*/, this.getVoteWeight(upvoter)];\n          case 2:\n            weight = _b.sent();\n            queue[index].upvotes = queue[index].upvotes.plus(weight);\n            return [2 /*return*/, this.sortedQueue(queue)];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.lesserAndGreaterAfterRevoke = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, queue, upvoteRecord;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.withUpvoteRevoked(upvoter)];\n          case 1:\n            _a = _b.sent(), queue = _a.queue, upvoteRecord = _a.upvoteRecord;\n            return [2 /*return*/, this.lesserAndGreater(upvoteRecord.proposalID, queue)];\n        }\n      });\n    });\n  };\n  GovernanceWrapper.prototype.lesserAndGreaterAfterUpvote = function (upvoter, proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvoteRecord, recordQueued, queue, _a, upvoteQueue;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n          case 1:\n            upvoteRecord = _b.sent();\n            return [4 /*yield*/, this.isQueued(upvoteRecord.proposalID)\n            // if existing upvote exists in queue, revoke it before applying new upvote\n            ];\n\n          case 2:\n            recordQueued = _b.sent();\n            if (!recordQueued) return [3 /*break*/, 4];\n            return [4 /*yield*/, this.withUpvoteRevoked(upvoter)];\n          case 3:\n            _a = _b.sent().queue;\n            return [3 /*break*/, 6];\n          case 4:\n            return [4 /*yield*/, this.getQueue()];\n          case 5:\n            _a = _b.sent();\n            _b.label = 6;\n          case 6:\n            queue = _a;\n            return [4 /*yield*/, this.withUpvoteApplied(upvoter, proposalID, queue)];\n          case 7:\n            upvoteQueue = _b.sent();\n            return [2 /*return*/, this.lesserAndGreater(proposalID, upvoteQueue)];\n        }\n      });\n    });\n  };\n  /**\n   * Applies provided upvoter's upvote to given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param upvoter Address of upvoter\n   */\n  GovernanceWrapper.prototype.upvote = function (proposalID, upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, lesserID, greaterID;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.lesserAndGreaterAfterUpvote(upvoter, proposalID)];\n          case 1:\n            _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.upvote((0, BaseWrapper_1.valueToString)(proposalID), (0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n        }\n      });\n    });\n  };\n  /**\n   * Revokes provided upvoter's upvote.\n   * @param upvoter Address of upvoter\n   */\n  GovernanceWrapper.prototype.revokeUpvote = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, lesserID, greaterID;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.lesserAndGreaterAfterRevoke(upvoter)];\n          case 1:\n            _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.revokeUpvote((0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n        }\n      });\n    });\n  };\n  /**\n   * Approves given proposal, allowing it to later move to `referendum`.\n   * @param proposalID Governance proposal UUID\n   * @notice Only the `approver` address will succeed in sending this transaction\n   */\n  GovernanceWrapper.prototype.approve = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.approve((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n        }\n      });\n    });\n  };\n  /**\n   * Applies `sender`'s vote choice to a given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param vote Choice to apply (yes, no, abstain)\n   */\n  GovernanceWrapper.prototype.vote = function (proposalID, vote) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, voteNum;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            voteNum = Object.keys(VoteValue).indexOf(vote);\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.vote((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex, voteNum))];\n        }\n      });\n    });\n  };\n  /**\n   * Applies `sender`'s vote choice to a given proposal.\n   * @param proposalID Governance proposal UUID.\n   * @param yesVotes The yes votes.\n   * @param noVotes The no votes.\n   * @param abstainVotes The abstain votes.\n   */\n  GovernanceWrapper.prototype.votePartially = function (proposalID, yesVotes, noVotes, abstainVotes) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.votePartially((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex, (0, BaseWrapper_1.valueToString)(yesVotes), (0, BaseWrapper_1.valueToString)(noVotes), (0, BaseWrapper_1.valueToString)(abstainVotes)))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns `voter`'s vote choice on a given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param voter Address of voter\n   */\n  GovernanceWrapper.prototype.getVoteValue = function (proposalID, voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            return [4 /*yield*/, this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n          case 2:\n            res = _a.sent();\n            return [2 /*return*/, Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])]];\n        }\n      });\n    });\n  };\n  /**\n   * Executes a given proposal's associated transactions.\n   * @param proposalID Governance proposal UUID\n   */\n  GovernanceWrapper.prototype.execute = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n          case 1:\n            proposalIndex = _a.sent();\n            return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.execute((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns approved, executed, and prepared status associated with a given hotfix.\n   * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n   */\n  GovernanceWrapper.prototype.getHotfixRecord = function (hash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.contract.methods.getHotfixRecord((0, address_1.bufferToHex)(hash)).call()];\n          case 1:\n            res = _a.sent();\n            return [2 /*return*/, {\n              approved: res[0],\n              executed: res[1],\n              preparedEpoch: (0, BaseWrapper_1.valueToBigNumber)(res[2])\n            }];\n        }\n      });\n    });\n  };\n  return GovernanceWrapper;\n}(BaseWrapperForGoverning_1.BaseWrapperForGoverning);\nexports.GovernanceWrapper = GovernanceWrapper;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","pop","push","__importDefault","mod","__esModule","defineProperty","exports","GovernanceWrapper","hotfixToParams","VoteValue","proposalToParams","ProposalStage","address_1","require","async_1","collections_1","connect_1","fixidity_1","bignumber_js_1","BaseWrapper_1","BaseWrapperForGoverning_1","proposal","descriptionURL","data","map","tx","hexToBuffer","input","to","bufferToSolidityBytes","Buffer","concat","inp","salt","bufferToHex","ZERO_BN","default","_super","_this","concurrentProposals","proxyCall","contract","methods","undefined","valueToBigNumber","lastDequeue","dequeueFrequency","minDeposit","queueExpiry","isVoting","getProposalMetadata","getProposal","tupleParser","valueToString","res","proposer","deposit","timestamp","transactionCount","valueToInt","getProposalTransaction","solidityBytesToString","isApproved","isDequeuedProposalExpired","isQueuedProposalExpired","getApprover","approver","getApproverMultisig","address","contracts","getMultiSig","getProposalStage","proposalID","queue","existsInQueue","expired","_a","getQueue","find","u","Expiration","Queued","keys","isProposalPassing","withdraw","proxySend","connection","propose","proposalExists","getUpvoteRecord","identity","o","upvotes","isQueued","getRefundedDeposits","refundedDeposits","stringIdentity","getUpvotes","getVotes","getVoteTotals","Yes","No","Abstain","arraysObject","zip","_id","_upvotes","dequeueProposalsIfReady","revokeVotes","isHotfixWhitelistedBy","isHotfixPassing","minQuorumSize","minQuorumSizeInCurrentSet","hotfixWhitelistValidatorTally","whitelistHotfix","approveHotfix","prepareHotfix","executeHotfix","stageDurations","_b","Referendum","Execution","getTransactionConstitution","callSignature","ensureLeading0x","trimLeading0x","slice","getConstitution","NULL_ADDRESS","fromFixed","constitution","_i","proposal_1","_c","max","getParticipationParameters","baseline","baselineFloor","baselineUpdateFactor","baselineQuorumFactor","getSupport","participation","quorum","votes","total","lockedGold","networkWeight","required","support","times","plus","getLockedGold","getTotalLockedGold","div","getConfig","all","participationParameters","getHumanReadableConfig","config","secondsToDurationString","getHumanReadableProposalMetadata","meta","unixSecondsTimestampToDateString","proposalSchedule","stage","queueExpiration","durations","referendum","execution","expiration","humanReadableProposalSchedule","schedule","dates","metadata","txIndices","zeroRange","concurrentMap","idx","getApprovalStatus","multisig","approveTx","multisigTxs","confirmations","approvers","approve","getTransactionDataByContent","txo","getOwners","completion","getProposalRecord","record","_d","_e","_f","passed","approved","approvals","isUpvoting","upvoter","upvote","isZero","getVoteRecord","voter","proposalIndex","_1","getDequeueIndex","yesVotes","noVotes","abstainVotes","getDequeue","filterZeroes","dequeue","dequeueIds","filter","id","getVoteRecords","voteRecords","isVotingReferendum","records","getVoter","account","getVoteWeight","lockedGoldContract","getAccountTotalLockedGold","getIndex","array","index","findIndex","bn","isEqualTo","Error","getQueueIndex","lesserAndGreater","_queue","lesserID","greaterID","sortedQueue","sort","a","comparedTo","withUpvoteRevoked","upvoteRecord","minus","withUpvoteApplied","weight","lesserAndGreaterAfterRevoke","lesserAndGreaterAfterUpvote","recordQueued","upvoteQueue","toTransactionObject","revokeUpvote","vote","voteNum","indexOf","votePartially","getVoteValue","execute","getHotfixRecord","hash","executed","preparedEpoch","BaseWrapperForGoverning"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@celo/contractkit/lib/wrappers/Governance.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GovernanceWrapper = exports.hotfixToParams = exports.VoteValue = exports.proposalToParams = exports.ProposalStage = void 0;\nvar address_1 = require(\"@celo/base/lib/address\");\nvar async_1 = require(\"@celo/base/lib/async\");\nvar collections_1 = require(\"@celo/base/lib/collections\");\nvar connect_1 = require(\"@celo/connect\");\nvar fixidity_1 = require(\"@celo/utils/lib/fixidity\");\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nvar BaseWrapper_1 = require(\"./BaseWrapper\");\nvar BaseWrapperForGoverning_1 = require(\"./BaseWrapperForGoverning\");\nvar ProposalStage;\n(function (ProposalStage) {\n    ProposalStage[\"None\"] = \"None\";\n    ProposalStage[\"Queued\"] = \"Queued\";\n    ProposalStage[\"Approval\"] = \"Approval\";\n    ProposalStage[\"Referendum\"] = \"Referendum\";\n    ProposalStage[\"Execution\"] = \"Execution\";\n    ProposalStage[\"Expiration\"] = \"Expiration\";\n})(ProposalStage = exports.ProposalStage || (exports.ProposalStage = {}));\nvar proposalToParams = function (proposal, descriptionURL) {\n    var data = proposal.map(function (tx) { return (0, address_1.hexToBuffer)(tx.input); });\n    return [\n        proposal.map(function (tx) { return tx.value; }),\n        proposal.map(function (tx) { return tx.to; }),\n        (0, BaseWrapper_1.bufferToSolidityBytes)(Buffer.concat(data)),\n        data.map(function (inp) { return inp.length; }),\n        descriptionURL,\n    ];\n};\nexports.proposalToParams = proposalToParams;\nvar VoteValue;\n(function (VoteValue) {\n    VoteValue[\"None\"] = \"None\";\n    VoteValue[\"Abstain\"] = \"Abstain\";\n    VoteValue[\"No\"] = \"No\";\n    VoteValue[\"Yes\"] = \"Yes\";\n})(VoteValue = exports.VoteValue || (exports.VoteValue = {}));\nvar hotfixToParams = function (proposal, salt) {\n    var p = (0, exports.proposalToParams)(proposal, ''); // no description URL for hotfixes\n    return [p[0], p[1], p[2], p[3], (0, address_1.bufferToHex)(salt)];\n};\nexports.hotfixToParams = hotfixToParams;\nvar ZERO_BN = new bignumber_js_1.default(0);\n/**\n * Contract managing voting for governance proposals.\n */\nvar GovernanceWrapper = /** @class */ (function (_super) {\n    __extends(GovernanceWrapper, _super);\n    function GovernanceWrapper() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Querying number of possible concurrent proposals.\n         * @returns Current number of possible concurrent proposals.\n         */\n        _this.concurrentProposals = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.concurrentProposals, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Query time of last proposal dequeue\n         * @returns Time of last dequeue\n         */\n        _this.lastDequeue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.lastDequeue, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Query proposal dequeue frequency.\n         * @returns Current proposal dequeue frequency in seconds.\n         */\n        _this.dequeueFrequency = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.dequeueFrequency, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Query minimum deposit required to make a proposal.\n         * @returns Current minimum deposit.\n         */\n        _this.minDeposit = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minDeposit, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Query queue expiry parameter.\n         * @return The number of seconds a proposal can stay in the queue before expiring.\n         */\n        _this.queueExpiry = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.queueExpiry, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Returns whether or not a particular account is voting on proposals.\n         * @param account The address of the account.\n         * @returns Whether or not the account is voting on proposals.\n         */\n        _this.isVoting = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isVoting);\n        /**\n         * Returns the metadata associated with a given proposal.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.getProposalMetadata = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposal, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) { return ({\n            proposer: res[0],\n            deposit: (0, BaseWrapper_1.valueToBigNumber)(res[1]),\n            timestamp: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n            transactionCount: (0, BaseWrapper_1.valueToInt)(res[3]),\n            descriptionURL: res[4],\n        }); });\n        /**\n         * Returns the transaction at the given index associated with a given proposal.\n         * @param proposalID Governance proposal UUID\n         * @param txIndex Transaction index\n         */\n        _this.getProposalTransaction = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposalTransaction, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString, BaseWrapper_1.valueToString), function (res) { return ({\n            value: res[0],\n            to: res[1],\n            input: (0, BaseWrapper_1.solidityBytesToString)(res[2]),\n        }); });\n        /**\n         * Returns whether a given proposal is approved.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.isApproved = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isApproved, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Returns whether a dequeued proposal is expired.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.isDequeuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isDequeuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Returns whether a dequeued proposal is expired.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.isQueuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Returns the approver address for proposals and hotfixes.\n         */\n        _this.getApprover = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.approver);\n        /**\n         * Returns the approver multisig contract for proposals and hotfixes.\n         */\n        _this.getApproverMultisig = function () {\n            return _this.getApprover().then(function (address) { return _this.contracts.getMultiSig(address); });\n        };\n        _this.getProposalStage = function (proposalID) { return __awaiter(_this, void 0, void 0, function () {\n            var queue, existsInQueue, expired, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getQueue()];\n                    case 1:\n                        queue = _a.sent();\n                        existsInQueue = queue.find(function (u) { return u.proposalID === proposalID; }) !== undefined;\n                        if (!existsInQueue) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.isQueuedProposalExpired(proposalID)];\n                    case 2:\n                        expired = _a.sent();\n                        return [2 /*return*/, expired ? ProposalStage.Expiration : ProposalStage.Queued];\n                    case 3: return [4 /*yield*/, this.contract.methods.getProposalStage((0, BaseWrapper_1.valueToString)(proposalID)).call()];\n                    case 4:\n                        res = _a.sent();\n                        return [2 /*return*/, Object.keys(ProposalStage)[(0, BaseWrapper_1.valueToInt)(res)]];\n                }\n            });\n        }); };\n        /**\n         * Returns whether a given proposal is passing relative to the constitution's threshold.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.isProposalPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isProposalPassing, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Withdraws refunded proposal deposits.\n         */\n        _this.withdraw = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.withdraw);\n        /**\n         * Submits a new governance proposal.\n         * @param proposal Governance proposal\n         * @param descriptionURL A URL where further information about the proposal can be viewed\n         */\n        _this.propose = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.propose, exports.proposalToParams);\n        /**\n         * Returns whether a governance proposal exists with the given ID.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.proposalExists = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.proposalExists, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Returns the current upvoted governance proposal ID and applied vote weight (zeroes if none).\n         * @param upvoter Address of upvoter\n         */\n        _this.getUpvoteRecord = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvoteRecord, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.identity), function (o) { return ({\n            proposalID: (0, BaseWrapper_1.valueToBigNumber)(o[0]),\n            upvotes: (0, BaseWrapper_1.valueToBigNumber)(o[1]),\n        }); });\n        /**\n         * Returns whether a given proposal is queued.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.isQueued = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueued, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n        /**\n         * Returns the value of proposal deposits that have been refunded.\n         * @param proposer Governance proposer address.\n         */\n        _this.getRefundedDeposits = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.refundedDeposits, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.stringIdentity), BaseWrapper_1.valueToBigNumber);\n        /*\n         * Returns the upvotes applied to a given proposal.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.getUpvotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvotes, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), BaseWrapper_1.valueToBigNumber);\n        /**\n         * Returns the yes, no, and abstain votes applied to a given proposal.\n         * @param proposalID Governance proposal UUID\n         */\n        _this.getVotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getVoteTotals, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) {\n            var _a;\n            return (_a = {},\n                _a[VoteValue.Yes] = (0, BaseWrapper_1.valueToBigNumber)(res[0]),\n                _a[VoteValue.No] = (0, BaseWrapper_1.valueToBigNumber)(res[1]),\n                _a[VoteValue.Abstain] = (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n                _a);\n        });\n        /**\n         * Returns the proposal queue as list of upvote records.\n         */\n        _this.getQueue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getQueue, undefined, function (arraysObject) {\n            return (0, collections_1.zip)(function (_id, _upvotes) { return ({\n                proposalID: (0, BaseWrapper_1.valueToBigNumber)(_id),\n                upvotes: (0, BaseWrapper_1.valueToBigNumber)(_upvotes),\n            }); }, arraysObject[0], arraysObject[1]);\n        });\n        /**\n         * Dequeues any queued proposals if `dequeueFrequency` seconds have elapsed since the last dequeue\n         */\n        _this.dequeueProposalsIfReady = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.dequeueProposalsIfReady);\n        _this.revokeVotes = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.revokeVotes);\n        /**\n         * Returns whether a given hotfix has been whitelisted by a given address.\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         * @param whitelister address of whitelister\n         */\n        _this.isHotfixWhitelistedBy = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixWhitelistedBy, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex, function (s) { return (0, BaseWrapper_1.identity)(s); }));\n        /**\n         * Returns whether a given hotfix can be passed.\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         */\n        _this.isHotfixPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixPassing, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n        /**\n         * Returns the number of validators required to reach a Byzantine quorum\n         */\n        _this.minQuorumSize = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minQuorumSizeInCurrentSet, undefined, BaseWrapper_1.valueToBigNumber);\n        /**\n         * Returns the number of validators that whitelisted the hotfix\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         */\n        _this.hotfixWhitelistValidatorTally = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.hotfixWhitelistValidatorTally, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n        /**\n         * Marks the given hotfix whitelisted by `sender`.\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         */\n        _this.whitelistHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.whitelistHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n        /**\n         * Marks the given hotfix approved by `sender`.\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         * @notice Only the `approver` address will succeed in sending this transaction\n         */\n        _this.approveHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.approveHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n        /**\n         * Marks the given hotfix prepared for current epoch if quorum of validators have whitelisted it.\n         * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n         */\n        _this.prepareHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.prepareHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n        /**\n         * Executes a given sequence of transactions if the corresponding hash is prepared and approved.\n         * @param hotfix Governance hotfix proposal\n         * @param salt Secret which guarantees uniqueness of hash\n         * @notice keccak256 hash of abi encoded transactions computed on-chain\n         */\n        _this.executeHotfix = (0, BaseWrapper_1.proxySend)(_this.connection, _this.contract.methods.executeHotfix, exports.hotfixToParams);\n        return _this;\n    }\n    /**\n     * Query durations of different stages in proposal lifecycle.\n     * @returns Durations for approval, referendum and execution stages in seconds.\n     */\n    GovernanceWrapper.prototype.stageDurations = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.contract.methods.stageDurations().call()];\n                    case 1:\n                        res = _b.sent();\n                        return [2 /*return*/, (_a = {},\n                                _a[ProposalStage.Referendum] = (0, BaseWrapper_1.valueToBigNumber)(res[1]),\n                                _a[ProposalStage.Execution] = (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n                                _a)];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal transaction.\n     * @param tx Transaction to determine the constitution for running.\n     */\n    GovernanceWrapper.prototype.getTransactionConstitution = function (tx) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var callSignature, value;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        callSignature = (0, address_1.ensureLeading0x)((0, address_1.trimLeading0x)(tx.input).slice(0, 8));\n                        return [4 /*yield*/, this.contract.methods\n                                .getConstitution((_a = tx.to) !== null && _a !== void 0 ? _a : address_1.NULL_ADDRESS, callSignature)\n                                .call()];\n                    case 1:\n                        value = _b.sent();\n                        return [2 /*return*/, (0, fixidity_1.fromFixed)(new bignumber_js_1.default(value))];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal.\n     * @param proposal Proposal to determine the constitution for running.\n     */\n    GovernanceWrapper.prototype.getConstitution = function (proposal) {\n        return __awaiter(this, void 0, void 0, function () {\n            var constitution, _i, proposal_1, tx, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        constitution = new bignumber_js_1.default(0);\n                        _i = 0, proposal_1 = proposal;\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < proposal_1.length)) return [3 /*break*/, 4];\n                        tx = proposal_1[_i];\n                        _b = (_a = bignumber_js_1.default).max;\n                        return [4 /*yield*/, this.getTransactionConstitution(tx)];\n                    case 2:\n                        constitution = _b.apply(_a, [_c.sent(), constitution]);\n                        _c.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/, constitution];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the participation parameters.\n     * @returns The participation parameters.\n     */\n    GovernanceWrapper.prototype.getParticipationParameters = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.contract.methods.getParticipationParameters().call()];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                baseline: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[0])),\n                                baselineFloor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[1])),\n                                baselineUpdateFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[2])),\n                                baselineQuorumFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[3])),\n                            }];\n                }\n            });\n        });\n    };\n    // simulates proposal.getSupportWithQuorumPadding\n    GovernanceWrapper.prototype.getSupport = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var participation, quorum, votes, total, lockedGold, networkWeight, required, support;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getParticipationParameters()];\n                    case 1:\n                        participation = _a.sent();\n                        quorum = participation.baseline.times(participation.baselineQuorumFactor);\n                        return [4 /*yield*/, this.getVotes(proposalID)];\n                    case 2:\n                        votes = _a.sent();\n                        total = votes.Yes.plus(votes.No).plus(votes.Abstain);\n                        return [4 /*yield*/, this.contracts.getLockedGold()\n                            // NOTE: this networkWeight is not as governance calculates it,\n                            // but we don't have access to proposal.networkWeight\n                        ];\n                    case 3:\n                        lockedGold = _a.sent();\n                        return [4 /*yield*/, lockedGold.getTotalLockedGold()];\n                    case 4:\n                        networkWeight = _a.sent();\n                        required = networkWeight.times(quorum);\n                        support = votes.Yes.div(votes.Yes.plus(votes.No));\n                        return [2 /*return*/, {\n                                support: support,\n                                required: required,\n                                total: total,\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * Returns current configuration parameters.\n     */\n    GovernanceWrapper.prototype.getConfig = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all([\n                            this.concurrentProposals(),\n                            this.dequeueFrequency(),\n                            this.minDeposit(),\n                            this.queueExpiry(),\n                            this.stageDurations(),\n                            this.getParticipationParameters(),\n                        ])];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                concurrentProposals: res[0],\n                                dequeueFrequency: res[1],\n                                minDeposit: res[2],\n                                queueExpiry: res[3],\n                                stageDurations: res[4],\n                                participationParameters: res[5],\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * @dev Returns human readable configuration of the governance contract\n     * @return GovernanceConfig object\n     */\n    GovernanceWrapper.prototype.getHumanReadableConfig = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var config, stageDurations;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.getConfig()];\n                    case 1:\n                        config = _b.sent();\n                        stageDurations = (_a = {},\n                            _a[ProposalStage.Referendum] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Referendum]),\n                            _a[ProposalStage.Execution] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Execution]),\n                            _a);\n                        return [2 /*return*/, __assign(__assign({}, config), { dequeueFrequency: (0, BaseWrapper_1.secondsToDurationString)(config.dequeueFrequency), queueExpiry: (0, BaseWrapper_1.secondsToDurationString)(config.queueExpiry), stageDurations: stageDurations })];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the human readable metadata associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n    GovernanceWrapper.prototype.getHumanReadableProposalMetadata = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var meta;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n                    case 1:\n                        meta = _a.sent();\n                        return [2 /*return*/, __assign(__assign({}, meta), { timestamp: (0, BaseWrapper_1.unixSecondsTimestampToDateString)(meta.timestamp) })];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.proposalSchedule = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var meta, stage, queueExpiry, queueExpiration, durations, referendum, execution, expiration;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n                    case 1:\n                        meta = _c.sent();\n                        return [4 /*yield*/, this.getProposalStage(proposalID)];\n                    case 2:\n                        stage = _c.sent();\n                        if (!(stage === ProposalStage.Queued)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.queueExpiry()];\n                    case 3:\n                        queueExpiry = _c.sent();\n                        queueExpiration = meta.timestamp.plus(queueExpiry);\n                        return [2 /*return*/, (_a = {},\n                                _a[ProposalStage.Queued] = meta.timestamp,\n                                _a[ProposalStage.Expiration] = queueExpiration,\n                                _a)];\n                    case 4: return [4 /*yield*/, this.stageDurations()];\n                    case 5:\n                        durations = _c.sent();\n                        referendum = meta.timestamp;\n                        execution = referendum.plus(durations.Referendum);\n                        expiration = execution.plus(durations.Execution);\n                        return [2 /*return*/, (_b = {},\n                                _b[ProposalStage.Referendum] = referendum,\n                                _b[ProposalStage.Execution] = execution,\n                                _b[ProposalStage.Expiration] = expiration,\n                                _b)];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.humanReadableProposalSchedule = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var schedule, dates, _i, _a, stage;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.proposalSchedule(proposalID)];\n                    case 1:\n                        schedule = _b.sent();\n                        dates = {};\n                        for (_i = 0, _a = Object.keys(schedule); _i < _a.length; _i++) {\n                            stage = _a[_i];\n                            dates[stage] = (0, BaseWrapper_1.unixSecondsTimestampToDateString)(schedule[stage]);\n                        }\n                        return [2 /*return*/, dates];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the proposal associated with a given id.\n     * @param proposalID Governance proposal UUID\n     */\n    GovernanceWrapper.prototype.getProposal = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var metadata, txIndices;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n                    case 1:\n                        metadata = _a.sent();\n                        txIndices = (0, collections_1.zeroRange)(metadata.transactionCount);\n                        return [2 /*return*/, (0, async_1.concurrentMap)(4, txIndices, function (idx) { return _this.getProposalTransaction(proposalID, idx); })];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.getApprovalStatus = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var multisig, approveTx, multisigTxs, confirmations, approvers;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getApproverMultisig()];\n                    case 1:\n                        multisig = _a.sent();\n                        return [4 /*yield*/, this.approve(proposalID)];\n                    case 2:\n                        approveTx = _a.sent();\n                        return [4 /*yield*/, multisig.getTransactionDataByContent(this.address, approveTx.txo)];\n                    case 3:\n                        multisigTxs = _a.sent();\n                        confirmations = multisigTxs ? multisigTxs.confirmations : [];\n                        return [4 /*yield*/, multisig.getOwners()];\n                    case 4:\n                        approvers = _a.sent();\n                        return [2 /*return*/, {\n                                completion: \"\".concat(confirmations.length, \" / \").concat(approvers.length),\n                                confirmations: confirmations,\n                                approvers: approvers,\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the stage, metadata, upvotes, votes, and transactions associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n    GovernanceWrapper.prototype.getProposalRecord = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var metadata, proposal, stage, record, _a, _b, _c, _d, _e;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4 /*yield*/, this.getProposalMetadata(proposalID)];\n                    case 1:\n                        metadata = _f.sent();\n                        return [4 /*yield*/, this.getProposal(proposalID)];\n                    case 2:\n                        proposal = _f.sent();\n                        return [4 /*yield*/, this.getProposalStage(proposalID)];\n                    case 3:\n                        stage = _f.sent();\n                        record = {\n                            proposal: proposal,\n                            metadata: metadata,\n                            stage: stage,\n                            passed: false,\n                            approved: false,\n                        };\n                        if (!(stage === ProposalStage.Queued)) return [3 /*break*/, 5];\n                        _a = record;\n                        return [4 /*yield*/, this.getUpvotes(proposalID)];\n                    case 4:\n                        _a.upvotes = _f.sent();\n                        return [3 /*break*/, 10];\n                    case 5:\n                        if (!(stage === ProposalStage.Referendum || stage === ProposalStage.Execution)) return [3 /*break*/, 10];\n                        record.approved = true;\n                        _b = record;\n                        return [4 /*yield*/, this.isProposalPassing(proposalID)];\n                    case 6:\n                        _b.passed = _f.sent();\n                        _c = record;\n                        return [4 /*yield*/, this.getVotes(proposalID)];\n                    case 7:\n                        _c.votes = _f.sent();\n                        _d = record;\n                        return [4 /*yield*/, this.isApproved(proposalID)];\n                    case 8:\n                        _d.approved = _f.sent();\n                        _e = record;\n                        return [4 /*yield*/, this.getApprovalStatus(proposalID)];\n                    case 9:\n                        _e.approvals = _f.sent();\n                        _f.label = 10;\n                    case 10: return [2 /*return*/, record];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.isUpvoting = function (upvoter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var upvote, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n                    case 1:\n                        upvote = _c.sent();\n                        _b = !upvote.proposalID.isZero();\n                        if (!_b) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.isQueued(upvote.proposalID)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        _a = _b;\n                        if (!_a) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.isQueuedProposalExpired(upvote.proposalID)];\n                    case 4:\n                        _a = !(_c.sent());\n                        _c.label = 5;\n                    case 5: return [2 /*return*/, (_a)];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the corresponding vote record\n     * @param voter Address of voter\n     * @param proposalID Governance proposal UUID\n     */\n    GovernanceWrapper.prototype.getVoteRecord = function (voter, proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex, res, _1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        return [4 /*yield*/, this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n                    case 2:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                proposalID: (0, BaseWrapper_1.valueToBigNumber)(res[0]),\n                                value: Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])],\n                                votes: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n                                yesVotes: (0, BaseWrapper_1.valueToBigNumber)(res[3]),\n                                noVotes: (0, BaseWrapper_1.valueToBigNumber)(res[4]),\n                                abstainVotes: (0, BaseWrapper_1.valueToBigNumber)(res[5]),\n                            }];\n                    case 3:\n                        _1 = _a.sent();\n                        // The proposal ID may not be present in the dequeued list, or the voter may not have a vote\n                        // record for the proposal.\n                        return [2 /*return*/, null];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the (existing) proposal dequeue as list of proposal IDs.\n     */\n    GovernanceWrapper.prototype.getDequeue = function (filterZeroes) {\n        if (filterZeroes === void 0) { filterZeroes = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var dequeue, dequeueIds;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.contract.methods.getDequeue().call()\n                        // filter non-zero as dequeued indices are reused and `deleteDequeuedProposal` zeroes\n                    ];\n                    case 1:\n                        dequeue = _a.sent();\n                        dequeueIds = dequeue.map(BaseWrapper_1.valueToBigNumber);\n                        return [2 /*return*/, filterZeroes ? dequeueIds.filter(function (id) { return !id.isZero(); }) : dequeueIds];\n                }\n            });\n        });\n    };\n    /*\n     * Returns the vote records for a given voter.\n     */\n    GovernanceWrapper.prototype.getVoteRecords = function (voter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dequeue, voteRecords;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeue()];\n                    case 1:\n                        dequeue = _a.sent();\n                        return [4 /*yield*/, Promise.all(dequeue.map(function (id) { return _this.getVoteRecord(voter, id); }))];\n                    case 2:\n                        voteRecords = _a.sent();\n                        return [2 /*return*/, voteRecords.filter(function (record) { return record != null; })];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.isVotingReferendum = function (voter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var records;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getVoteRecords(voter)];\n                    case 1:\n                        records = _a.sent();\n                        return [2 /*return*/, records.length !== 0];\n                }\n            });\n        });\n    };\n    /*\n     * Returns information pertaining to a voter in governance.\n     */\n    GovernanceWrapper.prototype.getVoter = function (account) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all([\n                            this.getUpvoteRecord(account),\n                            this.getVoteRecords(account),\n                            this.getRefundedDeposits(account),\n                        ])];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                upvote: res[0],\n                                votes: res[1],\n                                refundedDeposits: res[2],\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * Returns the number of votes that will be applied to a proposal for a given voter.\n     * @param voter Address of voter\n     */\n    GovernanceWrapper.prototype.getVoteWeight = function (voter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var lockedGoldContract;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.contracts.getLockedGold()];\n                    case 1:\n                        lockedGoldContract = _a.sent();\n                        return [2 /*return*/, lockedGoldContract.getAccountTotalLockedGold(voter)];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.getIndex = function (id, array) {\n        var index = array.findIndex(function (bn) { return bn.isEqualTo(id); });\n        if (index === -1) {\n            throw new Error(\"ID \".concat(id, \" not found in array \").concat(array));\n        }\n        return index;\n    };\n    GovernanceWrapper.prototype.getDequeueIndex = function (proposalID, dequeue) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!dequeue) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.getDequeue()];\n                    case 1:\n                        dequeue = _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, this.getIndex(proposalID, dequeue)];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.getQueueIndex = function (proposalID, queue) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!queue) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.getQueue()];\n                    case 1:\n                        queue = _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, {\n                            index: this.getIndex(proposalID, queue.map(function (record) { return record.proposalID; })),\n                            queue: queue,\n                        }];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.lesserAndGreater = function (proposalID, _queue) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, index, queue;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.getQueueIndex(proposalID, _queue)];\n                    case 1:\n                        _a = _b.sent(), index = _a.index, queue = _a.queue;\n                        return [2 /*return*/, {\n                                lesserID: index === 0 ? ZERO_BN : queue[index - 1].proposalID,\n                                greaterID: index === queue.length - 1 ? ZERO_BN : queue[index + 1].proposalID,\n                            }];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.sortedQueue = function (queue) {\n        return queue.sort(function (a, b) { return a.upvotes.comparedTo(b.upvotes); });\n    };\n    GovernanceWrapper.prototype.withUpvoteRevoked = function (upvoter, _queue) {\n        return __awaiter(this, void 0, void 0, function () {\n            var upvoteRecord, _a, index, queue;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n                    case 1:\n                        upvoteRecord = _b.sent();\n                        return [4 /*yield*/, this.getQueueIndex(upvoteRecord.proposalID, _queue)];\n                    case 2:\n                        _a = _b.sent(), index = _a.index, queue = _a.queue;\n                        queue[index].upvotes = queue[index].upvotes.minus(upvoteRecord.upvotes);\n                        return [2 /*return*/, {\n                                queue: this.sortedQueue(queue),\n                                upvoteRecord: upvoteRecord,\n                            }];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.withUpvoteApplied = function (upvoter, proposalID, _queue) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, index, queue, weight;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.getQueueIndex(proposalID, _queue)];\n                    case 1:\n                        _a = _b.sent(), index = _a.index, queue = _a.queue;\n                        return [4 /*yield*/, this.getVoteWeight(upvoter)];\n                    case 2:\n                        weight = _b.sent();\n                        queue[index].upvotes = queue[index].upvotes.plus(weight);\n                        return [2 /*return*/, this.sortedQueue(queue)];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.lesserAndGreaterAfterRevoke = function (upvoter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, queue, upvoteRecord;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.withUpvoteRevoked(upvoter)];\n                    case 1:\n                        _a = _b.sent(), queue = _a.queue, upvoteRecord = _a.upvoteRecord;\n                        return [2 /*return*/, this.lesserAndGreater(upvoteRecord.proposalID, queue)];\n                }\n            });\n        });\n    };\n    GovernanceWrapper.prototype.lesserAndGreaterAfterUpvote = function (upvoter, proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var upvoteRecord, recordQueued, queue, _a, upvoteQueue;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.getUpvoteRecord(upvoter)];\n                    case 1:\n                        upvoteRecord = _b.sent();\n                        return [4 /*yield*/, this.isQueued(upvoteRecord.proposalID)\n                            // if existing upvote exists in queue, revoke it before applying new upvote\n                        ];\n                    case 2:\n                        recordQueued = _b.sent();\n                        if (!recordQueued) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.withUpvoteRevoked(upvoter)];\n                    case 3:\n                        _a = (_b.sent()).queue;\n                        return [3 /*break*/, 6];\n                    case 4: return [4 /*yield*/, this.getQueue()];\n                    case 5:\n                        _a = _b.sent();\n                        _b.label = 6;\n                    case 6:\n                        queue = _a;\n                        return [4 /*yield*/, this.withUpvoteApplied(upvoter, proposalID, queue)];\n                    case 7:\n                        upvoteQueue = _b.sent();\n                        return [2 /*return*/, this.lesserAndGreater(proposalID, upvoteQueue)];\n                }\n            });\n        });\n    };\n    /**\n     * Applies provided upvoter's upvote to given proposal.\n     * @param proposalID Governance proposal UUID\n     * @param upvoter Address of upvoter\n     */\n    GovernanceWrapper.prototype.upvote = function (proposalID, upvoter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, lesserID, greaterID;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.lesserAndGreaterAfterUpvote(upvoter, proposalID)];\n                    case 1:\n                        _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.upvote((0, BaseWrapper_1.valueToString)(proposalID), (0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n                }\n            });\n        });\n    };\n    /**\n     * Revokes provided upvoter's upvote.\n     * @param upvoter Address of upvoter\n     */\n    GovernanceWrapper.prototype.revokeUpvote = function (upvoter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, lesserID, greaterID;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.lesserAndGreaterAfterRevoke(upvoter)];\n                    case 1:\n                        _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.revokeUpvote((0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n                }\n            });\n        });\n    };\n    /**\n     * Approves given proposal, allowing it to later move to `referendum`.\n     * @param proposalID Governance proposal UUID\n     * @notice Only the `approver` address will succeed in sending this transaction\n     */\n    GovernanceWrapper.prototype.approve = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.approve((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n                }\n            });\n        });\n    };\n    /**\n     * Applies `sender`'s vote choice to a given proposal.\n     * @param proposalID Governance proposal UUID\n     * @param vote Choice to apply (yes, no, abstain)\n     */\n    GovernanceWrapper.prototype.vote = function (proposalID, vote) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex, voteNum;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        voteNum = Object.keys(VoteValue).indexOf(vote);\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.vote((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex, voteNum))];\n                }\n            });\n        });\n    };\n    /**\n     * Applies `sender`'s vote choice to a given proposal.\n     * @param proposalID Governance proposal UUID.\n     * @param yesVotes The yes votes.\n     * @param noVotes The no votes.\n     * @param abstainVotes The abstain votes.\n     */\n    GovernanceWrapper.prototype.votePartially = function (proposalID, yesVotes, noVotes, abstainVotes) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.votePartially((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex, (0, BaseWrapper_1.valueToString)(yesVotes), (0, BaseWrapper_1.valueToString)(noVotes), (0, BaseWrapper_1.valueToString)(abstainVotes)))];\n                }\n            });\n        });\n    };\n    /**\n     * Returns `voter`'s vote choice on a given proposal.\n     * @param proposalID Governance proposal UUID\n     * @param voter Address of voter\n     */\n    GovernanceWrapper.prototype.getVoteValue = function (proposalID, voter) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        return [4 /*yield*/, this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n                    case 2:\n                        res = _a.sent();\n                        return [2 /*return*/, Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])]];\n                }\n            });\n        });\n    };\n    /**\n     * Executes a given proposal's associated transactions.\n     * @param proposalID Governance proposal UUID\n     */\n    GovernanceWrapper.prototype.execute = function (proposalID) {\n        return __awaiter(this, void 0, void 0, function () {\n            var proposalIndex;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getDequeueIndex(proposalID)];\n                    case 1:\n                        proposalIndex = _a.sent();\n                        return [2 /*return*/, (0, connect_1.toTransactionObject)(this.connection, this.contract.methods.execute((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n                }\n            });\n        });\n    };\n    /**\n     * Returns approved, executed, and prepared status associated with a given hotfix.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n    GovernanceWrapper.prototype.getHotfixRecord = function (hash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.contract.methods.getHotfixRecord((0, address_1.bufferToHex)(hash)).call()];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                approved: res[0],\n                                executed: res[1],\n                                preparedEpoch: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n                            }];\n                }\n            });\n        });\n    };\n    return GovernanceWrapper;\n}(BaseWrapperForGoverning_1.BaseWrapperForGoverning));\nexports.GovernanceWrapper = GovernanceWrapper;\n//# sourceMappingURL=Governance.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}