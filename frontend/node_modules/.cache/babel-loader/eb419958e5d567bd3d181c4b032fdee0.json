{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{diffTokenLists}from'@uniswap/token-lists';import React,{useCallback,useMemo}from'react';import ReactGA from'react-ga';import{useDispatch}from'react-redux';import{Text}from'rebass';import styled from'styled-components';import{useRemovePopup}from'../../state/application/hooks';import{acceptListUpdate}from'../../state/lists/actions';import{TYPE}from'../../theme';import listVersionLabel from'../../utils/listVersionLabel';import{ButtonSecondary}from'../Button';import{AutoColumn}from'../Column';import{AutoRow}from'../Row';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const ChangesList=styled.ul(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-height: 400px;\\n  overflow: auto;\\n\"])));export default function ListUpdatePopup(_ref){let{popKey,listUrl,oldList,newList,auto}=_ref;const removePopup=useRemovePopup();const removeThisPopup=useCallback(()=>removePopup(popKey),[popKey,removePopup]);const dispatch=useDispatch();const handleAcceptUpdate=useCallback(()=>{if(auto)return;ReactGA.event({category:'Lists',action:'Update List from Popup',label:listUrl});dispatch(acceptListUpdate(listUrl));removeThisPopup();},[auto,dispatch,listUrl,removeThisPopup]);const{added:tokensAdded,changed:tokensChanged,removed:tokensRemoved}=useMemo(()=>{return diffTokenLists(oldList.tokens,newList.tokens);},[newList.tokens,oldList.tokens]);const numTokensChanged=useMemo(()=>Object.keys(tokensChanged).reduce((memo,chainId)=>memo+Object.keys(tokensChanged[chainId]).length,0),[tokensChanged]);return/*#__PURE__*/_jsx(AutoRow,{children:/*#__PURE__*/_jsx(AutoColumn,{style:{flex:'1'},gap:\"8px\",children:auto?/*#__PURE__*/_jsxs(TYPE.body,{fontWeight:500,children:['The token list',\" \\\"\",oldList.name,\"\\\" \",'has been updated to',' ',/*#__PURE__*/_jsx(\"strong\",{children:listVersionLabel(newList.version)}),\".\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{children:['An update is available for the token list',\" \\\"\",oldList.name,\"\\\" (\",listVersionLabel(oldList.version),\" to \",listVersionLabel(newList.version),\").\"]}),/*#__PURE__*/_jsxs(ChangesList,{children:[tokensAdded.length>0?/*#__PURE__*/_jsxs(\"li\",{children:[tokensAdded.map((token,i)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{title:token.address,children:token.symbol}),i===tokensAdded.length-1?null:', ']},\"\".concat(token.chainId,\"-\").concat(token.address))),' ','added']}):null,tokensRemoved.length>0?/*#__PURE__*/_jsxs(\"li\",{children:[tokensRemoved.map((token,i)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{title:token.address,children:token.symbol}),i===tokensRemoved.length-1?null:', ']},\"\".concat(token.chainId,\"-\").concat(token.address))),' ','removed']}):null,numTokensChanged>0?/*#__PURE__*/_jsxs(\"li\",{children:[numTokensChanged,\" \",'tokens updated']}):null]})]}),/*#__PURE__*/_jsxs(AutoRow,{children:[/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1,marginRight:12},children:/*#__PURE__*/_jsx(ButtonSecondary,{onClick:handleAcceptUpdate,children:'Accept update'})}),/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1},children:/*#__PURE__*/_jsx(ButtonSecondary,{onClick:removeThisPopup,children:'Dismiss'})})]})]})})});}","map":{"version":3,"names":["diffTokenLists","React","useCallback","useMemo","ReactGA","useDispatch","Text","styled","useRemovePopup","acceptListUpdate","TYPE","listVersionLabel","ButtonSecondary","AutoColumn","AutoRow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChangesList","ul","_templateObject","_taggedTemplateLiteral","ListUpdatePopup","_ref","popKey","listUrl","oldList","newList","auto","removePopup","removeThisPopup","dispatch","handleAcceptUpdate","event","category","action","label","added","tokensAdded","changed","tokensChanged","removed","tokensRemoved","tokens","numTokensChanged","Object","keys","reduce","memo","chainId","length","children","style","flex","gap","body","fontWeight","name","version","map","token","i","title","address","symbol","concat","flexGrow","marginRight","onClick"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/Popups/ListUpdatePopup.tsx"],"sourcesContent":["import { diffTokenLists, TokenList } from '@uniswap/token-lists'\nimport React, { useCallback, useMemo } from 'react'\nimport ReactGA from 'react-ga'\nimport { useDispatch } from 'react-redux'\nimport { Text } from 'rebass'\nimport styled from 'styled-components'\n\nimport { AppDispatch } from '../../state'\nimport { useRemovePopup } from '../../state/application/hooks'\nimport { acceptListUpdate } from '../../state/lists/actions'\nimport { TYPE } from '../../theme'\nimport listVersionLabel from '../../utils/listVersionLabel'\nimport { ButtonSecondary } from '../Button'\nimport { AutoColumn } from '../Column'\nimport { AutoRow } from '../Row'\n\nexport const ChangesList = styled.ul`\n  max-height: 400px;\n  overflow: auto;\n`\n\nexport default function ListUpdatePopup({\n  popKey,\n  listUrl,\n  oldList,\n  newList,\n  auto,\n}: {\n  popKey: string\n  listUrl: string\n  oldList: TokenList\n  newList: TokenList\n  auto: boolean\n}) {\n  const removePopup = useRemovePopup()\n  const removeThisPopup = useCallback(() => removePopup(popKey), [popKey, removePopup])\n  const dispatch = useDispatch<AppDispatch>()\n\n  const handleAcceptUpdate = useCallback(() => {\n    if (auto) return\n    ReactGA.event({\n      category: 'Lists',\n      action: 'Update List from Popup',\n      label: listUrl,\n    })\n    dispatch(acceptListUpdate(listUrl))\n    removeThisPopup()\n  }, [auto, dispatch, listUrl, removeThisPopup])\n\n  const {\n    added: tokensAdded,\n    changed: tokensChanged,\n    removed: tokensRemoved,\n  } = useMemo(() => {\n    return diffTokenLists(oldList.tokens, newList.tokens)\n  }, [newList.tokens, oldList.tokens])\n  const numTokensChanged = useMemo(\n    () =>\n      Object.keys(tokensChanged).reduce((memo, chainId: any) => memo + Object.keys(tokensChanged[chainId]).length, 0),\n    [tokensChanged]\n  )\n\n  return (\n    <AutoRow>\n      <AutoColumn style={{ flex: '1' }} gap=\"8px\">\n        {auto ? (\n          <TYPE.body fontWeight={500}>\n            {'The token list'} &quot;{oldList.name}&quot; {'has been updated to'}{' '}\n            <strong>{listVersionLabel(newList.version)}</strong>.\n          </TYPE.body>\n        ) : (\n          <>\n            <div>\n              <Text>\n                {'An update is available for the token list'} &quot;{oldList.name}&quot; (\n                {listVersionLabel(oldList.version)} to {listVersionLabel(newList.version)}).\n              </Text>\n              <ChangesList>\n                {tokensAdded.length > 0 ? (\n                  <li>\n                    {tokensAdded.map((token, i) => (\n                      <React.Fragment key={`${token.chainId}-${token.address}`}>\n                        <strong title={token.address}>{token.symbol}</strong>\n                        {i === tokensAdded.length - 1 ? null : ', '}\n                      </React.Fragment>\n                    ))}{' '}\n                    {'added'}\n                  </li>\n                ) : null}\n                {tokensRemoved.length > 0 ? (\n                  <li>\n                    {tokensRemoved.map((token, i) => (\n                      <React.Fragment key={`${token.chainId}-${token.address}`}>\n                        <strong title={token.address}>{token.symbol}</strong>\n                        {i === tokensRemoved.length - 1 ? null : ', '}\n                      </React.Fragment>\n                    ))}{' '}\n                    {'removed'}\n                  </li>\n                ) : null}\n                {numTokensChanged > 0 ? (\n                  <li>\n                    {numTokensChanged} {'tokens updated'}\n                  </li>\n                ) : null}\n              </ChangesList>\n            </div>\n            <AutoRow>\n              <div style={{ flexGrow: 1, marginRight: 12 }}>\n                <ButtonSecondary onClick={handleAcceptUpdate}>{'Accept update'}</ButtonSecondary>\n              </div>\n              <div style={{ flexGrow: 1 }}>\n                <ButtonSecondary onClick={removeThisPopup}>{'Dismiss'}</ButtonSecondary>\n              </div>\n            </AutoRow>\n          </>\n        )}\n      </AutoColumn>\n    </AutoRow>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}