{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{useCelo}from'@celo/react-celo';import React,{useEffect,useState}from'react';import styled,{keyframes}from'styled-components';import{useBlockNumber}from'../../state/application/hooks';import{ExternalLink,TYPE}from'../../theme';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StyledPolling=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  display: flex;\\n  right: 0;\\n  bottom: 0;\\n  padding: 1rem;\\n  color: white;\\n  transition: opacity 0.25s ease;\\n  color: \",\";\\n  :hover {\\n    opacity: 1;\\n  }\\n\\n  \",\"\\n\"])),_ref=>{let{theme}=_ref;return theme.green1;},_ref2=>{let{theme}=_ref2;return theme.mediaWidth.upToMedium(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    display: none;\\n  \"])));});const StyledPollingDot=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 8px;\\n  height: 8px;\\n  min-height: 8px;\\n  min-width: 8px;\\n  margin-left: 0.5rem;\\n  margin-top: 3px;\\n  border-radius: 50%;\\n  position: relative;\\n  background-color: \",\";\\n\"])),_ref3=>{let{theme}=_ref3;return theme.green1;});const rotate360=keyframes(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n\"])));const Spinner=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  animation: \",\" 1s cubic-bezier(0.83, 0, 0.17, 1) infinite;\\n  transform: translateZ(0);\\n\\n  border-top: 1px solid transparent;\\n  border-right: 1px solid transparent;\\n  border-bottom: 1px solid transparent;\\n  border-left: 2px solid \",\";\\n  background: transparent;\\n  width: 14px;\\n  height: 14px;\\n  border-radius: 50%;\\n  position: relative;\\n\\n  left: -3px;\\n  top: -3px;\\n\"])),rotate360,_ref4=>{let{theme}=_ref4;return theme.green1;});export default function Polling(){const{network}=useCelo();const chainId=network.chainId;const blockNumber=useBlockNumber();const[isMounted,setIsMounted]=useState(true);useEffect(()=>{const timer1=setTimeout(()=>setIsMounted(true),1000);// this will clear Timeout when component unmount like in willComponentUnmount\nreturn()=>{setIsMounted(false);clearTimeout(timer1);};},[blockNumber]//useEffect will run only one time\n//if you pass a value to array, like this [data] than clearTimeout will run every time this value changes (useEffect re-run)\n);return/*#__PURE__*/_jsx(ExternalLink,{href:chainId&&blockNumber?\"\".concat(network.explorer,\"/blocks\"):'',children:/*#__PURE__*/_jsxs(StyledPolling,{children:[/*#__PURE__*/_jsx(TYPE.small,{style:{opacity:isMounted?'0.2':'0.6'},children:blockNumber}),/*#__PURE__*/_jsx(StyledPollingDot,{children:!isMounted&&/*#__PURE__*/_jsx(Spinner,{})})]})});}","map":{"version":3,"names":["useCelo","React","useEffect","useState","styled","keyframes","useBlockNumber","ExternalLink","TYPE","jsx","_jsx","jsxs","_jsxs","StyledPolling","div","_templateObject","_taggedTemplateLiteral","_ref","theme","green1","_ref2","mediaWidth","upToMedium","_templateObject2","StyledPollingDot","_templateObject3","_ref3","rotate360","_templateObject4","Spinner","_templateObject5","_ref4","Polling","network","chainId","blockNumber","isMounted","setIsMounted","timer1","setTimeout","clearTimeout","href","concat","explorer","children","small","style","opacity"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/Header/Polling.tsx"],"sourcesContent":["import { useCelo } from '@celo/react-celo'\nimport { ChainId } from '@ubeswap/sdk'\nimport React, { useEffect, useState } from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nimport { useBlockNumber } from '../../state/application/hooks'\nimport { ExternalLink, TYPE } from '../../theme'\n\nconst StyledPolling = styled.div`\n  position: fixed;\n  display: flex;\n  right: 0;\n  bottom: 0;\n  padding: 1rem;\n  color: white;\n  transition: opacity 0.25s ease;\n  color: ${({ theme }) => theme.green1};\n  :hover {\n    opacity: 1;\n  }\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    display: none;\n  `}\n`\nconst StyledPollingDot = styled.div`\n  width: 8px;\n  height: 8px;\n  min-height: 8px;\n  min-width: 8px;\n  margin-left: 0.5rem;\n  margin-top: 3px;\n  border-radius: 50%;\n  position: relative;\n  background-color: ${({ theme }) => theme.green1};\n`\n\nconst rotate360 = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst Spinner = styled.div`\n  animation: ${rotate360} 1s cubic-bezier(0.83, 0, 0.17, 1) infinite;\n  transform: translateZ(0);\n\n  border-top: 1px solid transparent;\n  border-right: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n  border-left: 2px solid ${({ theme }) => theme.green1};\n  background: transparent;\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  position: relative;\n\n  left: -3px;\n  top: -3px;\n`\n\nexport default function Polling() {\n  const { network } = useCelo()\n  const chainId = network.chainId as unknown as ChainId\n\n  const blockNumber = useBlockNumber()\n\n  const [isMounted, setIsMounted] = useState(true)\n\n  useEffect(\n    () => {\n      const timer1 = setTimeout(() => setIsMounted(true), 1000)\n\n      // this will clear Timeout when component unmount like in willComponentUnmount\n      return () => {\n        setIsMounted(false)\n        clearTimeout(timer1)\n      }\n    },\n    [blockNumber] //useEffect will run only one time\n    //if you pass a value to array, like this [data] than clearTimeout will run every time this value changes (useEffect re-run)\n  )\n\n  return (\n    <ExternalLink href={chainId && blockNumber ? `${network.explorer}/blocks` : ''}>\n      <StyledPolling>\n        <TYPE.small style={{ opacity: isMounted ? '0.2' : '0.6' }}>{blockNumber}</TYPE.small>\n        <StyledPollingDot>{!isMounted && <Spinner />}</StyledPollingDot>\n      </StyledPolling>\n    </ExternalLink>\n  )\n}\n"],"mappings":"oRAAA,OAASA,OAAO,KAAQ,kBAAkB,CAE1C,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,EAAIC,SAAS,KAAQ,mBAAmB,CAErD,OAASC,cAAc,KAAQ,+BAA+B,CAC9D,OAASC,YAAY,CAAEC,IAAI,KAAQ,aAAa,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,aAAa,CAAGT,MAAM,CAACU,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,2MAQrBC,IAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,IAAA,OAAK,CAAAC,KAAK,CAACC,MAAM,GAKlCC,KAAA,MAAC,CAAEF,KAAM,CAAC,CAAAE,KAAA,OAAK,CAAAF,KAAK,CAACG,UAAU,CAACC,UAAU,CAAAC,gBAAA,GAAAA,gBAAA,CAAAP,sBAAA,kCAE3C,CACF,CACD,KAAM,CAAAQ,gBAAgB,CAAGpB,MAAM,CAACU,GAAG,CAAAW,gBAAA,GAAAA,gBAAA,CAAAT,sBAAA,oMASbU,KAAA,MAAC,CAAER,KAAM,CAAC,CAAAQ,KAAA,OAAK,CAAAR,KAAK,CAACC,MAAM,GAChD,CAED,KAAM,CAAAQ,SAAS,CAAGtB,SAAS,CAAAuB,gBAAA,GAAAA,gBAAA,CAAAZ,sBAAA,oGAO1B,CAED,KAAM,CAAAa,OAAO,CAAGzB,MAAM,CAACU,GAAG,CAAAgB,gBAAA,GAAAA,gBAAA,CAAAd,sBAAA,uYACXW,SAAS,CAMGI,KAAA,MAAC,CAAEb,KAAM,CAAC,CAAAa,KAAA,OAAK,CAAAb,KAAK,CAACC,MAAM,GASrD,CAED,cAAe,SAAS,CAAAa,OAAOA,CAAA,CAAG,CAChC,KAAM,CAAEC,OAAQ,CAAC,CAAGjC,OAAO,CAAC,CAAC,CAC7B,KAAM,CAAAkC,OAAO,CAAGD,OAAO,CAACC,OAA6B,CAErD,KAAM,CAAAC,WAAW,CAAG7B,cAAc,CAAC,CAAC,CAEpC,KAAM,CAAC8B,SAAS,CAAEC,YAAY,CAAC,CAAGlC,QAAQ,CAAC,IAAI,CAAC,CAEhDD,SAAS,CACP,IAAM,CACJ,KAAM,CAAAoC,MAAM,CAAGC,UAAU,CAAC,IAAMF,YAAY,CAAC,IAAI,CAAC,CAAE,IAAI,CAAC,CAEzD;AACA,MAAO,IAAM,CACXA,YAAY,CAAC,KAAK,CAAC,CACnBG,YAAY,CAACF,MAAM,CAAC,CACtB,CAAC,CACH,CAAC,CACD,CAACH,WAAW,CAAE;AACd;AACF,CAAC,CAED,mBACEzB,IAAA,CAACH,YAAY,EAACkC,IAAI,CAAEP,OAAO,EAAIC,WAAW,IAAAO,MAAA,CAAMT,OAAO,CAACU,QAAQ,YAAY,EAAG,CAAAC,QAAA,cAC7EhC,KAAA,CAACC,aAAa,EAAA+B,QAAA,eACZlC,IAAA,CAACF,IAAI,CAACqC,KAAK,EAACC,KAAK,CAAE,CAAEC,OAAO,CAAEX,SAAS,CAAG,KAAK,CAAG,KAAM,CAAE,CAAAQ,QAAA,CAAET,WAAW,CAAa,CAAC,cACrFzB,IAAA,CAACc,gBAAgB,EAAAoB,QAAA,CAAE,CAACR,SAAS,eAAI1B,IAAA,CAACmB,OAAO,GAAE,CAAC,CAAmB,CAAC,EACnD,CAAC,CACJ,CAAC,CAEnB"},"metadata":{},"sourceType":"module"}