{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compareLedgerAppVersions = exports.list = exports.tokenInfoByAddressAndChainId = void 0;\n// Copied from '@ledgerhq/hw-app-eth/erc20' because we need to change the path of the blob and support for address+chainId\nvar address_1 = require(\"@celo/base/lib/address\");\nvar data_1 = __importDefault(require(\"./data\"));\n/**\n * Retrieve the token information by a given contract address and chainId if any\n */\nvar tokenInfoByAddressAndChainId = function tokenInfoByAddressAndChainId(contract, chainId) {\n  return get().byContractKey(generateContractKey(contract, chainId));\n};\nexports.tokenInfoByAddressAndChainId = tokenInfoByAddressAndChainId;\n/**\n * list all the ERC20 tokens informations\n */\nvar list = function list() {\n  return get().list();\n};\nexports.list = list;\n/**\n * @return\n * -1: version1 < version2,\n *  0: version1 == version2,\n *  1: version1 > version2\n */\nfunction compareLedgerAppVersions(version1, version2) {\n  var numberV1 = stringVersionToNumber(version1);\n  var numberV2 = stringVersionToNumber(version2);\n  return numberV1 < numberV2 ? -1 : numberV1 === numberV2 ? 0 : 1;\n}\nexports.compareLedgerAppVersions = compareLedgerAppVersions;\nfunction stringVersionToNumber(version) {\n  var parts = version.split('.');\n  return parts.reduce(function (accum, part) {\n    return (accum + Number(part)) * 1000;\n  }, 0);\n}\nfunction generateContractKey(contract, chainId) {\n  return [(0, address_1.normalizeAddressWith0x)(contract), chainId].join('-');\n}\n// this internal get() will lazy load and cache the data from the erc20 data blob\nvar get = function () {\n  var cache;\n  return function () {\n    if (cache) {\n      return cache;\n    }\n    var buf = Buffer.from(data_1.default, 'base64');\n    var byContract = {};\n    var entries = [];\n    var i = 0;\n    while (i < buf.length) {\n      var length_1 = buf.readUInt32BE(i);\n      i += 4;\n      var item = buf.slice(i, i + length_1);\n      var j = 0;\n      var tickerLength = item.readUInt8(j);\n      j += 1;\n      var ticker = item.slice(j, j + tickerLength).toString('ascii');\n      j += tickerLength;\n      var contractAddress = (0, address_1.normalizeAddressWith0x)(item.slice(j, j + 20).toString('hex'));\n      j += 20;\n      var decimals = item.readUInt32BE(j);\n      j += 4;\n      var chainId = item.readUInt32BE(j);\n      j += 4;\n      var signature = item.slice(j);\n      var entry = {\n        ticker: ticker,\n        contractAddress: contractAddress,\n        decimals: decimals,\n        chainId: chainId,\n        signature: signature,\n        data: item\n      };\n      entries.push(entry);\n      byContract[generateContractKey(contractAddress, chainId)] = entry;\n      i += length_1;\n    }\n    var api = {\n      list: function list() {\n        return entries;\n      },\n      byContractKey: function byContractKey(id) {\n        return byContract[id];\n      }\n    };\n    cache = api;\n    return api;\n  };\n}();","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","compareLedgerAppVersions","list","tokenInfoByAddressAndChainId","address_1","require","data_1","contract","chainId","get","byContractKey","generateContractKey","version1","version2","numberV1","stringVersionToNumber","numberV2","version","parts","split","reduce","accum","part","Number","normalizeAddressWith0x","join","cache","buf","Buffer","from","default","byContract","entries","i","length","length_1","readUInt32BE","item","slice","j","tickerLength","readUInt8","ticker","toString","contractAddress","decimals","signature","entry","data","push","api","id"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@celo/wallet-ledger/lib/tokens.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compareLedgerAppVersions = exports.list = exports.tokenInfoByAddressAndChainId = void 0;\n// Copied from '@ledgerhq/hw-app-eth/erc20' because we need to change the path of the blob and support for address+chainId\nvar address_1 = require(\"@celo/base/lib/address\");\nvar data_1 = __importDefault(require(\"./data\"));\n/**\n * Retrieve the token information by a given contract address and chainId if any\n */\nvar tokenInfoByAddressAndChainId = function (contract, chainId) { return get().byContractKey(generateContractKey(contract, chainId)); };\nexports.tokenInfoByAddressAndChainId = tokenInfoByAddressAndChainId;\n/**\n * list all the ERC20 tokens informations\n */\nvar list = function () { return get().list(); };\nexports.list = list;\n/**\n * @return\n * -1: version1 < version2,\n *  0: version1 == version2,\n *  1: version1 > version2\n */\nfunction compareLedgerAppVersions(version1, version2) {\n    var numberV1 = stringVersionToNumber(version1);\n    var numberV2 = stringVersionToNumber(version2);\n    return numberV1 < numberV2 ? -1 : numberV1 === numberV2 ? 0 : 1;\n}\nexports.compareLedgerAppVersions = compareLedgerAppVersions;\nfunction stringVersionToNumber(version) {\n    var parts = version.split('.');\n    return parts.reduce(function (accum, part) { return (accum + Number(part)) * 1000; }, 0);\n}\nfunction generateContractKey(contract, chainId) {\n    return [(0, address_1.normalizeAddressWith0x)(contract), chainId].join('-');\n}\n// this internal get() will lazy load and cache the data from the erc20 data blob\nvar get = (function () {\n    var cache;\n    return function () {\n        if (cache) {\n            return cache;\n        }\n        var buf = Buffer.from(data_1.default, 'base64');\n        var byContract = {};\n        var entries = [];\n        var i = 0;\n        while (i < buf.length) {\n            var length_1 = buf.readUInt32BE(i);\n            i += 4;\n            var item = buf.slice(i, i + length_1);\n            var j = 0;\n            var tickerLength = item.readUInt8(j);\n            j += 1;\n            var ticker = item.slice(j, j + tickerLength).toString('ascii');\n            j += tickerLength;\n            var contractAddress = (0, address_1.normalizeAddressWith0x)(item.slice(j, j + 20).toString('hex'));\n            j += 20;\n            var decimals = item.readUInt32BE(j);\n            j += 4;\n            var chainId = item.readUInt32BE(j);\n            j += 4;\n            var signature = item.slice(j);\n            var entry = {\n                ticker: ticker,\n                contractAddress: contractAddress,\n                decimals: decimals,\n                chainId: chainId,\n                signature: signature,\n                data: item,\n            };\n            entries.push(entry);\n            byContract[generateContractKey(contractAddress, chainId)] = entry;\n            i += length_1;\n        }\n        var api = {\n            list: function () { return entries; },\n            byContractKey: function (id) { return byContract[id]; },\n        };\n        cache = api;\n        return api;\n    };\n})();\n//# sourceMappingURL=tokens.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}