{"ast":null,"code":"import usePrevious from'hooks/usePrevious';import React,{useCallback,useEffect,useState}from'react';import useLast from'../../hooks/useLast';import Modal from'../Modal';import{CurrencySearch}from'./CurrencySearch';import{ImportList}from'./ImportList';import{ImportToken}from'./ImportToken';import Manage from'./Manage';import{jsx as _jsx}from\"react/jsx-runtime\";export let CurrencyModalView=/*#__PURE__*/function(CurrencyModalView){CurrencyModalView[CurrencyModalView[\"search\"]=0]=\"search\";CurrencyModalView[CurrencyModalView[\"manage\"]=1]=\"manage\";CurrencyModalView[CurrencyModalView[\"importToken\"]=2]=\"importToken\";CurrencyModalView[CurrencyModalView[\"importList\"]=3]=\"importList\";return CurrencyModalView;}({});export default function CurrencySearchModal(_ref){let{isOpen,onDismiss,onCurrencySelect,selectedCurrency,otherSelectedCurrency,showCommonBases=false,chainId}=_ref;const[modalView,setModalView]=useState(CurrencyModalView.manage);const lastOpen=useLast(isOpen);useEffect(()=>{if(isOpen&&!lastOpen){setModalView(CurrencyModalView.search);}},[isOpen,lastOpen]);const handleCurrencySelect=useCallback(currency=>{onCurrencySelect(currency);onDismiss();},[onDismiss,onCurrencySelect]);// for token import view\nconst prevView=usePrevious(modalView);// used for import token flow\nconst[importToken,setImportToken]=useState();// used for import list\nconst[importList,setImportList]=useState();const[listURL,setListUrl]=useState();// change min height if not searching\nconst minHeight=modalView===CurrencyModalView.importToken||modalView===CurrencyModalView.importList?40:80;return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onDismiss:onDismiss,maxHeight:80,minHeight:minHeight,children:modalView===CurrencyModalView.search?/*#__PURE__*/_jsx(CurrencySearch,{isOpen:isOpen,onDismiss:onDismiss,onCurrencySelect:handleCurrencySelect,selectedCurrency:selectedCurrency,otherSelectedCurrency:otherSelectedCurrency,showCommonBases:showCommonBases,showImportView:()=>setModalView(CurrencyModalView.importToken),setImportToken:setImportToken,showManageView:()=>setModalView(CurrencyModalView.manage),chainId:chainId}):modalView===CurrencyModalView.importToken&&importToken?/*#__PURE__*/_jsx(ImportToken,{tokens:[importToken],onDismiss:onDismiss,onBack:()=>setModalView(prevView&&prevView!==CurrencyModalView.importToken?prevView:CurrencyModalView.search),handleCurrencySelect:handleCurrencySelect}):modalView===CurrencyModalView.importList&&importList&&listURL?/*#__PURE__*/_jsx(ImportList,{list:importList,listURL:listURL,onDismiss:onDismiss,setModalView:setModalView}):modalView===CurrencyModalView.manage?/*#__PURE__*/_jsx(Manage,{onDismiss:onDismiss,setModalView:setModalView,setImportToken:setImportToken,setImportList:setImportList,setListUrl:setListUrl}):''});}","map":{"version":3,"names":["usePrevious","React","useCallback","useEffect","useState","useLast","Modal","CurrencySearch","ImportList","ImportToken","Manage","jsx","_jsx","CurrencyModalView","CurrencySearchModal","_ref","isOpen","onDismiss","onCurrencySelect","selectedCurrency","otherSelectedCurrency","showCommonBases","chainId","modalView","setModalView","manage","lastOpen","search","handleCurrencySelect","currency","prevView","importToken","setImportToken","importList","setImportList","listURL","setListUrl","minHeight","maxHeight","children","showImportView","showManageView","tokens","onBack","list"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/components/SearchModal/CurrencySearchModal.tsx"],"sourcesContent":["import { ChainId } from '@celo/react-celo'\nimport { Token } from '@ubeswap/sdk'\nimport { TokenList } from '@uniswap/token-lists'\nimport usePrevious from 'hooks/usePrevious'\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport useLast from '../../hooks/useLast'\nimport Modal from '../Modal'\nimport { CurrencySearch } from './CurrencySearch'\nimport { ImportList } from './ImportList'\nimport { ImportToken } from './ImportToken'\nimport Manage from './Manage'\n\ninterface CurrencySearchModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Token | null\n  onCurrencySelect: (currency: Token) => void\n  otherSelectedCurrency?: Token | null\n  showCommonBases?: boolean\n  chainId?: ChainId\n}\n\nexport enum CurrencyModalView {\n  search,\n  manage,\n  importToken,\n  importList,\n}\n\nexport default function CurrencySearchModal({\n  isOpen,\n  onDismiss,\n  onCurrencySelect,\n  selectedCurrency,\n  otherSelectedCurrency,\n  showCommonBases = false,\n  chainId,\n}: CurrencySearchModalProps) {\n  const [modalView, setModalView] = useState<CurrencyModalView>(CurrencyModalView.manage)\n  const lastOpen = useLast(isOpen)\n\n  useEffect(() => {\n    if (isOpen && !lastOpen) {\n      setModalView(CurrencyModalView.search)\n    }\n  }, [isOpen, lastOpen])\n\n  const handleCurrencySelect = useCallback(\n    (currency: Token) => {\n      onCurrencySelect(currency)\n      onDismiss()\n    },\n    [onDismiss, onCurrencySelect]\n  )\n\n  // for token import view\n  const prevView = usePrevious(modalView)\n\n  // used for import token flow\n  const [importToken, setImportToken] = useState<Token | undefined>()\n\n  // used for import list\n  const [importList, setImportList] = useState<TokenList | undefined>()\n  const [listURL, setListUrl] = useState<string | undefined>()\n\n  // change min height if not searching\n  const minHeight = modalView === CurrencyModalView.importToken || modalView === CurrencyModalView.importList ? 40 : 80\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={onDismiss} maxHeight={80} minHeight={minHeight}>\n      {modalView === CurrencyModalView.search ? (\n        <CurrencySearch\n          isOpen={isOpen}\n          onDismiss={onDismiss}\n          onCurrencySelect={handleCurrencySelect}\n          selectedCurrency={selectedCurrency}\n          otherSelectedCurrency={otherSelectedCurrency}\n          showCommonBases={showCommonBases}\n          showImportView={() => setModalView(CurrencyModalView.importToken)}\n          setImportToken={setImportToken}\n          showManageView={() => setModalView(CurrencyModalView.manage)}\n          chainId={chainId}\n        />\n      ) : modalView === CurrencyModalView.importToken && importToken ? (\n        <ImportToken\n          tokens={[importToken]}\n          onDismiss={onDismiss}\n          onBack={() =>\n            setModalView(prevView && prevView !== CurrencyModalView.importToken ? prevView : CurrencyModalView.search)\n          }\n          handleCurrencySelect={handleCurrencySelect}\n        />\n      ) : modalView === CurrencyModalView.importList && importList && listURL ? (\n        <ImportList list={importList} listURL={listURL} onDismiss={onDismiss} setModalView={setModalView} />\n      ) : modalView === CurrencyModalView.manage ? (\n        <Manage\n          onDismiss={onDismiss}\n          setModalView={setModalView}\n          setImportToken={setImportToken}\n          setImportList={setImportList}\n          setListUrl={setListUrl}\n        />\n      ) : (\n        ''\n      )}\n    </Modal>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}