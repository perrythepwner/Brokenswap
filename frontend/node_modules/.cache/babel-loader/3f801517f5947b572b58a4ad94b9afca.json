{"ast":null,"code":"import _objectSpread from \"/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { createReducer } from '@reduxjs/toolkit';\nimport { Field, replaceSwapState, selectCurrency, setRecipient, switchCurrencies, typeInput } from './actions';\nconst initialState = {\n  independentField: Field.INPUT,\n  typedValue: '',\n  [Field.INPUT]: {\n    currencyId: ''\n  },\n  [Field.OUTPUT]: {\n    currencyId: ''\n  },\n  recipient: null\n};\nexport default createReducer(initialState, builder => builder.addCase(replaceSwapState, (state, _ref) => {\n  let {\n    payload: {\n      typedValue,\n      recipient,\n      field,\n      inputCurrencyId,\n      outputCurrencyId\n    }\n  } = _ref;\n  return {\n    [Field.INPUT]: {\n      currencyId: inputCurrencyId\n    },\n    [Field.OUTPUT]: {\n      currencyId: outputCurrencyId\n    },\n    independentField: field,\n    typedValue: typedValue,\n    recipient\n  };\n}).addCase(selectCurrency, (state, _ref2) => {\n  let {\n    payload: {\n      currencyId,\n      field\n    }\n  } = _ref2;\n  const otherField = field === Field.INPUT ? Field.OUTPUT : Field.INPUT;\n  if (currencyId === state[otherField].currencyId) {\n    // the case where we have to swap the order\n    return _objectSpread(_objectSpread({}, state), {}, {\n      independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n      [field]: {\n        currencyId: currencyId\n      },\n      [otherField]: {\n        currencyId: state[field].currencyId\n      }\n    });\n  } else {\n    // the normal case\n    return _objectSpread(_objectSpread({}, state), {}, {\n      [field]: {\n        currencyId: currencyId\n      }\n    });\n  }\n}).addCase(switchCurrencies, state => {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    // independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n    [Field.INPUT]: {\n      currencyId: state[Field.OUTPUT].currencyId\n    },\n    [Field.OUTPUT]: {\n      currencyId: state[Field.INPUT].currencyId\n    }\n  });\n}).addCase(typeInput, (state, _ref3) => {\n  let {\n    payload: {\n      field,\n      typedValue\n    }\n  } = _ref3;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    independentField: field,\n    typedValue\n  });\n}).addCase(setRecipient, (state, _ref4) => {\n  let {\n    payload: {\n      recipient\n    }\n  } = _ref4;\n  state.recipient = recipient;\n}));","map":{"version":3,"names":["createReducer","Field","replaceSwapState","selectCurrency","setRecipient","switchCurrencies","typeInput","initialState","independentField","INPUT","typedValue","currencyId","OUTPUT","recipient","builder","addCase","state","_ref","payload","field","inputCurrencyId","outputCurrencyId","_ref2","otherField","_objectSpread","_ref3","_ref4"],"sources":["/home/simone/Scrivania/progetti/HTB_challs/HackTheBoo_23/VeryEasy2/Brokenswap/frontend/src/state/swap/reducer.ts"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\n\nimport { Field, replaceSwapState, selectCurrency, setRecipient, switchCurrencies, typeInput } from './actions'\n\nexport interface SwapState {\n  readonly independentField: Field\n  readonly typedValue: string\n  readonly [Field.INPUT]: {\n    readonly currencyId: string | undefined\n  }\n  readonly [Field.OUTPUT]: {\n    readonly currencyId: string | undefined\n  }\n  // the typed recipient address or ENS name, or null if swap should go to sender\n  readonly recipient: string | null\n}\n\nconst initialState: SwapState = {\n  independentField: Field.INPUT,\n  typedValue: '',\n  [Field.INPUT]: {\n    currencyId: '',\n  },\n  [Field.OUTPUT]: {\n    currencyId: '',\n  },\n  recipient: null,\n}\n\nexport default createReducer<SwapState>(initialState, (builder) =>\n  builder\n    .addCase(\n      replaceSwapState,\n      (state, { payload: { typedValue, recipient, field, inputCurrencyId, outputCurrencyId } }) => {\n        return {\n          [Field.INPUT]: {\n            currencyId: inputCurrencyId,\n          },\n          [Field.OUTPUT]: {\n            currencyId: outputCurrencyId,\n          },\n          independentField: field,\n          typedValue: typedValue,\n          recipient,\n        }\n      }\n    )\n    .addCase(selectCurrency, (state, { payload: { currencyId, field } }) => {\n      const otherField = field === Field.INPUT ? Field.OUTPUT : Field.INPUT\n      if (currencyId === state[otherField].currencyId) {\n        // the case where we have to swap the order\n        return {\n          ...state,\n          independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n          [field]: { currencyId: currencyId },\n          [otherField]: { currencyId: state[field].currencyId },\n        }\n      } else {\n        // the normal case\n        return {\n          ...state,\n          [field]: { currencyId: currencyId },\n        }\n      }\n    })\n    .addCase(switchCurrencies, (state) => {\n      return {\n        ...state,\n        // independentField: state.independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT,\n        [Field.INPUT]: { currencyId: state[Field.OUTPUT].currencyId },\n        [Field.OUTPUT]: { currencyId: state[Field.INPUT].currencyId },\n      }\n    })\n    .addCase(typeInput, (state, { payload: { field, typedValue } }) => {\n      return {\n        ...state,\n        independentField: field,\n        typedValue,\n      }\n    })\n    .addCase(setRecipient, (state, { payload: { recipient } }) => {\n      state.recipient = recipient\n    })\n)\n"],"mappings":";AAAA,SAASA,aAAa,QAAQ,kBAAkB;AAEhD,SAASC,KAAK,EAAEC,gBAAgB,EAAEC,cAAc,EAAEC,YAAY,EAAEC,gBAAgB,EAAEC,SAAS,QAAQ,WAAW;AAe9G,MAAMC,YAAuB,GAAG;EAC9BC,gBAAgB,EAAEP,KAAK,CAACQ,KAAK;EAC7BC,UAAU,EAAE,EAAE;EACd,CAACT,KAAK,CAACQ,KAAK,GAAG;IACbE,UAAU,EAAE;EACd,CAAC;EACD,CAACV,KAAK,CAACW,MAAM,GAAG;IACdD,UAAU,EAAE;EACd,CAAC;EACDE,SAAS,EAAE;AACb,CAAC;AAED,eAAeb,aAAa,CAAYO,YAAY,EAAGO,OAAO,IAC5DA,OAAO,CACJC,OAAO,CACNb,gBAAgB,EAChB,CAACc,KAAK,EAAAC,IAAA,KAAuF;EAAA,IAArF;IAAEC,OAAO,EAAE;MAAER,UAAU;MAAEG,SAAS;MAAEM,KAAK;MAAEC,eAAe;MAAEC;IAAiB;EAAE,CAAC,GAAAJ,IAAA;EACtF,OAAO;IACL,CAAChB,KAAK,CAACQ,KAAK,GAAG;MACbE,UAAU,EAAES;IACd,CAAC;IACD,CAACnB,KAAK,CAACW,MAAM,GAAG;MACdD,UAAU,EAAEU;IACd,CAAC;IACDb,gBAAgB,EAAEW,KAAK;IACvBT,UAAU,EAAEA,UAAU;IACtBG;EACF,CAAC;AACH,CACF,CAAC,CACAE,OAAO,CAACZ,cAAc,EAAE,CAACa,KAAK,EAAAM,KAAA,KAAyC;EAAA,IAAvC;IAAEJ,OAAO,EAAE;MAAEP,UAAU;MAAEQ;IAAM;EAAE,CAAC,GAAAG,KAAA;EACjE,MAAMC,UAAU,GAAGJ,KAAK,KAAKlB,KAAK,CAACQ,KAAK,GAAGR,KAAK,CAACW,MAAM,GAAGX,KAAK,CAACQ,KAAK;EACrE,IAAIE,UAAU,KAAKK,KAAK,CAACO,UAAU,CAAC,CAACZ,UAAU,EAAE;IAC/C;IACA,OAAAa,aAAA,CAAAA,aAAA,KACKR,KAAK;MACRR,gBAAgB,EAAEQ,KAAK,CAACR,gBAAgB,KAAKP,KAAK,CAACQ,KAAK,GAAGR,KAAK,CAACW,MAAM,GAAGX,KAAK,CAACQ,KAAK;MACrF,CAACU,KAAK,GAAG;QAAER,UAAU,EAAEA;MAAW,CAAC;MACnC,CAACY,UAAU,GAAG;QAAEZ,UAAU,EAAEK,KAAK,CAACG,KAAK,CAAC,CAACR;MAAW;IAAC;EAEzD,CAAC,MAAM;IACL;IACA,OAAAa,aAAA,CAAAA,aAAA,KACKR,KAAK;MACR,CAACG,KAAK,GAAG;QAAER,UAAU,EAAEA;MAAW;IAAC;EAEvC;AACF,CAAC,CAAC,CACDI,OAAO,CAACV,gBAAgB,EAAGW,KAAK,IAAK;EACpC,OAAAQ,aAAA,CAAAA,aAAA,KACKR,KAAK;IACR;IACA,CAACf,KAAK,CAACQ,KAAK,GAAG;MAAEE,UAAU,EAAEK,KAAK,CAACf,KAAK,CAACW,MAAM,CAAC,CAACD;IAAW,CAAC;IAC7D,CAACV,KAAK,CAACW,MAAM,GAAG;MAAED,UAAU,EAAEK,KAAK,CAACf,KAAK,CAACQ,KAAK,CAAC,CAACE;IAAW;EAAC;AAEjE,CAAC,CAAC,CACDI,OAAO,CAACT,SAAS,EAAE,CAACU,KAAK,EAAAS,KAAA,KAAyC;EAAA,IAAvC;IAAEP,OAAO,EAAE;MAAEC,KAAK;MAAET;IAAW;EAAE,CAAC,GAAAe,KAAA;EAC5D,OAAAD,aAAA,CAAAA,aAAA,KACKR,KAAK;IACRR,gBAAgB,EAAEW,KAAK;IACvBT;EAAU;AAEd,CAAC,CAAC,CACDK,OAAO,CAACX,YAAY,EAAE,CAACY,KAAK,EAAAU,KAAA,KAAiC;EAAA,IAA/B;IAAER,OAAO,EAAE;MAAEL;IAAU;EAAE,CAAC,GAAAa,KAAA;EACvDV,KAAK,CAACH,SAAS,GAAGA,SAAS;AAC7B,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module"}